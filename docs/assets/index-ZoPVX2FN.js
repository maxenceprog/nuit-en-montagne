var Ga=Object.defineProperty;var Va=(c,e,t)=>e in c?Ga(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var S=(c,e,t)=>Va(c,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();function Wa(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ot={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ja=Ot.exports,zn;function Za(){return zn||(zn=1,function(c,e){(function(t,s){s(e)})(ja,function(t){var s="1.9.4";function n(i){var r,o,u,p;for(o=1,u=arguments.length;o<u;o++){p=arguments[o];for(r in p)i[r]=p[r]}return i}var a=Object.create||function(){function i(){}return function(r){return i.prototype=r,new i}}();function l(i,r){var o=Array.prototype.slice;if(i.bind)return i.bind.apply(i,o.call(arguments,1));var u=o.call(arguments,2);return function(){return i.apply(r,u.length?u.concat(o.call(arguments)):arguments)}}var h=0;function d(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function f(i,r,o){var u,p,m,C;return C=function(){u=!1,p&&(m.apply(o,p),p=!1)},m=function(){u?p=arguments:(i.apply(o,arguments),setTimeout(C,r),u=!0)},m}function g(i,r,o){var u=r[1],p=r[0],m=u-p;return i===u&&o?i:((i-p)%m+m)%m+p}function b(){return!1}function v(i,r){if(r===!1)return i;var o=Math.pow(10,r===void 0?6:r);return Math.round(i*o)/o}function w(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function y(i){return w(i).split(/\s+/)}function R(i,r){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var o in r)i.options[o]=r[o];return i.options}function x(i,r,o){var u=[];for(var p in i)u.push(encodeURIComponent(o?p.toUpperCase():p)+"="+encodeURIComponent(i[p]));return(!r||r.indexOf("?")===-1?"?":"&")+u.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function z(i,r){return i.replace(A,function(o,u){var p=r[u];if(p===void 0)throw new Error("No value provided for variable "+o);return typeof p=="function"&&(p=p(r)),p})}var H=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function X(i,r){for(var o=0;o<i.length;o++)if(i[o]===r)return o;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function re(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Me=0;function se(i){var r=+new Date,o=Math.max(0,16-(r-Me));return Me=r+o,window.setTimeout(i,o)}var Ye=window.requestAnimationFrame||re("RequestAnimationFrame")||se,Et=window.cancelAnimationFrame||re("CancelAnimationFrame")||re("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function ae(i,r,o){if(o&&Ye===se)i.call(r);else return Ye.call(window,l(i,r))}function U(i){i&&Et.call(window,i)}var Ls={__proto__:null,extend:n,create:a,bind:l,get lastId(){return h},stamp:d,throttle:f,wrapNum:g,falseFn:b,formatNum:v,trim:w,splitWords:y,setOptions:R,getParamString:x,template:z,isArray:H,indexOf:X,emptyImageUrl:W,requestFn:Ye,cancelFn:Et,requestAnimFrame:ae,cancelAnimFrame:U};function ve(){}ve.extend=function(i){var r=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=r.__super__=this.prototype,u=a(o);u.constructor=r,r.prototype=u;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(r[p]=this[p]);return i.statics&&n(r,i.statics),i.includes&&(vr(i.includes),n.apply(null,[u].concat(i.includes))),n(u,i),delete u.statics,delete u.includes,u.options&&(u.options=o.options?a(o.options):{},n(u.options,i.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,C=u._initHooks.length;m<C;m++)u._initHooks[m].call(this)}},r},ve.include=function(i){var r=this.prototype.options;return n(this.prototype,i),i.options&&(this.prototype.options=r,this.mergeOptions(i.options)),this},ve.mergeOptions=function(i){return n(this.prototype.options,i),this},ve.addInitHook=function(i){var r=Array.prototype.slice.call(arguments,1),o=typeof i=="function"?i:function(){this[i].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function vr(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=H(i)?i:[i];for(var r=0;r<i.length;r++)i[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var me={on:function(i,r,o){if(typeof i=="object")for(var u in i)this._on(u,i[u],r);else{i=y(i);for(var p=0,m=i.length;p<m;p++)this._on(i[p],r,o)}return this},off:function(i,r,o){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var u in i)this._off(u,i[u],r);else{i=y(i);for(var p=arguments.length===1,m=0,C=i.length;m<C;m++)p?this._off(i[m]):this._off(i[m],r,o)}return this},_on:function(i,r,o,u){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(i,r,o)===!1){o===this&&(o=void 0);var p={fn:r,ctx:o};u&&(p.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(p)}},_off:function(i,r,o){var u,p,m;if(this._events&&(u=this._events[i],!!u)){if(arguments.length===1){if(this._firingCount)for(p=0,m=u.length;p<m;p++)u[p].fn=b;delete this._events[i];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var C=this._listens(i,r,o);if(C!==!1){var E=u[C];this._firingCount&&(E.fn=b,this._events[i]=u=u.slice()),u.splice(C,1)}}},fire:function(i,r,o){if(!this.listens(i,o))return this;var u=n({},r,{type:i,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var p=this._events[i];if(p){this._firingCount=this._firingCount+1||1;for(var m=0,C=p.length;m<C;m++){var E=p[m],_=E.fn;E.once&&this.off(i,_,E.ctx),_.call(E.ctx||this,u)}this._firingCount--}}return o&&this._propagateEvent(u),this},listens:function(i,r,o,u){typeof i!="string"&&console.warn('"string" type argument expected');var p=r;typeof r!="function"&&(u=!!r,p=void 0,o=void 0);var m=this._events&&this._events[i];if(m&&m.length&&this._listens(i,p,o)!==!1)return!0;if(u){for(var C in this._eventParents)if(this._eventParents[C].listens(i,r,o,u))return!0}return!1},_listens:function(i,r,o){if(!this._events)return!1;var u=this._events[i]||[];if(!r)return!!u.length;o===this&&(o=void 0);for(var p=0,m=u.length;p<m;p++)if(u[p].fn===r&&u[p].ctx===o)return p;return!1},once:function(i,r,o){if(typeof i=="object")for(var u in i)this._on(u,i[u],r,!0);else{i=y(i);for(var p=0,m=i.length;p<m;p++)this._on(i[p],r,o,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[d(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[d(i)],this},_propagateEvent:function(i){for(var r in this._eventParents)this._eventParents[r].fire(i.type,n({layer:i.target,propagatedFrom:i.target},i),!0)}};me.addEventListener=me.on,me.removeEventListener=me.clearAllEventListeners=me.off,me.addOneTimeEventListener=me.once,me.fireEvent=me.fire,me.hasEventListeners=me.listens;var wt=ve.extend(me);function P(i,r,o){this.x=o?Math.round(i):i,this.y=o?Math.round(r):r}var Ss=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};P.prototype={clone:function(){return new P(this.x,this.y)},add:function(i){return this.clone()._add(B(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(B(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new P(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new P(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ss(this.x),this.y=Ss(this.y),this},distanceTo:function(i){i=B(i);var r=i.x-this.x,o=i.y-this.y;return Math.sqrt(r*r+o*o)},equals:function(i){return i=B(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=B(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function B(i,r,o){return i instanceof P?i:H(i)?new P(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new P(i.x,i.y):new P(i,r,o)}function J(i,r){if(i)for(var o=r?[i,r]:i,u=0,p=o.length;u<p;u++)this.extend(o[u])}J.prototype={extend:function(i){var r,o;if(!i)return this;if(i instanceof P||typeof i[0]=="number"||"x"in i)r=o=B(i);else if(i=de(i),r=i.min,o=i.max,!r||!o)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=o.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(i){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var r,o;return typeof i[0]=="number"||i instanceof P?i=B(i):i=de(i),i instanceof J?(r=i.min,o=i.max):r=o=i,r.x>=this.min.x&&o.x<=this.max.x&&r.y>=this.min.y&&o.y<=this.max.y},intersects:function(i){i=de(i);var r=this.min,o=this.max,u=i.min,p=i.max,m=p.x>=r.x&&u.x<=o.x,C=p.y>=r.y&&u.y<=o.y;return m&&C},overlaps:function(i){i=de(i);var r=this.min,o=this.max,u=i.min,p=i.max,m=p.x>r.x&&u.x<o.x,C=p.y>r.y&&u.y<o.y;return m&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var r=this.min,o=this.max,u=Math.abs(r.x-o.x)*i,p=Math.abs(r.y-o.y)*i;return de(B(r.x-u,r.y-p),B(o.x+u,o.y+p))},equals:function(i){return i?(i=de(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function de(i,r){return!i||i instanceof J?i:new J(i,r)}function ce(i,r){if(i)for(var o=r?[i,r]:i,u=0,p=o.length;u<p;u++)this.extend(o[u])}ce.prototype={extend:function(i){var r=this._southWest,o=this._northEast,u,p;if(i instanceof j)u=i,p=i;else if(i instanceof ce){if(u=i._southWest,p=i._northEast,!u||!p)return this}else return i?this.extend(K(i)||ee(i)):this;return!r&&!o?(this._southWest=new j(u.lat,u.lng),this._northEast=new j(p.lat,p.lng)):(r.lat=Math.min(u.lat,r.lat),r.lng=Math.min(u.lng,r.lng),o.lat=Math.max(p.lat,o.lat),o.lng=Math.max(p.lng,o.lng)),this},pad:function(i){var r=this._southWest,o=this._northEast,u=Math.abs(r.lat-o.lat)*i,p=Math.abs(r.lng-o.lng)*i;return new ce(new j(r.lat-u,r.lng-p),new j(o.lat+u,o.lng+p))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof j||"lat"in i?i=K(i):i=ee(i);var r=this._southWest,o=this._northEast,u,p;return i instanceof ce?(u=i.getSouthWest(),p=i.getNorthEast()):u=p=i,u.lat>=r.lat&&p.lat<=o.lat&&u.lng>=r.lng&&p.lng<=o.lng},intersects:function(i){i=ee(i);var r=this._southWest,o=this._northEast,u=i.getSouthWest(),p=i.getNorthEast(),m=p.lat>=r.lat&&u.lat<=o.lat,C=p.lng>=r.lng&&u.lng<=o.lng;return m&&C},overlaps:function(i){i=ee(i);var r=this._southWest,o=this._northEast,u=i.getSouthWest(),p=i.getNorthEast(),m=p.lat>r.lat&&u.lat<o.lat,C=p.lng>r.lng&&u.lng<o.lng;return m&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,r){return i?(i=ee(i),this._southWest.equals(i.getSouthWest(),r)&&this._northEast.equals(i.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(i,r){return i instanceof ce?i:new ce(i,r)}function j(i,r,o){if(isNaN(i)||isNaN(r))throw new Error("Invalid LatLng object: ("+i+", "+r+")");this.lat=+i,this.lng=+r,o!==void 0&&(this.alt=+o)}j.prototype={equals:function(i,r){if(!i)return!1;i=K(i);var o=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return o<=(r===void 0?1e-9:r)},toString:function(i){return"LatLng("+v(this.lat,i)+", "+v(this.lng,i)+")"},distanceTo:function(i){return Ie.distance(this,K(i))},wrap:function(){return Ie.wrapLatLng(this)},toBounds:function(i){var r=180*i/40075017,o=r/Math.cos(Math.PI/180*this.lat);return ee([this.lat-r,this.lng-o],[this.lat+r,this.lng+o])},clone:function(){return new j(this.lat,this.lng,this.alt)}};function K(i,r,o){return i instanceof j?i:H(i)&&typeof i[0]!="object"?i.length===3?new j(i[0],i[1],i[2]):i.length===2?new j(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new j(i.lat,"lng"in i?i.lng:i.lon,i.alt):r===void 0?null:new j(i,r,o)}var Fe={latLngToPoint:function(i,r){var o=this.projection.project(i),u=this.scale(r);return this.transformation._transform(o,u)},pointToLatLng:function(i,r){var o=this.scale(r),u=this.transformation.untransform(i,o);return this.projection.unproject(u)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var r=this.projection.bounds,o=this.scale(i),u=this.transformation.transform(r.min,o),p=this.transformation.transform(r.max,o);return new J(u,p)},infinite:!1,wrapLatLng:function(i){var r=this.wrapLng?g(i.lng,this.wrapLng,!0):i.lng,o=this.wrapLat?g(i.lat,this.wrapLat,!0):i.lat,u=i.alt;return new j(o,r,u)},wrapLatLngBounds:function(i){var r=i.getCenter(),o=this.wrapLatLng(r),u=r.lat-o.lat,p=r.lng-o.lng;if(u===0&&p===0)return i;var m=i.getSouthWest(),C=i.getNorthEast(),E=new j(m.lat-u,m.lng-p),_=new j(C.lat-u,C.lng-p);return new ce(E,_)}},Ie=n({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(i,r){var o=Math.PI/180,u=i.lat*o,p=r.lat*o,m=Math.sin((r.lat-i.lat)*o/2),C=Math.sin((r.lng-i.lng)*o/2),E=m*m+Math.cos(u)*Math.cos(p)*C*C,_=2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E));return this.R*_}}),xs=6378137,fi={R:xs,MAX_LATITUDE:85.0511287798,project:function(i){var r=Math.PI/180,o=this.MAX_LATITUDE,u=Math.max(Math.min(o,i.lat),-o),p=Math.sin(u*r);return new P(this.R*i.lng*r,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(i){var r=180/Math.PI;return new j((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*r,i.x*r/this.R)},bounds:function(){var i=xs*Math.PI;return new J([-i,-i],[i,i])}()};function mi(i,r,o,u){if(H(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=r,this._c=o,this._d=u}mi.prototype={transform:function(i,r){return this._transform(i.clone(),r)},_transform:function(i,r){return r=r||1,i.x=r*(this._a*i.x+this._b),i.y=r*(this._c*i.y+this._d),i},untransform:function(i,r){return r=r||1,new P((i.x/r-this._b)/this._a,(i.y/r-this._d)/this._c)}};function _t(i,r,o,u){return new mi(i,r,o,u)}var gi=n({},Ie,{code:"EPSG:3857",projection:fi,transformation:function(){var i=.5/(Math.PI*fi.R);return _t(i,.5,-i,.5)}()}),Cr=n({},gi,{code:"EPSG:900913"});function Ms(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Fs(i,r){var o="",u,p,m,C,E,_;for(u=0,m=i.length;u<m;u++){for(E=i[u],p=0,C=E.length;p<C;p++)_=E[p],o+=(p?"L":"M")+_.x+" "+_.y;o+=r?F.svg?"z":"x":""}return o||"M0 0"}var bi=document.documentElement.style,Vt="ActiveXObject"in window,Er=Vt&&!document.addEventListener,Ds="msLaunchUri"in navigator&&!("documentMode"in document),vi=Te("webkit"),Bs=Te("android"),Us=Te("android 2")||Te("android 3"),wr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_r=Bs&&Te("Google")&&wr<537&&!("AudioNode"in window),Ci=!!window.opera,Ps=!Ds&&Te("chrome"),ks=Te("gecko")&&!vi&&!Ci&&!Vt,Rr=!Ps&&Te("safari"),Os=Te("phantom"),Is="OTransition"in bi,yr=navigator.platform.indexOf("Win")===0,Ns=Vt&&"transition"in bi,Ei="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Us,zs="MozPerspective"in bi,Tr=!window.L_DISABLE_3D&&(Ns||Ei||zs)&&!Is&&!Os,Rt=typeof orientation<"u"||Te("mobile"),Ar=Rt&&vi,Lr=Rt&&Ei,Hs=!window.PointerEvent&&window.MSPointerEvent,Ks=!!(window.PointerEvent||Hs),Gs="ontouchstart"in window||!!window.TouchEvent,Sr=!window.L_NO_TOUCH&&(Gs||Ks),xr=Rt&&Ci,Mr=Rt&&ks,Fr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dr=function(){var i=!1;try{var r=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",b,r),window.removeEventListener("testPassiveEventSupport",b,r)}catch{}return i}(),Br=function(){return!!document.createElement("canvas").getContext}(),wi=!!(document.createElementNS&&Ms("svg").createSVGRect),Ur=!!wi&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pr=!wi&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var r=i.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}(),kr=navigator.platform.indexOf("Mac")===0,Or=navigator.platform.indexOf("Linux")===0;function Te(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var F={ie:Vt,ielt9:Er,edge:Ds,webkit:vi,android:Bs,android23:Us,androidStock:_r,opera:Ci,chrome:Ps,gecko:ks,safari:Rr,phantom:Os,opera12:Is,win:yr,ie3d:Ns,webkit3d:Ei,gecko3d:zs,any3d:Tr,mobile:Rt,mobileWebkit:Ar,mobileWebkit3d:Lr,msPointer:Hs,pointer:Ks,touch:Sr,touchNative:Gs,mobileOpera:xr,mobileGecko:Mr,retina:Fr,passiveEvents:Dr,canvas:Br,svg:wi,vml:Pr,inlineSvg:Ur,mac:kr,linux:Or},Vs=F.msPointer?"MSPointerDown":"pointerdown",Ws=F.msPointer?"MSPointerMove":"pointermove",js=F.msPointer?"MSPointerUp":"pointerup",Zs=F.msPointer?"MSPointerCancel":"pointercancel",_i={touchstart:Vs,touchmove:Ws,touchend:js,touchcancel:Zs},Ys={touchstart:Gr,touchmove:Wt,touchend:Wt,touchcancel:Wt},rt={},qs=!1;function Ir(i,r,o){return r==="touchstart"&&Kr(),Ys[r]?(o=Ys[r].bind(this,o),i.addEventListener(_i[r],o,!1),o):(console.warn("wrong event specified:",r),b)}function Nr(i,r,o){if(!_i[r]){console.warn("wrong event specified:",r);return}i.removeEventListener(_i[r],o,!1)}function zr(i){rt[i.pointerId]=i}function Hr(i){rt[i.pointerId]&&(rt[i.pointerId]=i)}function Xs(i){delete rt[i.pointerId]}function Kr(){qs||(document.addEventListener(Vs,zr,!0),document.addEventListener(Ws,Hr,!0),document.addEventListener(js,Xs,!0),document.addEventListener(Zs,Xs,!0),qs=!0)}function Wt(i,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var o in rt)r.touches.push(rt[o]);r.changedTouches=[r],i(r)}}function Gr(i,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&oe(r),Wt(i,r)}function Vr(i){var r={},o,u;for(u in i)o=i[u],r[u]=o&&o.bind?o.bind(i):o;return i=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var Wr=200;function jr(i,r){i.addEventListener("dblclick",r);var o=0,u;function p(m){if(m.detail!==1){u=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var C=tn(m);if(!(C.some(function(_){return _ instanceof HTMLLabelElement&&_.attributes.for})&&!C.some(function(_){return _ instanceof HTMLInputElement||_ instanceof HTMLSelectElement}))){var E=Date.now();E-o<=Wr?(u++,u===2&&r(Vr(m))):u=1,o=E}}}return i.addEventListener("click",p),{dblclick:r,simDblclick:p}}function Zr(i,r){i.removeEventListener("dblclick",r.dblclick),i.removeEventListener("click",r.simDblclick)}var Ri=Yt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),yt=Yt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Js=yt==="webkitTransition"||yt==="OTransition"?yt+"End":"transitionend";function Qs(i){return typeof i=="string"?document.getElementById(i):i}function Tt(i,r){var o=i.style[r]||i.currentStyle&&i.currentStyle[r];if((!o||o==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(i,null);o=u?u[r]:null}return o==="auto"?null:o}function V(i,r,o){var u=document.createElement(i);return u.className=r||"",o&&o.appendChild(u),u}function Q(i){var r=i.parentNode;r&&r.removeChild(i)}function jt(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function at(i){var r=i.parentNode;r&&r.lastChild!==i&&r.appendChild(i)}function ot(i){var r=i.parentNode;r&&r.firstChild!==i&&r.insertBefore(i,r.firstChild)}function yi(i,r){if(i.classList!==void 0)return i.classList.contains(r);var o=Zt(i);return o.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(o)}function O(i,r){if(i.classList!==void 0)for(var o=y(r),u=0,p=o.length;u<p;u++)i.classList.add(o[u]);else if(!yi(i,r)){var m=Zt(i);Ti(i,(m?m+" ":"")+r)}}function $(i,r){i.classList!==void 0?i.classList.remove(r):Ti(i,w((" "+Zt(i)+" ").replace(" "+r+" "," ")))}function Ti(i,r){i.className.baseVal===void 0?i.className=r:i.className.baseVal=r}function Zt(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ce(i,r){"opacity"in i.style?i.style.opacity=r:"filter"in i.style&&Yr(i,r)}function Yr(i,r){var o=!1,u="DXImageTransform.Microsoft.Alpha";try{o=i.filters.item(u)}catch{if(r===1)return}r=Math.round(r*100),o?(o.Enabled=r!==100,o.Opacity=r):i.style.filter+=" progid:"+u+"(opacity="+r+")"}function Yt(i){for(var r=document.documentElement.style,o=0;o<i.length;o++)if(i[o]in r)return i[o];return!1}function qe(i,r,o){var u=r||new P(0,0);i.style[Ri]=(F.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(o?" scale("+o+")":"")}function te(i,r){i._leaflet_pos=r,F.any3d?qe(i,r):(i.style.left=r.x+"px",i.style.top=r.y+"px")}function Xe(i){return i._leaflet_pos||new P(0,0)}var At,Lt,Ai;if("onselectstart"in document)At=function(){k(window,"selectstart",oe)},Lt=function(){q(window,"selectstart",oe)};else{var St=Yt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);At=function(){if(St){var i=document.documentElement.style;Ai=i[St],i[St]="none"}},Lt=function(){St&&(document.documentElement.style[St]=Ai,Ai=void 0)}}function Li(){k(window,"dragstart",oe)}function Si(){q(window,"dragstart",oe)}var qt,xi;function Mi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Xt(),qt=i,xi=i.style.outlineStyle,i.style.outlineStyle="none",k(window,"keydown",Xt))}function Xt(){qt&&(qt.style.outlineStyle=xi,qt=void 0,xi=void 0,q(window,"keydown",Xt))}function $s(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Fi(i){var r=i.getBoundingClientRect();return{x:r.width/i.offsetWidth||1,y:r.height/i.offsetHeight||1,boundingClientRect:r}}var qr={__proto__:null,TRANSFORM:Ri,TRANSITION:yt,TRANSITION_END:Js,get:Qs,getStyle:Tt,create:V,remove:Q,empty:jt,toFront:at,toBack:ot,hasClass:yi,addClass:O,removeClass:$,setClass:Ti,getClass:Zt,setOpacity:Ce,testProp:Yt,setTransform:qe,setPosition:te,getPosition:Xe,get disableTextSelection(){return At},get enableTextSelection(){return Lt},disableImageDrag:Li,enableImageDrag:Si,preventOutline:Mi,restoreOutline:Xt,getSizedParentNode:$s,getScale:Fi};function k(i,r,o,u){if(r&&typeof r=="object")for(var p in r)Bi(i,p,r[p],o);else{r=y(r);for(var m=0,C=r.length;m<C;m++)Bi(i,r[m],o,u)}return this}var Ae="_leaflet_events";function q(i,r,o,u){if(arguments.length===1)en(i),delete i[Ae];else if(r&&typeof r=="object")for(var p in r)Ui(i,p,r[p],o);else if(r=y(r),arguments.length===2)en(i,function(E){return X(r,E)!==-1});else for(var m=0,C=r.length;m<C;m++)Ui(i,r[m],o,u);return this}function en(i,r){for(var o in i[Ae]){var u=o.split(/\d/)[0];(!r||r(u))&&Ui(i,u,null,null,o)}}var Di={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bi(i,r,o,u){var p=r+d(o)+(u?"_"+d(u):"");if(i[Ae]&&i[Ae][p])return this;var m=function(E){return o.call(u||i,E||window.event)},C=m;!F.touchNative&&F.pointer&&r.indexOf("touch")===0?m=Ir(i,r,m):F.touch&&r==="dblclick"?m=jr(i,m):"addEventListener"in i?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?i.addEventListener(Di[r]||r,m,F.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(m=function(E){E=E||window.event,ki(i,E)&&C(E)},i.addEventListener(Di[r],m,!1)):i.addEventListener(r,C,!1):i.attachEvent("on"+r,m),i[Ae]=i[Ae]||{},i[Ae][p]=m}function Ui(i,r,o,u,p){p=p||r+d(o)+(u?"_"+d(u):"");var m=i[Ae]&&i[Ae][p];if(!m)return this;!F.touchNative&&F.pointer&&r.indexOf("touch")===0?Nr(i,r,m):F.touch&&r==="dblclick"?Zr(i,m):"removeEventListener"in i?i.removeEventListener(Di[r]||r,m,!1):i.detachEvent("on"+r,m),i[Ae][p]=null}function Je(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Pi(i){return Bi(i,"wheel",Je),this}function xt(i){return k(i,"mousedown touchstart dblclick contextmenu",Je),i._leaflet_disable_click=!0,this}function oe(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Qe(i){return oe(i),Je(i),this}function tn(i){if(i.composedPath)return i.composedPath();for(var r=[],o=i.target;o;)r.push(o),o=o.parentNode;return r}function sn(i,r){if(!r)return new P(i.clientX,i.clientY);var o=Fi(r),u=o.boundingClientRect;return new P((i.clientX-u.left)/o.x-r.clientLeft,(i.clientY-u.top)/o.y-r.clientTop)}var Xr=F.linux&&F.chrome?window.devicePixelRatio:F.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function nn(i){return F.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Xr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function ki(i,r){var o=r.relatedTarget;if(!o)return!0;try{for(;o&&o!==i;)o=o.parentNode}catch{return!1}return o!==i}var Jr={__proto__:null,on:k,off:q,stopPropagation:Je,disableScrollPropagation:Pi,disableClickPropagation:xt,preventDefault:oe,stop:Qe,getPropagationPath:tn,getMousePosition:sn,getWheelDelta:nn,isExternalTarget:ki,addListener:k,removeListener:q},rn=wt.extend({run:function(i,r,o,u){this.stop(),this._el=i,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=Xe(i),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ae(this._animate,this),this._step()},_step:function(i){var r=+new Date-this._startTime,o=this._duration*1e3;r<o?this._runFrame(this._easeOut(r/o),i):(this._runFrame(1),this._complete())},_runFrame:function(i,r){var o=this._startPos.add(this._offset.multiplyBy(i));r&&o._round(),te(this._el,o),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),G=wt.extend({options:{crs:gi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,r){r=R(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(K(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yt&&F.any3d&&!F.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),k(this._proxy,Js,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,r,o){if(r=r===void 0?this._zoom:this._limitZoom(r),i=this._limitCenter(K(i),r,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=n({animate:o.animate},o.zoom),o.pan=n({animate:o.animate,duration:o.duration},o.pan));var u=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,r,o.zoom):this._tryAnimatedPan(i,o.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(i,r,o.pan&&o.pan.noMoveStart),this},setZoom:function(i,r){return this._loaded?this.setView(this.getCenter(),i,{zoom:r}):(this._zoom=i,this)},zoomIn:function(i,r){return i=i||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,r)},zoomOut:function(i,r){return i=i||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,r)},setZoomAround:function(i,r,o){var u=this.getZoomScale(r),p=this.getSize().divideBy(2),m=i instanceof P?i:this.latLngToContainerPoint(i),C=m.subtract(p).multiplyBy(1-1/u),E=this.containerPointToLatLng(p.add(C));return this.setView(E,r,{zoom:o})},_getBoundsCenterZoom:function(i,r){r=r||{},i=i.getBounds?i.getBounds():ee(i);var o=B(r.paddingTopLeft||r.padding||[0,0]),u=B(r.paddingBottomRight||r.padding||[0,0]),p=this.getBoundsZoom(i,!1,o.add(u));if(p=typeof r.maxZoom=="number"?Math.min(r.maxZoom,p):p,p===1/0)return{center:i.getCenter(),zoom:p};var m=u.subtract(o).divideBy(2),C=this.project(i.getSouthWest(),p),E=this.project(i.getNorthEast(),p),_=this.unproject(C.add(E).divideBy(2).add(m),p);return{center:_,zoom:p}},fitBounds:function(i,r){if(i=ee(i),!i.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(i,r);return this.setView(o.center,o.zoom,r)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,r){return this.setView(i,this._zoom,{pan:r})},panBy:function(i,r){if(i=B(i).round(),r=r||{},!i.x&&!i.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new rn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){O(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,o,r.duration||.25,r.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,r,o){if(o=o||{},o.animate===!1||!F.any3d)return this.setView(i,r,o);this._stop();var u=this.project(this.getCenter()),p=this.project(i),m=this.getSize(),C=this._zoom;i=K(i),r=r===void 0?C:r;var E=Math.max(m.x,m.y),_=E*this.getZoomScale(C,r),T=p.distanceTo(u)||1,M=1.42,D=M*M;function N(ie){var li=ie?-1:1,Na=ie?_:E,za=_*_-E*E+li*D*D*T*T,Ha=2*Na*D*T,Zi=za/Ha,Nn=Math.sqrt(Zi*Zi+1)-Zi,Ka=Nn<1e-9?-18:Math.log(Nn);return Ka}function ue(ie){return(Math.exp(ie)-Math.exp(-ie))/2}function ne(ie){return(Math.exp(ie)+Math.exp(-ie))/2}function we(ie){return ue(ie)/ne(ie)}var pe=N(0);function pt(ie){return E*(ne(pe)/ne(pe+M*ie))}function Pa(ie){return E*(ne(pe)*we(pe+M*ie)-ue(pe))/D}function ka(ie){return 1-Math.pow(1-ie,1.5)}var Oa=Date.now(),On=(N(1)-pe)/M,Ia=o.duration?1e3*o.duration:1e3*On*.8;function In(){var ie=(Date.now()-Oa)/Ia,li=ka(ie)*On;ie<=1?(this._flyToFrame=ae(In,this),this._move(this.unproject(u.add(p.subtract(u).multiplyBy(Pa(li)/T)),C),this.getScaleZoom(E/pt(li),C),{flyTo:!0})):this._move(i,r)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),In.call(this),this},flyToBounds:function(i,r){var o=this._getBoundsCenterZoom(i,r);return this.flyTo(o.center,o.zoom,r)},setMaxBounds:function(i){return i=ee(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var r=this.options.minZoom;return this.options.minZoom=i,this._loaded&&r!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var r=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&r!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,r){this._enforcingBounds=!0;var o=this.getCenter(),u=this._limitCenter(o,this._zoom,ee(i));return o.equals(u)||this.panTo(u,r),this._enforcingBounds=!1,this},panInside:function(i,r){r=r||{};var o=B(r.paddingTopLeft||r.padding||[0,0]),u=B(r.paddingBottomRight||r.padding||[0,0]),p=this.project(this.getCenter()),m=this.project(i),C=this.getPixelBounds(),E=de([C.min.add(o),C.max.subtract(u)]),_=E.getSize();if(!E.contains(m)){this._enforcingBounds=!0;var T=m.subtract(E.getCenter()),M=E.extend(m).getSize().subtract(_);p.x+=T.x<0?-M.x:M.x,p.y+=T.y<0?-M.y:M.y,this.panTo(this.unproject(p),r),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=n({animate:!1,pan:!0},i===!0?{animate:!0}:i);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),u=r.divideBy(2).round(),p=o.divideBy(2).round(),m=u.subtract(p);return!m.x&&!m.y?this:(i.animate&&i.pan?this.panBy(m):(i.pan&&this._rawPanBy(m),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=n({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=l(this._handleGeolocationResponse,this),o=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,o,i):navigator.geolocation.getCurrentPosition(r,o,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var r=i.code,o=i.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var r=i.coords.latitude,o=i.coords.longitude,u=new j(r,o),p=u.toBounds(i.coords.accuracy*2),m=this._locateOptions;if(m.setView){var C=this.getBoundsZoom(p);this.setView(u,m.maxZoom?Math.min(C,m.maxZoom):C)}var E={latlng:u,bounds:p,timestamp:i.timestamp};for(var _ in i.coords)typeof i.coords[_]=="number"&&(E[_]=i.coords[_]);this.fire("locationfound",E)}},addHandler:function(i,r){if(!r)return this;var o=this[i]=new r(this);return this._handlers.push(o),this.options[i]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Q(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,r){var o="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),u=V("div",o,r||this._mapPane);return i&&(this._panes[i]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),r=this.unproject(i.getBottomLeft()),o=this.unproject(i.getTopRight());return new ce(r,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,r,o){i=ee(i),o=B(o||[0,0]);var u=this.getZoom()||0,p=this.getMinZoom(),m=this.getMaxZoom(),C=i.getNorthWest(),E=i.getSouthEast(),_=this.getSize().subtract(o),T=de(this.project(E,u),this.project(C,u)).getSize(),M=F.any3d?this.options.zoomSnap:1,D=_.x/T.x,N=_.y/T.y,ue=r?Math.max(D,N):Math.min(D,N);return u=this.getScaleZoom(ue,u),M&&(u=Math.round(u/(M/100))*(M/100),u=r?Math.ceil(u/M)*M:Math.floor(u/M)*M),Math.max(p,Math.min(m,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,r){var o=this._getTopLeftPoint(i,r);return new J(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,r){var o=this.options.crs;return r=r===void 0?this._zoom:r,o.scale(i)/o.scale(r)},getScaleZoom:function(i,r){var o=this.options.crs;r=r===void 0?this._zoom:r;var u=o.zoom(i*o.scale(r));return isNaN(u)?1/0:u},project:function(i,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(K(i),r)},unproject:function(i,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(B(i),r)},layerPointToLatLng:function(i){var r=B(i).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(i){var r=this.project(K(i))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(K(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ee(i))},distance:function(i,r){return this.options.crs.distance(K(i),K(r))},containerPointToLayerPoint:function(i){return B(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return B(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var r=this.containerPointToLayerPoint(B(i));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(K(i)))},mouseEventToContainerPoint:function(i){return sn(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var r=this._container=Qs(i);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");k(r,"scroll",this._onScroll,this),this._containerId=d(r)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&F.any3d,O(i,"leaflet-container"+(F.touch?" leaflet-touch":"")+(F.retina?" leaflet-retina":"")+(F.ielt9?" leaflet-oldie":"")+(F.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Tt(i,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),te(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(O(i.markerPane,"leaflet-zoom-hide"),O(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,r,o){te(this._mapPane,new P(0,0));var u=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var p=this._zoom!==r;this._moveStart(p,o)._move(i,r)._moveEnd(p),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(i,r){return i&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(i,r,o,u){r===void 0&&(r=this._zoom);var p=this._zoom!==r;return this._zoom=r,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),u?o&&o.pinch&&this.fire("zoom",o):((p||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){te(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[d(this._container)]=this;var r=i?q:k;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),F.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=ae(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,r){for(var o=[],u,p=r==="mouseout"||r==="mouseover",m=i.target||i.srcElement,C=!1;m;){if(u=this._targets[d(m)],u&&(r==="click"||r==="preclick")&&this._draggableMoved(u)){C=!0;break}if(u&&u.listens(r,!0)&&(p&&!ki(m,i)||(o.push(u),p))||m===this._container)break;m=m.parentNode}return!o.length&&!C&&!p&&this.listens(r,!0)&&(o=[this]),o},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var r=i.target||i.srcElement;if(!(!this._loaded||r._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(r))){var o=i.type;o==="mousedown"&&Mi(r),this._fireDOMEvent(i,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,r,o){if(i.type==="click"){var u=n({},i);u.type="preclick",this._fireDOMEvent(u,u.type,o)}var p=this._findEventTargets(i,r);if(o){for(var m=[],C=0;C<o.length;C++)o[C].listens(r,!0)&&m.push(o[C]);p=m.concat(p)}if(p.length){r==="contextmenu"&&oe(i);var E=p[0],_={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var T=E.getLatLng&&(!E._radius||E._radius<=10);_.containerPoint=T?this.latLngToContainerPoint(E.getLatLng()):this.mouseEventToContainerPoint(i),_.layerPoint=this.containerPointToLayerPoint(_.containerPoint),_.latlng=T?E.getLatLng():this.layerPointToLatLng(_.layerPoint)}for(C=0;C<p.length;C++)if(p[C].fire(r,_,!0),_.originalEvent._stopped||p[C].options.bubblingMouseEvents===!1&&X(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,r=this._handlers.length;i<r;i++)this._handlers[i].disable()},whenReady:function(i,r){return this._loaded?i.call(r||this,{target:this}):this.on("load",i,r),this},_getMapPanePos:function(){return Xe(this._mapPane)||new P(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,r){var o=i&&r!==void 0?this._getNewPixelOrigin(i,r):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,r){var o=this.getSize()._divideBy(2);return this.project(i,r)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,r,o){var u=this._getNewPixelOrigin(o,r);return this.project(i,r)._subtract(u)},_latLngBoundsToNewLayerBounds:function(i,r,o){var u=this._getNewPixelOrigin(o,r);return de([this.project(i.getSouthWest(),r)._subtract(u),this.project(i.getNorthWest(),r)._subtract(u),this.project(i.getSouthEast(),r)._subtract(u),this.project(i.getNorthEast(),r)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,r,o){if(!o)return i;var u=this.project(i,r),p=this.getSize().divideBy(2),m=new J(u.subtract(p),u.add(p)),C=this._getBoundsOffset(m,o,r);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?i:this.unproject(u.add(C),r)},_limitOffset:function(i,r){if(!r)return i;var o=this.getPixelBounds(),u=new J(o.min.add(i),o.max.add(i));return i.add(this._getBoundsOffset(u,r))},_getBoundsOffset:function(i,r,o){var u=de(this.project(r.getNorthEast(),o),this.project(r.getSouthWest(),o)),p=u.min.subtract(i.min),m=u.max.subtract(i.max),C=this._rebound(p.x,-m.x),E=this._rebound(p.y,-m.y);return new P(C,E)},_rebound:function(i,r){return i+r>0?Math.round(i-r)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(r))},_limitZoom:function(i){var r=this.getMinZoom(),o=this.getMaxZoom(),u=F.any3d?this.options.zoomSnap:1;return u&&(i=Math.round(i/u)*u),Math.max(r,Math.min(o,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,r){var o=this._getCenterOffset(i)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,r),!0)},_createAnimProxy:function(){var i=this._proxy=V("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(r){var o=Ri,u=this._proxy.style[o];qe(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),u===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),r=this.getZoom();qe(this._proxy,this.project(i,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,r,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(r),p=this._getCenterOffset(i)._divideBy(1-1/u);return o.animate!==!0&&!this.getSize().contains(p)?!1:(ae(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(i,r,!0)},this),!0)},_animateZoom:function(i,r,o,u){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=r,O(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:r,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qr(i,r){return new G(i,r)}var _e=ve.extend({options:{position:"topright"},initialize:function(i){R(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var r=this._map;return r&&r.removeControl(this),this.options.position=i,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var r=this._container=this.onAdd(i),o=this.getPosition(),u=i._controlCorners[o];return O(r,"leaflet-control"),o.indexOf("bottom")!==-1?u.insertBefore(r,u.firstChild):u.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Mt=function(i){return new _e(i)};G.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},r="leaflet-",o=this._controlContainer=V("div",r+"control-container",this._container);function u(p,m){var C=r+p+" "+r+m;i[p+m]=V("div",C,o)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Q(this._controlCorners[i]);Q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=_e.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,r,o,u){return o<u?-1:u<o?1:0}},initialize:function(i,r,o){R(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var u in i)this._addLayer(i[u],u);for(u in r)this._addLayer(r[u],u,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return _e.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,r){return this._addLayer(i,r),this._map?this._update():this},addOverlay:function(i,r){return this._addLayer(i,r,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var r=this._getLayer(d(i));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){O(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(O(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):$(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",r=this._container=V("div",i),o=this.options.collapsed;r.setAttribute("aria-haspopup",!0),xt(r),Pi(r);var u=this._section=V("section",i+"-list");o&&(this._map.on("click",this.collapse,this),k(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=V("a",i+"-toggle",r);p.href="#",p.title="Layers",p.setAttribute("role","button"),k(p,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){oe(m),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=V("div",i+"-base",u),this._separator=V("div",i+"-separator",u),this._overlaysList=V("div",i+"-overlays",u),r.appendChild(u)},_getLayer:function(i){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&d(this._layers[r].layer)===i)return this._layers[r]},_addLayer:function(i,r,o){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:r,overlay:o}),this.options.sortLayers&&this._layers.sort(l(function(u,p){return this.options.sortFunction(u.layer,p.layer,u.name,p.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;jt(this._baseLayersList),jt(this._overlaysList),this._layerControlInputs=[];var i,r,o,u,p=0;for(o=0;o<this._layers.length;o++)u=this._layers[o],this._addItem(u),r=r||u.overlay,i=i||!u.overlay,p+=u.overlay?0:1;return this.options.hideSingleBase&&(i=i&&p>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=r&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var r=this._getLayer(d(i.target)),o=r.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;o&&this._map.fire(o,r)},_createRadioElement:function(i,r){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(r?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=o,u.firstChild},_addItem:function(i){var r=document.createElement("label"),o=this._map.hasLayer(i.layer),u;i.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=o):u=this._createRadioElement("leaflet-base-layers_"+d(this),o),this._layerControlInputs.push(u),u.layerId=d(i.layer),k(u,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+i.name;var m=document.createElement("span");r.appendChild(m),m.appendChild(u),m.appendChild(p);var C=i.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,r,o,u=[],p=[];this._handlingClick=!0;for(var m=i.length-1;m>=0;m--)r=i[m],o=this._getLayer(r.layerId).layer,r.checked?u.push(o):r.checked||p.push(o);for(m=0;m<p.length;m++)this._map.hasLayer(p[m])&&this._map.removeLayer(p[m]);for(m=0;m<u.length;m++)this._map.hasLayer(u[m])||this._map.addLayer(u[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,r,o,u=this._map.getZoom(),p=i.length-1;p>=0;p--)r=i[p],o=this._getLayer(r.layerId).layer,r.disabled=o.options.minZoom!==void 0&&u<o.options.minZoom||o.options.maxZoom!==void 0&&u>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,k(i,"click",oe),this.expand();var r=this;setTimeout(function(){q(i,"click",oe),r._preventClick=!1})}}),$r=function(i,r,o){return new an(i,r,o)},Oi=_e.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var r="leaflet-control-zoom",o=V("div",r+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,r+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,r+"-out",o,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,r,o,u,p){var m=V("a",o,u);return m.innerHTML=i,m.href="#",m.title=r,m.setAttribute("role","button"),m.setAttribute("aria-label",r),xt(m),k(m,"click",Qe),k(m,"click",p,this),k(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var i=this._map,r="leaflet-disabled";$(this._zoomInButton,r),$(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(O(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(O(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});G.mergeOptions({zoomControl:!0}),G.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var ea=function(i){return new Oi(i)},on=_e.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var r="leaflet-control-scale",o=V("div",r),u=this.options;return this._addScales(u,r+"-line",o),i.on(u.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),o},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,r,o){i.metric&&(this._mScale=V("div",r,o)),i.imperial&&(this._iScale=V("div",r,o))},_update:function(){var i=this._map,r=i.getSize().y/2,o=i.distance(i.containerPointToLatLng([0,r]),i.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(o)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var r=this._getRoundNum(i),o=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,o,r/i)},_updateImperial:function(i){var r=i*3.2808399,o,u,p;r>5280?(o=r/5280,u=this._getRoundNum(o),this._updateScale(this._iScale,u+" mi",u/o)):(p=this._getRoundNum(r),this._updateScale(this._iScale,p+" ft",p/r))},_updateScale:function(i,r,o){i.style.width=Math.round(this.options.maxWidth*o)+"px",i.innerHTML=r},_getRoundNum:function(i){var r=Math.pow(10,(Math.floor(i)+"").length-1),o=i/r;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,r*o}}),ta=function(i){return new on(i)},ia='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ii=_e.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(F.inlineSvg?ia+" ":"")+"Leaflet</a>"},initialize:function(i){R(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=V("div","leaflet-control-attribution"),xt(this._container);for(var r in i._layers)i._layers[r].getAttribution&&this.addAttribution(i._layers[r].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var r in this._attributions)this._attributions[r]&&i.push(r);var o=[];this.options.prefix&&o.push(this.options.prefix),i.length&&o.push(i.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});G.mergeOptions({attributionControl:!0}),G.addInitHook(function(){this.options.attributionControl&&new Ii().addTo(this)});var sa=function(i){return new Ii(i)};_e.Layers=an,_e.Zoom=Oi,_e.Scale=on,_e.Attribution=Ii,Mt.layers=$r,Mt.zoom=ea,Mt.scale=ta,Mt.attribution=sa;var Le=ve.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Le.addTo=function(i,r){return i.addHandler(r,this),this};var na={Events:me},ln=F.touch?"touchstart mousedown":"mousedown",Ne=wt.extend({options:{clickTolerance:3},initialize:function(i,r,o,u){R(this,u),this._element=i,this._dragStartTarget=r||i,this._preventOutline=o},enable:function(){this._enabled||(k(this._dragStartTarget,ln,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ne._dragging===this&&this.finishDrag(!0),q(this._dragStartTarget,ln,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!yi(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ne._dragging===this&&this.finishDrag();return}if(!(Ne._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ne._dragging=this,this._preventOutline&&Mi(this._element),Li(),At(),!this._moving)){this.fire("down");var r=i.touches?i.touches[0]:i,o=$s(this._element);this._startPoint=new P(r.clientX,r.clientY),this._startPos=Xe(this._element),this._parentScale=Fi(o);var u=i.type==="mousedown";k(document,u?"mousemove":"touchmove",this._onMove,this),k(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var r=i.touches&&i.touches.length===1?i.touches[0]:i,o=new P(r.clientX,r.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,oe(i),this._moved||(this.fire("dragstart"),this._moved=!0,O(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),O(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),te(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){$(document.body,"leaflet-dragging"),this._lastTarget&&($(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),q(document,"mousemove touchmove",this._onMove,this),q(document,"mouseup touchend touchcancel",this._onUp,this),Si(),Lt();var r=this._moved&&this._moving;this._moving=!1,Ne._dragging=!1,r&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function hn(i,r,o){var u,p=[1,4,2,8],m,C,E,_,T,M,D,N;for(m=0,M=i.length;m<M;m++)i[m]._code=$e(i[m],r);for(E=0;E<4;E++){for(D=p[E],u=[],m=0,M=i.length,C=M-1;m<M;C=m++)_=i[m],T=i[C],_._code&D?T._code&D||(N=Jt(T,_,D,r,o),N._code=$e(N,r),u.push(N)):(T._code&D&&(N=Jt(T,_,D,r,o),N._code=$e(N,r),u.push(N)),u.push(_));i=u}return i}function un(i,r){var o,u,p,m,C,E,_,T,M;if(!i||i.length===0)throw new Error("latlngs not passed");Ee(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var D=K([0,0]),N=ee(i),ue=N.getNorthWest().distanceTo(N.getSouthWest())*N.getNorthEast().distanceTo(N.getNorthWest());ue<1700&&(D=Ni(i));var ne=i.length,we=[];for(o=0;o<ne;o++){var pe=K(i[o]);we.push(r.project(K([pe.lat-D.lat,pe.lng-D.lng])))}for(E=_=T=0,o=0,u=ne-1;o<ne;u=o++)p=we[o],m=we[u],C=p.y*m.x-m.y*p.x,_+=(p.x+m.x)*C,T+=(p.y+m.y)*C,E+=C*3;E===0?M=we[0]:M=[_/E,T/E];var pt=r.unproject(B(M));return K([pt.lat+D.lat,pt.lng+D.lng])}function Ni(i){for(var r=0,o=0,u=0,p=0;p<i.length;p++){var m=K(i[p]);r+=m.lat,o+=m.lng,u++}return K([r/u,o/u])}var ra={__proto__:null,clipPolygon:hn,polygonCenter:un,centroid:Ni};function dn(i,r){if(!r||!i.length)return i.slice();var o=r*r;return i=la(i,o),i=oa(i,o),i}function cn(i,r,o){return Math.sqrt(Ft(i,r,o,!0))}function aa(i,r,o){return Ft(i,r,o)}function oa(i,r){var o=i.length,u=typeof Uint8Array<"u"?Uint8Array:Array,p=new u(o);p[0]=p[o-1]=1,zi(i,p,r,0,o-1);var m,C=[];for(m=0;m<o;m++)p[m]&&C.push(i[m]);return C}function zi(i,r,o,u,p){var m=0,C,E,_;for(E=u+1;E<=p-1;E++)_=Ft(i[E],i[u],i[p],!0),_>m&&(C=E,m=_);m>o&&(r[C]=1,zi(i,r,o,u,C),zi(i,r,o,C,p))}function la(i,r){for(var o=[i[0]],u=1,p=0,m=i.length;u<m;u++)ha(i[u],i[p])>r&&(o.push(i[u]),p=u);return p<m-1&&o.push(i[m-1]),o}var pn;function fn(i,r,o,u,p){var m=u?pn:$e(i,o),C=$e(r,o),E,_,T;for(pn=C;;){if(!(m|C))return[i,r];if(m&C)return!1;E=m||C,_=Jt(i,r,E,o,p),T=$e(_,o),E===m?(i=_,m=T):(r=_,C=T)}}function Jt(i,r,o,u,p){var m=r.x-i.x,C=r.y-i.y,E=u.min,_=u.max,T,M;return o&8?(T=i.x+m*(_.y-i.y)/C,M=_.y):o&4?(T=i.x+m*(E.y-i.y)/C,M=E.y):o&2?(T=_.x,M=i.y+C*(_.x-i.x)/m):o&1&&(T=E.x,M=i.y+C*(E.x-i.x)/m),new P(T,M,p)}function $e(i,r){var o=0;return i.x<r.min.x?o|=1:i.x>r.max.x&&(o|=2),i.y<r.min.y?o|=4:i.y>r.max.y&&(o|=8),o}function ha(i,r){var o=r.x-i.x,u=r.y-i.y;return o*o+u*u}function Ft(i,r,o,u){var p=r.x,m=r.y,C=o.x-p,E=o.y-m,_=C*C+E*E,T;return _>0&&(T=((i.x-p)*C+(i.y-m)*E)/_,T>1?(p=o.x,m=o.y):T>0&&(p+=C*T,m+=E*T)),C=i.x-p,E=i.y-m,u?C*C+E*E:new P(p,m)}function Ee(i){return!H(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function mn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ee(i)}function gn(i,r){var o,u,p,m,C,E,_,T;if(!i||i.length===0)throw new Error("latlngs not passed");Ee(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var M=K([0,0]),D=ee(i),N=D.getNorthWest().distanceTo(D.getSouthWest())*D.getNorthEast().distanceTo(D.getNorthWest());N<1700&&(M=Ni(i));var ue=i.length,ne=[];for(o=0;o<ue;o++){var we=K(i[o]);ne.push(r.project(K([we.lat-M.lat,we.lng-M.lng])))}for(o=0,u=0;o<ue-1;o++)u+=ne[o].distanceTo(ne[o+1])/2;if(u===0)T=ne[0];else for(o=0,m=0;o<ue-1;o++)if(C=ne[o],E=ne[o+1],p=C.distanceTo(E),m+=p,m>u){_=(m-u)/p,T=[E.x-_*(E.x-C.x),E.y-_*(E.y-C.y)];break}var pe=r.unproject(B(T));return K([pe.lat+M.lat,pe.lng+M.lng])}var ua={__proto__:null,simplify:dn,pointToSegmentDistance:cn,closestPointOnSegment:aa,clipSegment:fn,_getEdgeIntersection:Jt,_getBitCode:$e,_sqClosestPointOnSegment:Ft,isFlat:Ee,_flat:mn,polylineCenter:gn},Hi={project:function(i){return new P(i.lng,i.lat)},unproject:function(i){return new j(i.y,i.x)},bounds:new J([-180,-90],[180,90])},Ki={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var r=Math.PI/180,o=this.R,u=i.lat*r,p=this.R_MINOR/o,m=Math.sqrt(1-p*p),C=m*Math.sin(u),E=Math.tan(Math.PI/4-u/2)/Math.pow((1-C)/(1+C),m/2);return u=-o*Math.log(Math.max(E,1e-10)),new P(i.lng*r*o,u)},unproject:function(i){for(var r=180/Math.PI,o=this.R,u=this.R_MINOR/o,p=Math.sqrt(1-u*u),m=Math.exp(-i.y/o),C=Math.PI/2-2*Math.atan(m),E=0,_=.1,T;E<15&&Math.abs(_)>1e-7;E++)T=p*Math.sin(C),T=Math.pow((1-T)/(1+T),p/2),_=Math.PI/2-2*Math.atan(m*T)-C,C+=_;return new j(C*r,i.x*r/o)}},da={__proto__:null,LonLat:Hi,Mercator:Ki,SphericalMercator:fi},ca=n({},Ie,{code:"EPSG:3395",projection:Ki,transformation:function(){var i=.5/(Math.PI*Ki.R);return _t(i,.5,-i,.5)}()}),bn=n({},Ie,{code:"EPSG:4326",projection:Hi,transformation:_t(1/180,1,-1/180,.5)}),pa=n({},Fe,{projection:Hi,transformation:_t(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,r){var o=r.lng-i.lng,u=r.lat-i.lat;return Math.sqrt(o*o+u*u)},infinite:!0});Fe.Earth=Ie,Fe.EPSG3395=ca,Fe.EPSG3857=gi,Fe.EPSG900913=Cr,Fe.EPSG4326=bn,Fe.Simple=pa;var Re=wt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[d(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[d(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var r=i.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var o=this.getEvents();r.on(o,this),this.once("remove",function(){r.off(o,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});G.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var r=d(i);return this._layers[r]?this:(this._layers[r]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var r=d(i);return this._layers[r]?(this._loaded&&i.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return d(i)in this._layers},eachLayer:function(i,r){for(var o in this._layers)i.call(r,this._layers[o]);return this},_addLayers:function(i){i=i?H(i)?i:[i]:[];for(var r=0,o=i.length;r<o;r++)this.addLayer(i[r])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[d(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var r=d(i);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,r=-1/0,o=this._getZoomSpan();for(var u in this._zoomBoundLayers){var p=this._zoomBoundLayers[u].options;i=p.minZoom===void 0?i:Math.min(i,p.minZoom),r=p.maxZoom===void 0?r:Math.max(r,p.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=i===1/0?void 0:i,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lt=Re.extend({initialize:function(i,r){R(this,r),this._layers={};var o,u;if(i)for(o=0,u=i.length;o<u;o++)this.addLayer(i[o])},addLayer:function(i){var r=this.getLayerId(i);return this._layers[r]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var r=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(i){var r=typeof i=="number"?i:this.getLayerId(i);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var r=Array.prototype.slice.call(arguments,1),o,u;for(o in this._layers)u=this._layers[o],u[i]&&u[i].apply(u,r);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,r){for(var o in this._layers)i.call(r,this._layers[o]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return d(i)}}),fa=function(i,r){return new lt(i,r)},De=lt.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),lt.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),lt.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ce;for(var r in this._layers){var o=this._layers[r];i.extend(o.getBounds?o.getBounds():o.getLatLng())}return i}}),ma=function(i,r){return new De(i,r)},ht=ve.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){R(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,r){var o=this._getIconUrl(i);if(!o){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(o,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(u,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(i,r){var o=this.options,u=o[r+"Size"];typeof u=="number"&&(u=[u,u]);var p=B(u),m=B(r==="shadow"&&o.shadowAnchor||o.iconAnchor||p&&p.divideBy(2,!0));i.className="leaflet-marker-"+r+" "+(o.className||""),m&&(i.style.marginLeft=-m.x+"px",i.style.marginTop=-m.y+"px"),p&&(i.style.width=p.x+"px",i.style.height=p.y+"px")},_createImg:function(i,r){return r=r||document.createElement("img"),r.src=i,r},_getIconUrl:function(i){return F.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ga(i){return new ht(i)}var Dt=ht.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Dt.imagePath!="string"&&(Dt.imagePath=this._detectIconPath()),(this.options.imagePath||Dt.imagePath)+ht.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var r=function(o,u,p){var m=u.exec(o);return m&&m[p]};return i=r(i,/^url\((['"])?(.+)\1\)$/,2),i&&r(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=V("div","leaflet-default-icon-path",document.body),r=Tt(i,"background-image")||Tt(i,"backgroundImage");if(document.body.removeChild(i),r=this._stripUrl(r),r)return r;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),vn=Le.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ne(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),O(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var r=this._marker,o=r._map,u=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,m=Xe(r._icon),C=o.getPixelBounds(),E=o.getPixelOrigin(),_=de(C.min._subtract(E).add(p),C.max._subtract(E).subtract(p));if(!_.contains(m)){var T=B((Math.max(_.max.x,m.x)-_.max.x)/(C.max.x-_.max.x)-(Math.min(_.min.x,m.x)-_.min.x)/(C.min.x-_.min.x),(Math.max(_.max.y,m.y)-_.max.y)/(C.max.y-_.max.y)-(Math.min(_.min.y,m.y)-_.min.y)/(C.min.y-_.min.y)).multiplyBy(u);o.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),te(r._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=ae(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=ae(this._adjustPan.bind(this,i)))},_onDrag:function(i){var r=this._marker,o=r._shadow,u=Xe(r._icon),p=r._map.layerPointToLatLng(u);o&&te(o,u),r._latlng=p,i.latlng=p,i.oldLatLng=this._oldLatLng,r.fire("move",i).fire("drag",i)},_onDragEnd:function(i){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Qt=Re.extend({options:{icon:new Dt,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,r){R(this,r),this._latlng=K(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var r=this._latlng;return this._latlng=K(i),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=i.icon.createIcon(this._icon),u=!1;o!==this._icon&&(this._icon&&this._removeIcon(),u=!0,i.title&&(o.title=i.title),o.tagName==="IMG"&&(o.alt=i.alt||"")),O(o,r),i.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&k(o,"focus",this._panOnFocus,this);var p=i.icon.createShadow(this._shadow),m=!1;p!==this._shadow&&(this._removeShadow(),m=!0),p&&(O(p,r),p.alt=""),this._shadow=p,i.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&m&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&q(this._icon,"focus",this._panOnFocus,this),Q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Q(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&te(this._icon,i),this._shadow&&te(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var r=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(O(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vn)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vn(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ce(this._icon,i),this._shadow&&Ce(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var r=this.options.icon.options,o=r.iconSize?B(r.iconSize):B(0,0),u=r.iconAnchor?B(r.iconAnchor):B(0,0);i.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:o.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ba(i,r){return new Qt(i,r)}var ze=Re.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return R(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$t=ze.extend({options:{fill:!0,radius:10},initialize:function(i,r){R(this,r),this._latlng=K(i),this._radius=this.options.radius},setLatLng:function(i){var r=this._latlng;return this._latlng=K(i),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var r=i&&i.radius||this._radius;return ze.prototype.setStyle.call(this,i),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,r=this._radiusY||i,o=this._clickTolerance(),u=[i+o,r+o];this._pxBounds=new J(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function va(i,r){return new $t(i,r)}var Gi=$t.extend({initialize:function(i,r,o){if(typeof r=="number"&&(r=n({},o,{radius:r})),R(this,r),this._latlng=K(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:ze.prototype.setStyle,_project:function(){var i=this._latlng.lng,r=this._latlng.lat,o=this._map,u=o.options.crs;if(u.distance===Ie.distance){var p=Math.PI/180,m=this._mRadius/Ie.R/p,C=o.project([r+m,i]),E=o.project([r-m,i]),_=C.add(E).divideBy(2),T=o.unproject(_).lat,M=Math.acos((Math.cos(m*p)-Math.sin(r*p)*Math.sin(T*p))/(Math.cos(r*p)*Math.cos(T*p)))/p;(isNaN(M)||M===0)&&(M=m/Math.cos(Math.PI/180*r)),this._point=_.subtract(o.getPixelOrigin()),this._radius=isNaN(M)?0:_.x-o.project([T,i-M]).x,this._radiusY=_.y-C.y}else{var D=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(D).x}this._updateBounds()}});function Ca(i,r,o){return new Gi(i,r,o)}var Be=ze.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,r){R(this,r),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var r=1/0,o=null,u=Ft,p,m,C=0,E=this._parts.length;C<E;C++)for(var _=this._parts[C],T=1,M=_.length;T<M;T++){p=_[T-1],m=_[T];var D=u(i,p,m,!0);D<r&&(r=D,o=u(i,p,m))}return o&&(o.distance=Math.sqrt(r)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,r){return r=r||this._defaultShape(),i=K(i),r.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ce,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Ee(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var r=[],o=Ee(i),u=0,p=i.length;u<p;u++)o?(r[u]=K(i[u]),this._bounds.extend(r[u])):r[u]=this._convertLatLngs(i[u]);return r},_project:function(){var i=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),r=new P(i,i);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(i,r,o){var u=i[0]instanceof j,p=i.length,m,C;if(u){for(C=[],m=0;m<p;m++)C[m]=this._map.latLngToLayerPoint(i[m]),o.extend(C[m]);r.push(C)}else for(m=0;m<p;m++)this._projectLatlngs(i[m],r,o)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,o,u,p,m,C,E,_;for(o=0,p=0,m=this._rings.length;o<m;o++)for(_=this._rings[o],u=0,C=_.length;u<C-1;u++)E=fn(_[u],_[u+1],i,u,!0),E&&(r[p]=r[p]||[],r[p].push(E[0]),(E[1]!==_[u+1]||u===C-2)&&(r[p].push(E[1]),p++))}},_simplifyPoints:function(){for(var i=this._parts,r=this.options.smoothFactor,o=0,u=i.length;o<u;o++)i[o]=dn(i[o],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,r){var o,u,p,m,C,E,_=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(o=0,m=this._parts.length;o<m;o++)for(E=this._parts[o],u=0,C=E.length,p=C-1;u<C;p=u++)if(!(!r&&u===0)&&cn(i,E[p],E[u])<=_)return!0;return!1}});function Ea(i,r){return new Be(i,r)}Be._flat=mn;var ut=Be.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return un(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var r=Be.prototype._convertLatLngs.call(this,i),o=r.length;return o>=2&&r[0]instanceof j&&r[0].equals(r[o-1])&&r.pop(),r},_setLatLngs:function(i){Be.prototype._setLatLngs.call(this,i),Ee(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ee(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,r=this.options.weight,o=new P(r,r);if(i=new J(i.min.subtract(o),i.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,p=this._rings.length,m;u<p;u++)m=hn(this._rings[u],i,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var r=!1,o,u,p,m,C,E,_,T;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(m=0,_=this._parts.length;m<_;m++)for(o=this._parts[m],C=0,T=o.length,E=T-1;C<T;E=C++)u=o[C],p=o[E],u.y>i.y!=p.y>i.y&&i.x<(p.x-u.x)*(i.y-u.y)/(p.y-u.y)+u.x&&(r=!r);return r||Be.prototype._containsPoint.call(this,i,!0)}});function wa(i,r){return new ut(i,r)}var Ue=De.extend({initialize:function(i,r){R(this,r),this._layers={},i&&this.addData(i)},addData:function(i){var r=H(i)?i:i.features,o,u,p;if(r){for(o=0,u=r.length;o<u;o++)p=r[o],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var m=this.options;if(m.filter&&!m.filter(i))return this;var C=ei(i,m);return C?(C.feature=si(i),C.defaultOptions=C.options,this.resetStyle(C),m.onEachFeature&&m.onEachFeature(i,C),this.addLayer(C)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=n({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(r){this._setLayerStyle(r,i)},this)},_setLayerStyle:function(i,r){i.setStyle&&(typeof r=="function"&&(r=r(i.feature)),i.setStyle(r))}});function ei(i,r){var o=i.type==="Feature"?i.geometry:i,u=o?o.coordinates:null,p=[],m=r&&r.pointToLayer,C=r&&r.coordsToLatLng||Vi,E,_,T,M;if(!u&&!o)return null;switch(o.type){case"Point":return E=C(u),Cn(m,i,E,r);case"MultiPoint":for(T=0,M=u.length;T<M;T++)E=C(u[T]),p.push(Cn(m,i,E,r));return new De(p);case"LineString":case"MultiLineString":return _=ti(u,o.type==="LineString"?0:1,C),new Be(_,r);case"Polygon":case"MultiPolygon":return _=ti(u,o.type==="Polygon"?1:2,C),new ut(_,r);case"GeometryCollection":for(T=0,M=o.geometries.length;T<M;T++){var D=ei({geometry:o.geometries[T],type:"Feature",properties:i.properties},r);D&&p.push(D)}return new De(p);case"FeatureCollection":for(T=0,M=o.features.length;T<M;T++){var N=ei(o.features[T],r);N&&p.push(N)}return new De(p);default:throw new Error("Invalid GeoJSON object.")}}function Cn(i,r,o,u){return i?i(r,o):new Qt(o,u&&u.markersInheritOptions&&u)}function Vi(i){return new j(i[1],i[0],i[2])}function ti(i,r,o){for(var u=[],p=0,m=i.length,C;p<m;p++)C=r?ti(i[p],r-1,o):(o||Vi)(i[p]),u.push(C);return u}function Wi(i,r){return i=K(i),i.alt!==void 0?[v(i.lng,r),v(i.lat,r),v(i.alt,r)]:[v(i.lng,r),v(i.lat,r)]}function ii(i,r,o,u){for(var p=[],m=0,C=i.length;m<C;m++)p.push(r?ii(i[m],Ee(i[m])?0:r-1,o,u):Wi(i[m],u));return!r&&o&&p.length>0&&p.push(p[0].slice()),p}function dt(i,r){return i.feature?n({},i.feature,{geometry:r}):si(r)}function si(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var ji={toGeoJSON:function(i){return dt(this,{type:"Point",coordinates:Wi(this.getLatLng(),i)})}};Qt.include(ji),Gi.include(ji),$t.include(ji),Be.include({toGeoJSON:function(i){var r=!Ee(this._latlngs),o=ii(this._latlngs,r?1:0,!1,i);return dt(this,{type:(r?"Multi":"")+"LineString",coordinates:o})}}),ut.include({toGeoJSON:function(i){var r=!Ee(this._latlngs),o=r&&!Ee(this._latlngs[0]),u=ii(this._latlngs,o?2:r?1:0,!0,i);return r||(u=[u]),dt(this,{type:(o?"Multi":"")+"Polygon",coordinates:u})}}),lt.include({toMultiPoint:function(i){var r=[];return this.eachLayer(function(o){r.push(o.toGeoJSON(i).geometry.coordinates)}),dt(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(i){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(i);var o=r==="GeometryCollection",u=[];return this.eachLayer(function(p){if(p.toGeoJSON){var m=p.toGeoJSON(i);if(o)u.push(m.geometry);else{var C=si(m);C.type==="FeatureCollection"?u.push.apply(u,C.features):u.push(C)}}}),o?dt(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function En(i,r){return new Ue(i,r)}var _a=En,ni=Re.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,r,o){this._url=i,this._bounds=ee(r),R(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(O(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&at(this._image),this},bringToBack:function(){return this._map&&ot(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ee(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",r=this._image=i?this._url:V("img");if(O(r,"leaflet-image-layer"),this._zoomAnimated&&O(r,"leaflet-zoom-animated"),this.options.className&&O(r,this.options.className),r.onselectstart=b,r.onmousemove=b,r.onload=l(this.fire,this,"load"),r.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(i){var r=this._map.getZoomScale(i.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;qe(this._image,o,r)},_reset:function(){var i=this._image,r=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=r.getSize();te(i,r.min),i.style.width=o.x+"px",i.style.height=o.y+"px"},_updateOpacity:function(){Ce(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Ra=function(i,r,o){return new ni(i,r,o)},wn=ni.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",r=this._image=i?this._url:V("video");if(O(r,"leaflet-image-layer"),this._zoomAnimated&&O(r,"leaflet-zoom-animated"),this.options.className&&O(r,this.options.className),r.onselectstart=b,r.onmousemove=b,r.onloadeddata=l(this.fire,this,"load"),i){for(var o=r.getElementsByTagName("source"),u=[],p=0;p<o.length;p++)u.push(o[p].src);this._url=o.length>0?u:[r.src];return}H(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var C=V("source");C.src=this._url[m],r.appendChild(C)}}});function ya(i,r,o){return new wn(i,r,o)}var _n=ni.extend({_initImage:function(){var i=this._image=this._url;O(i,"leaflet-image-layer"),this._zoomAnimated&&O(i,"leaflet-zoom-animated"),this.options.className&&O(i,this.options.className),i.onselectstart=b,i.onmousemove=b}});function Ta(i,r,o){return new _n(i,r,o)}var Se=Re.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,r){i&&(i instanceof j||H(i))?(this._latlng=K(i),R(this,r)):(R(this,i),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ce(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ce(this._container,1),this.bringToFront(),this.options.interactive&&(O(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ce(this._container,0),this._removeTimeout=setTimeout(l(Q,void 0,this._container),200)):Q(this._container),this.options.interactive&&($(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=K(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&at(this._container),this},bringToBack:function(){return this._map&&ot(this._container),this},_prepareOpen:function(i){var r=this._source;if(!r._map)return!1;if(r instanceof De){r=null;var o=this._source._layers;for(var u in o)if(o[u]._map){r=o[u];break}if(!r)return!1;this._source=r}if(!i)if(r.getCenter)i=r.getCenter();else if(r.getLatLng)i=r.getLatLng();else if(r.getBounds)i=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")i.innerHTML=r;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),r=B(this.options.offset),o=this._getAnchor();this._zoomAnimated?te(this._container,i.add(o)):r=r.add(i).add(o);var u=this._containerBottom=-r.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=u+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});G.include({_initOverlay:function(i,r,o,u){var p=r;return p instanceof i||(p=new i(u).setContent(r)),o&&p.setLatLng(o),p}}),Re.include({_initOverlay:function(i,r,o,u){var p=o;return p instanceof i?(R(p,u),p._source=this):(p=r&&!u?r:new i(u,this),p.setContent(o)),p}});var ri=Se.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Se.prototype.openOn.call(this,i)},onAdd:function(i){Se.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ze||this._source.on("preclick",Je))},onRemove:function(i){Se.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ze||this._source.off("preclick",Je))},getEvents:function(){var i=Se.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",r=this._container=V("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=V("div",i+"-content-wrapper",r);if(this._contentNode=V("div",i+"-content",o),xt(r),Pi(this._contentNode),k(r,"contextmenu",Je),this._tipContainer=V("div",i+"-tip-container",r),this._tip=V("div",i+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=V("a",i+"-close-button",r);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',k(u,"click",function(p){oe(p),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,r=i.style;r.width="",r.whiteSpace="nowrap";var o=i.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),r.width=o+1+"px",r.whiteSpace="",r.height="";var u=i.offsetHeight,p=this.options.maxHeight,m="leaflet-popup-scrolled";p&&u>p?(r.height=p+"px",O(i,m)):$(i,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var r=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),o=this._getAnchor();te(this._container,r.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,r=parseInt(Tt(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+r,u=this._containerWidth,p=new P(this._containerLeft,-o-this._containerBottom);p._add(Xe(this._container));var m=i.layerPointToContainerPoint(p),C=B(this.options.autoPanPadding),E=B(this.options.autoPanPaddingTopLeft||C),_=B(this.options.autoPanPaddingBottomRight||C),T=i.getSize(),M=0,D=0;m.x+u+_.x>T.x&&(M=m.x+u-T.x+_.x),m.x-M-E.x<0&&(M=m.x-E.x),m.y+o+_.y>T.y&&(D=m.y+o-T.y+_.y),m.y-D-E.y<0&&(D=m.y-E.y),(M||D)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([M,D]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Aa=function(i,r){return new ri(i,r)};G.mergeOptions({closePopupOnClick:!0}),G.include({openPopup:function(i,r,o){return this._initOverlay(ri,i,r,o).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Re.include({bindPopup:function(i,r){return this._popup=this._initOverlay(ri,this._popup,i,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof De||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Qe(i);var r=i.layer||i.target;if(this._popup._source===r&&!(r instanceof ze)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=r,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ai=Se.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Se.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Se.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Se.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",r=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=V("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var r,o,u=this._map,p=this._container,m=u.latLngToContainerPoint(u.getCenter()),C=u.layerPointToContainerPoint(i),E=this.options.direction,_=p.offsetWidth,T=p.offsetHeight,M=B(this.options.offset),D=this._getAnchor();E==="top"?(r=_/2,o=T):E==="bottom"?(r=_/2,o=0):E==="center"?(r=_/2,o=T/2):E==="right"?(r=0,o=T/2):E==="left"?(r=_,o=T/2):C.x<m.x?(E="right",r=0,o=T/2):(E="left",r=_+(M.x+D.x)*2,o=T/2),i=i.subtract(B(r,o,!0)).add(M).add(D),$(p,"leaflet-tooltip-right"),$(p,"leaflet-tooltip-left"),$(p,"leaflet-tooltip-top"),$(p,"leaflet-tooltip-bottom"),O(p,"leaflet-tooltip-"+E),te(p,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ce(this._container,i)},_animateZoom:function(i){var r=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(r)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),La=function(i,r){return new ai(i,r)};G.include({openTooltip:function(i,r,o){return this._initOverlay(ai,i,r,o).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Re.include({bindTooltip:function(i,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ai,this._tooltip,i,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var r=i?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[r](o),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof De||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var r=typeof i.getElement=="function"&&i.getElement();r&&(k(r,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),k(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var r=typeof i.getElement=="function"&&i.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var r=i.latlng,o,u;this._tooltip.options.sticky&&i.originalEvent&&(o=this._map.mouseEventToContainerPoint(i.originalEvent),u=this._map.containerPointToLayerPoint(o),r=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(r)}});var Rn=ht.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var r=i&&i.tagName==="DIV"?i:document.createElement("div"),o=this.options;if(o.html instanceof Element?(jt(r),r.appendChild(o.html)):r.innerHTML=o.html!==!1?o.html:"",o.bgPos){var u=B(o.bgPos);r.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Sa(i){return new Rn(i)}ht.Default=Dt;var Bt=Re.extend({options:{tileSize:256,opacity:1,updateWhenIdle:F.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){R(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Q(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(at(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ot(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof P?i:new P(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var r=this.getPane().children,o=-i(-1/0,1/0),u=0,p=r.length,m;u<p;u++)m=r[u].style.zIndex,r[u]!==this._container&&m&&(o=i(o,+m));isFinite(o)&&(this.options.zIndex=o+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!F.ielt9){Ce(this._container,this.options.opacity);var i=+new Date,r=!1,o=!1;for(var u in this._tiles){var p=this._tiles[u];if(!(!p.current||!p.loaded)){var m=Math.min(1,(i-p.loaded)/200);Ce(p.el,m),m<1?r=!0:(p.active?o=!0:this._onOpaqueTile(p),p.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),r&&(U(this._fadeFrame),this._fadeFrame=ae(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=V("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,r=this.options.maxZoom;if(i!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===i?(this._levels[o].el.style.zIndex=r-Math.abs(i-o),this._onUpdateLevel(o)):(Q(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var u=this._levels[i],p=this._map;return u||(u=this._levels[i]={},u.el=V("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=r,u.origin=p.project(p.unproject(p.getPixelOrigin()),i).round(),u.zoom=i,this._setZoomTransform(u,p.getCenter(),p.getZoom()),b(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var i,r,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)r=this._tiles[i],r.retain=r.current;for(i in this._tiles)if(r=this._tiles[i],r.current&&!r.active){var u=r.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var r in this._tiles)this._tiles[r].coords.z===i&&this._removeTile(r)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Q(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,r,o,u){var p=Math.floor(i/2),m=Math.floor(r/2),C=o-1,E=new P(+p,+m);E.z=+C;var _=this._tileCoordsToKey(E),T=this._tiles[_];return T&&T.active?(T.retain=!0,!0):(T&&T.loaded&&(T.retain=!0),C>u?this._retainParent(p,m,C,u):!1)},_retainChildren:function(i,r,o,u){for(var p=2*i;p<2*i+2;p++)for(var m=2*r;m<2*r+2;m++){var C=new P(p,m);C.z=o+1;var E=this._tileCoordsToKey(C),_=this._tiles[E];if(_&&_.active){_.retain=!0;continue}else _&&_.loaded&&(_.retain=!0);o+1<u&&this._retainChildren(p,m,o+1,u)}},_resetView:function(i){var r=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var r=this.options;return r.minNativeZoom!==void 0&&i<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<i?r.maxNativeZoom:i},_setView:function(i,r,o,u){var p=Math.round(r);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var m=this.options.updateWhenZooming&&p!==this._tileZoom;(!u||m)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(i),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(i,r)},_setZoomTransforms:function(i,r){for(var o in this._levels)this._setZoomTransform(this._levels[o],i,r)},_setZoomTransform:function(i,r,o){var u=this._map.getZoomScale(o,i.zoom),p=i.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(r,o)).round();F.any3d?qe(i.el,p,u):te(i.el,p)},_resetGrid:function(){var i=this._map,r=i.options.crs,o=this._tileSize=this.getTileSize(),u=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,r.wrapLng[0]],u).x/o.x),Math.ceil(i.project([0,r.wrapLng[1]],u).x/o.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([r.wrapLat[0],0],u).y/o.x),Math.ceil(i.project([r.wrapLat[1],0],u).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var r=this._map,o=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),u=r.getZoomScale(o,this._tileZoom),p=r.project(i,this._tileZoom).floor(),m=r.getSize().divideBy(u*2);return new J(p.subtract(m),p.add(m))},_update:function(i){var r=this._map;if(r){var o=this._clampZoom(r.getZoom());if(i===void 0&&(i=r.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(i),p=this._pxBoundsToTileRange(u),m=p.getCenter(),C=[],E=this.options.keepBuffer,_=new J(p.getBottomLeft().subtract([E,-E]),p.getTopRight().add([E,-E]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var T in this._tiles){var M=this._tiles[T].coords;(M.z!==this._tileZoom||!_.contains(new P(M.x,M.y)))&&(this._tiles[T].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(i,o);return}for(var D=p.min.y;D<=p.max.y;D++)for(var N=p.min.x;N<=p.max.x;N++){var ue=new P(N,D);if(ue.z=this._tileZoom,!!this._isValidTile(ue)){var ne=this._tiles[this._tileCoordsToKey(ue)];ne?ne.current=!0:C.push(ue)}}if(C.sort(function(pe,pt){return pe.distanceTo(m)-pt.distanceTo(m)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var we=document.createDocumentFragment();for(N=0;N<C.length;N++)this._addTile(C[N],we);this._level.el.appendChild(we)}}}},_isValidTile:function(i){var r=this._map.options.crs;if(!r.infinite){var o=this._globalTileRange;if(!r.wrapLng&&(i.x<o.min.x||i.x>o.max.x)||!r.wrapLat&&(i.y<o.min.y||i.y>o.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(i);return ee(this.options.bounds).overlaps(u)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var r=this._map,o=this.getTileSize(),u=i.scaleBy(o),p=u.add(o),m=r.unproject(u,i.z),C=r.unproject(p,i.z);return[m,C]},_tileCoordsToBounds:function(i){var r=this._tileCoordsToNwSe(i),o=new ce(r[0],r[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var r=i.split(":"),o=new P(+r[0],+r[1]);return o.z=+r[2],o},_removeTile:function(i){var r=this._tiles[i];r&&(Q(r.el),delete this._tiles[i],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){O(i,"leaflet-tile");var r=this.getTileSize();i.style.width=r.x+"px",i.style.height=r.y+"px",i.onselectstart=b,i.onmousemove=b,F.ielt9&&this.options.opacity<1&&Ce(i,this.options.opacity)},_addTile:function(i,r){var o=this._getTilePos(i),u=this._tileCoordsToKey(i),p=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(p),this.createTile.length<2&&ae(l(this._tileReady,this,i,null,p)),te(p,o),this._tiles[u]={el:p,coords:i,current:!0},r.appendChild(p),this.fire("tileloadstart",{tile:p,coords:i})},_tileReady:function(i,r,o){r&&this.fire("tileerror",{error:r,tile:o,coords:i});var u=this._tileCoordsToKey(i);o=this._tiles[u],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Ce(o.el,0),U(this._fadeFrame),this._fadeFrame=ae(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),r||(O(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F.ielt9||!this._map._fadeAnimated?ae(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var r=new P(this._wrapX?g(i.x,this._wrapX):i.x,this._wrapY?g(i.y,this._wrapY):i.y);return r.z=i.z,r},_pxBoundsToTileRange:function(i){var r=this.getTileSize();return new J(i.min.unscaleBy(r).floor(),i.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function xa(i){return new Bt(i)}var ct=Bt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,r){this._url=i,r=R(this,r),r.detectRetina&&F.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,r){return this._url===i&&r===void 0&&(r=!0),this._url=i,r||this.redraw(),this},createTile:function(i,r){var o=document.createElement("img");return k(o,"load",l(this._tileOnLoad,this,r,o)),k(o,"error",l(this._tileOnError,this,r,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(i),o},getTileUrl:function(i){var r={r:F.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-i.y;this.options.tms&&(r.y=o),r["-y"]=o}return z(this._url,n(r,this.options))},_tileOnLoad:function(i,r){F.ielt9?setTimeout(l(i,this,null,r),0):i(null,r)},_tileOnError:function(i,r,o){var u=this.options.errorTileUrl;u&&r.getAttribute("src")!==u&&(r.src=u),i(o,r)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,r=this.options.maxZoom,o=this.options.zoomReverse,u=this.options.zoomOffset;return o&&(i=r-i),i+u},_getSubdomain:function(i){var r=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var i,r;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(r=this._tiles[i].el,r.onload=b,r.onerror=b,!r.complete)){r.src=W;var o=this._tiles[i].coords;Q(r),delete this._tiles[i],this.fire("tileabort",{tile:r,coords:o})}},_removeTile:function(i){var r=this._tiles[i];if(r)return r.el.setAttribute("src",W),Bt.prototype._removeTile.call(this,i)},_tileReady:function(i,r,o){if(!(!this._map||o&&o.getAttribute("src")===W))return Bt.prototype._tileReady.call(this,i,r,o)}});function yn(i,r){return new ct(i,r)}var Tn=ct.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,r){this._url=i;var o=n({},this.defaultWmsParams);for(var u in r)u in this.options||(o[u]=r[u]);r=R(this,r);var p=r.detectRetina&&F.retina?2:1,m=this.getTileSize();o.width=m.x*p,o.height=m.y*p,this.wmsParams=o},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,ct.prototype.onAdd.call(this,i)},getTileUrl:function(i){var r=this._tileCoordsToNwSe(i),o=this._crs,u=de(o.project(r[0]),o.project(r[1])),p=u.min,m=u.max,C=(this._wmsVersion>=1.3&&this._crs===bn?[p.y,p.x,m.y,m.x]:[p.x,p.y,m.x,m.y]).join(","),E=ct.prototype.getTileUrl.call(this,i);return E+x(this.wmsParams,E,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(i,r){return n(this.wmsParams,i),r||this.redraw(),this}});function Ma(i,r){return new Tn(i,r)}ct.WMS=Tn,yn.wms=Ma;var Pe=Re.extend({options:{padding:.1},initialize:function(i){R(this,i),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),O(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,r){var o=this._map.getZoomScale(r,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,r),m=u.multiplyBy(-o).add(p).subtract(this._map._getNewPixelOrigin(i,r));F.any3d?qe(this._container,m,o):te(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,r=this._map.getSize(),o=this._map.containerPointToLayerPoint(r.multiplyBy(-i)).round();this._bounds=new J(o,o.add(r.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),An=Pe.extend({options:{tolerance:0},getEvents:function(){var i=Pe.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");k(i,"mousemove",this._onMouseMove,this),k(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),k(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Q(this._container),q(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var r in this._layers)i=this._layers[r],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pe.prototype._update.call(this);var i=this._bounds,r=this._container,o=i.getSize(),u=F.retina?2:1;te(r,i.min),r.width=u*o.x,r.height=u*o.y,r.style.width=o.x+"px",r.style.height=o.y+"px",F.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Pe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[d(i)]=i;var r=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var r=i._order,o=r.next,u=r.prev;o?o.prev=u:this._drawLast=u,u?u.next=o:this._drawFirst=o,delete i._order,delete this._layers[d(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var r=i.options.dashArray.split(/[, ]+/),o=[],u,p;for(p=0;p<r.length;p++){if(u=Number(r[p]),isNaN(u))return;o.push(u)}i.options._dashArray=o}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||ae(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var r=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(i._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(i._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var r=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,r=this._redrawBounds;if(this._ctx.save(),r){var o=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)i=u.layer,(!r||i._pxBounds&&i._pxBounds.intersects(r))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,r){if(this._drawing){var o,u,p,m,C=i._parts,E=C.length,_=this._ctx;if(E){for(_.beginPath(),o=0;o<E;o++){for(u=0,p=C[o].length;u<p;u++)m=C[o][u],_[u?"lineTo":"moveTo"](m.x,m.y);r&&_.closePath()}this._fillStroke(_,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var r=i._point,o=this._ctx,u=Math.max(Math.round(i._radius),1),p=(Math.max(Math.round(i._radiusY),1)||u)/u;p!==1&&(o.save(),o.scale(1,p)),o.beginPath(),o.arc(r.x,r.y/p,u,0,Math.PI*2,!1),p!==1&&o.restore(),this._fillStroke(o,i)}},_fillStroke:function(i,r){var o=r.options;o.fill&&(i.globalAlpha=o.fillOpacity,i.fillStyle=o.fillColor||o.color,i.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(i.setLineDash&&i.setLineDash(r.options&&r.options._dashArray||[]),i.globalAlpha=o.opacity,i.lineWidth=o.weight,i.strokeStyle=o.color,i.lineCap=o.lineCap,i.lineJoin=o.lineJoin,i.stroke())},_onClick:function(i){for(var r=this._map.mouseEventToLayerPoint(i),o,u,p=this._drawFirst;p;p=p.next)o=p.layer,o.options.interactive&&o._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(o))&&(u=o);this._fireEvent(u?[u]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,r)}},_handleMouseOut:function(i){var r=this._hoveredLayer;r&&($(this._container,"leaflet-interactive"),this._fireEvent([r],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,r){if(!this._mouseHoverThrottled){for(var o,u,p=this._drawFirst;p;p=p.next)o=p.layer,o.options.interactive&&o._containsPoint(r)&&(u=o);u!==this._hoveredLayer&&(this._handleMouseOut(i),u&&(O(this._container,"leaflet-interactive"),this._fireEvent([u],i,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,r,o){this._map._fireDOMEvent(r,o||r.type,i)},_bringToFront:function(i){var r=i._order;if(r){var o=r.next,u=r.prev;if(o)o.prev=u;else return;u?u.next=o:o&&(this._drawFirst=o),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(i)}},_bringToBack:function(i){var r=i._order;if(r){var o=r.next,u=r.prev;if(u)u.next=o;else return;o?o.prev=u:u&&(this._drawLast=u),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(i)}}});function Ln(i){return F.canvas?new An(i):null}var Ut=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fa={_initContainer:function(){this._container=V("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pe.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var r=i._container=Ut("shape");O(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",i._path=Ut("path"),r.appendChild(i._path),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){var r=i._container;this._container.appendChild(r),i.options.interactive&&i.addInteractiveTarget(r)},_removePath:function(i){var r=i._container;Q(r),i.removeInteractiveTarget(r),delete this._layers[d(i)]},_updateStyle:function(i){var r=i._stroke,o=i._fill,u=i.options,p=i._container;p.stroked=!!u.stroke,p.filled=!!u.fill,u.stroke?(r||(r=i._stroke=Ut("stroke")),p.appendChild(r),r.weight=u.weight+"px",r.color=u.color,r.opacity=u.opacity,u.dashArray?r.dashStyle=H(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=u.lineCap.replace("butt","flat"),r.joinstyle=u.lineJoin):r&&(p.removeChild(r),i._stroke=null),u.fill?(o||(o=i._fill=Ut("fill")),p.appendChild(o),o.color=u.fillColor||u.color,o.opacity=u.fillOpacity):o&&(p.removeChild(o),i._fill=null)},_updateCircle:function(i){var r=i._point.round(),o=Math.round(i._radius),u=Math.round(i._radiusY||o);this._setPath(i,i._empty()?"M0 0":"AL "+r.x+","+r.y+" "+o+","+u+" 0,"+65535*360)},_setPath:function(i,r){i._path.v=r},_bringToFront:function(i){at(i._container)},_bringToBack:function(i){ot(i._container)}},oi=F.vml?Ut:Ms,Pt=Pe.extend({_initContainer:function(){this._container=oi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=oi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Q(this._container),q(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pe.prototype._update.call(this);var i=this._bounds,r=i.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,o.setAttribute("width",r.x),o.setAttribute("height",r.y)),te(o,i.min),o.setAttribute("viewBox",[i.min.x,i.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(i){var r=i._path=oi("path");i.options.className&&O(r,i.options.className),i.options.interactive&&O(r,"leaflet-interactive"),this._updateStyle(i),this._layers[d(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Q(i._path),i.removeInteractiveTarget(i._path),delete this._layers[d(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var r=i._path,o=i.options;r&&(o.stroke?(r.setAttribute("stroke",o.color),r.setAttribute("stroke-opacity",o.opacity),r.setAttribute("stroke-width",o.weight),r.setAttribute("stroke-linecap",o.lineCap),r.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?r.setAttribute("stroke-dasharray",o.dashArray):r.removeAttribute("stroke-dasharray"),o.dashOffset?r.setAttribute("stroke-dashoffset",o.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),o.fill?(r.setAttribute("fill",o.fillColor||o.color),r.setAttribute("fill-opacity",o.fillOpacity),r.setAttribute("fill-rule",o.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(i,r){this._setPath(i,Fs(i._parts,r))},_updateCircle:function(i){var r=i._point,o=Math.max(Math.round(i._radius),1),u=Math.max(Math.round(i._radiusY),1)||o,p="a"+o+","+u+" 0 1,0 ",m=i._empty()?"M0 0":"M"+(r.x-o)+","+r.y+p+o*2+",0 "+p+-o*2+",0 ";this._setPath(i,m)},_setPath:function(i,r){i._path.setAttribute("d",r)},_bringToFront:function(i){at(i._path)},_bringToBack:function(i){ot(i._path)}});F.vml&&Pt.include(Fa);function Sn(i){return F.svg||F.vml?new Pt(i):null}G.include({getRenderer:function(i){var r=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var r=this._paneRenderers[i];return r===void 0&&(r=this._createRenderer({pane:i}),this._paneRenderers[i]=r),r},_createRenderer:function(i){return this.options.preferCanvas&&Ln(i)||Sn(i)}});var xn=ut.extend({initialize:function(i,r){ut.prototype.initialize.call(this,this._boundsToLatLngs(i),r)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ee(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Da(i,r){return new xn(i,r)}Pt.create=oi,Pt.pointsToPath=Fs,Ue.geometryToLayer=ei,Ue.coordsToLatLng=Vi,Ue.coordsToLatLngs=ti,Ue.latLngToCoords=Wi,Ue.latLngsToCoords=ii,Ue.getFeature=dt,Ue.asFeature=si,G.mergeOptions({boxZoom:!0});var Mn=Le.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){k(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){q(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),At(),Li(),this._startPoint=this._map.mouseEventToContainerPoint(i),k(document,{contextmenu:Qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=V("div","leaflet-zoom-box",this._container),O(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var r=new J(this._point,this._startPoint),o=r.getSize();te(this._box,r.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(Q(this._box),$(this._container,"leaflet-crosshair")),Lt(),Si(),q(document,{contextmenu:Qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var r=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});G.addInitHook("addHandler","boxZoom",Mn),G.mergeOptions({doubleClickZoom:!0});var Fn=Le.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var r=this._map,o=r.getZoom(),u=r.options.zoomDelta,p=i.originalEvent.shiftKey?o-u:o+u;r.options.doubleClickZoom==="center"?r.setZoom(p):r.setZoomAround(i.containerPoint,p)}});G.addInitHook("addHandler","doubleClickZoom",Fn),G.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Dn=Le.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ne(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}O(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$(this._map._container,"leaflet-grab"),$(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=ee(this._map.options.maxBounds);this._offsetLimit=de(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var r=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(r),this._prunePositions(r)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,r){return i-(i-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;i.x<r.min.x&&(i.x=this._viscousLimit(i.x,r.min.x)),i.y<r.min.y&&(i.y=this._viscousLimit(i.y,r.min.y)),i.x>r.max.x&&(i.x=this._viscousLimit(i.x,r.max.x)),i.y>r.max.y&&(i.y=this._viscousLimit(i.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,r=Math.round(i/2),o=this._initialWorldOffset,u=this._draggable._newPos.x,p=(u-r+o)%i+r-o,m=(u+r+o)%i-r-o,C=Math.abs(p+o)<Math.abs(m+o)?p:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(i){var r=this._map,o=r.options,u=!o.inertia||i.noInertia||this._times.length<2;if(r.fire("dragend",i),u)r.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,C=o.easeLinearity,E=p.multiplyBy(C/m),_=E.distanceTo([0,0]),T=Math.min(o.inertiaMaxSpeed,_),M=E.multiplyBy(T/_),D=T/(o.inertiaDeceleration*C),N=M.multiplyBy(-D/2).round();!N.x&&!N.y?r.fire("moveend"):(N=r._limitOffset(N,r.options.maxBounds),ae(function(){r.panBy(N,{duration:D,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});G.addInitHook("addHandler","dragging",Dn),G.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Bn=Le.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),k(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),q(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,r=document.documentElement,o=i.scrollTop||r.scrollTop,u=i.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(u,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var r=this._panKeys={},o=this.keyCodes,u,p;for(u=0,p=o.left.length;u<p;u++)r[o.left[u]]=[-1*i,0];for(u=0,p=o.right.length;u<p;u++)r[o.right[u]]=[i,0];for(u=0,p=o.down.length;u<p;u++)r[o.down[u]]=[0,i];for(u=0,p=o.up.length;u<p;u++)r[o.up[u]]=[0,-1*i]},_setZoomDelta:function(i){var r=this._zoomKeys={},o=this.keyCodes,u,p;for(u=0,p=o.zoomIn.length;u<p;u++)r[o.zoomIn[u]]=i;for(u=0,p=o.zoomOut.length;u<p;u++)r[o.zoomOut[u]]=-i},_addHooks:function(){k(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){q(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var r=i.keyCode,o=this._map,u;if(r in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(u=this._panKeys[r],i.shiftKey&&(u=B(u).multiplyBy(3)),o.options.maxBounds&&(u=o._limitOffset(B(u),o.options.maxBounds)),o.options.worldCopyJump){var p=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(u)));o.panTo(p)}else o.panBy(u)}else if(r in this._zoomKeys)o.setZoom(o.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Qe(i)}}});G.addInitHook("addHandler","keyboard",Bn),G.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Un=Le.extend({addHooks:function(){k(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){q(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var r=nn(i),o=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var u=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),u),Qe(i)},_performZoom:function(){var i=this._map,r=i.getZoom(),o=this._map.options.zoomSnap||0;i._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,m=o?Math.ceil(p/o)*o:p,C=i._limitZoom(r+(this._delta>0?m:-m))-r;this._delta=0,this._startTime=null,C&&(i.options.scrollWheelZoom==="center"?i.setZoom(r+C):i.setZoomAround(this._lastMousePos,r+C))}});G.addInitHook("addHandler","scrollWheelZoom",Un);var Ba=600;G.mergeOptions({tapHold:F.touchNative&&F.safari&&F.mobile,tapTolerance:15});var Pn=Le.extend({addHooks:function(){k(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){q(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var r=i.touches[0];this._startPos=this._newPos=new P(r.clientX,r.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(k(document,"touchend",oe),k(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),Ba),k(document,"touchend touchcancel contextmenu",this._cancel,this),k(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){q(document,"touchend",oe),q(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),q(document,"touchend touchcancel contextmenu",this._cancel,this),q(document,"touchmove",this._onMove,this)},_onMove:function(i){var r=i.touches[0];this._newPos=new P(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,r){var o=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});o._simulated=!0,r.target.dispatchEvent(o)}});G.addInitHook("addHandler","tapHold",Pn),G.mergeOptions({touchZoom:F.touch,bounceAtZoomLimits:!0});var kn=Le.extend({addHooks:function(){O(this._map._container,"leaflet-touch-zoom"),k(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$(this._map._container,"leaflet-touch-zoom"),q(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var r=this._map;if(!(!i.touches||i.touches.length!==2||r._animatingZoom||this._zooming)){var o=r.mouseEventToContainerPoint(i.touches[0]),u=r.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(o.add(u)._divideBy(2))),this._startDist=o.distanceTo(u),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),k(document,"touchmove",this._onTouchMove,this),k(document,"touchend touchcancel",this._onTouchEnd,this),oe(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var r=this._map,o=r.mouseEventToContainerPoint(i.touches[0]),u=r.mouseEventToContainerPoint(i.touches[1]),p=o.distanceTo(u)/this._startDist;if(this._zoom=r.getScaleZoom(p,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&p<1||this._zoom>r.getMaxZoom()&&p>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var m=o._add(u)._divideBy(2)._subtract(this._centerPoint);if(p===1&&m.x===0&&m.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var C=l(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ae(C,this,!0),oe(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),q(document,"touchmove",this._onTouchMove,this),q(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});G.addInitHook("addHandler","touchZoom",kn),G.BoxZoom=Mn,G.DoubleClickZoom=Fn,G.Drag=Dn,G.Keyboard=Bn,G.ScrollWheelZoom=Un,G.TapHold=Pn,G.TouchZoom=kn,t.Bounds=J,t.Browser=F,t.CRS=Fe,t.Canvas=An,t.Circle=Gi,t.CircleMarker=$t,t.Class=ve,t.Control=_e,t.DivIcon=Rn,t.DivOverlay=Se,t.DomEvent=Jr,t.DomUtil=qr,t.Draggable=Ne,t.Evented=wt,t.FeatureGroup=De,t.GeoJSON=Ue,t.GridLayer=Bt,t.Handler=Le,t.Icon=ht,t.ImageOverlay=ni,t.LatLng=j,t.LatLngBounds=ce,t.Layer=Re,t.LayerGroup=lt,t.LineUtil=ua,t.Map=G,t.Marker=Qt,t.Mixin=na,t.Path=ze,t.Point=P,t.PolyUtil=ra,t.Polygon=ut,t.Polyline=Be,t.Popup=ri,t.PosAnimation=rn,t.Projection=da,t.Rectangle=xn,t.Renderer=Pe,t.SVG=Pt,t.SVGOverlay=_n,t.TileLayer=ct,t.Tooltip=ai,t.Transformation=mi,t.Util=Ls,t.VideoOverlay=wn,t.bind=l,t.bounds=de,t.canvas=Ln,t.circle=Ca,t.circleMarker=va,t.control=Mt,t.divIcon=Sa,t.extend=n,t.featureGroup=ma,t.geoJSON=En,t.geoJson=_a,t.gridLayer=xa,t.icon=ga,t.imageOverlay=Ra,t.latLng=K,t.latLngBounds=ee,t.layerGroup=fa,t.map=Qr,t.marker=ba,t.point=B,t.polygon=wa,t.polyline=Ea,t.popup=Aa,t.rectangle=Da,t.setOptions=R,t.stamp=d,t.svg=Sn,t.svgOverlay=Ta,t.tileLayer=yn,t.tooltip=La,t.transformation=_t,t.version=s,t.videoOverlay=ya;var Ua=window.L;t.noConflict=function(){return window.L=Ua,this},window.L=t})}(Ot,Ot.exports)),Ot.exports}var Ya=Za();const Ze=Wa(Ya);class le{constructor(e){this.table=e}reloadData(e,t,s){return this.table.dataLoader.load(e,void 0,void 0,void 0,t,s)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(e){return this.table.modules.layout.layout(e)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(e){return this.table.eventBus.subscribed(e)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(e){return this.table.externalEvents.subscribed(e)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(e){return this.table.options[e]}setOption(e,t){return typeof t<"u"&&(this.table.options[e]=t),this.table.options[e]}deprecationCheck(e,t,s){return this.table.deprecationAdvisor.check(e,t,s)}deprecationCheckMsg(e,t){return this.table.deprecationAdvisor.checkMsg(e,t)}deprecationMsg(e){return this.table.deprecationAdvisor.msg(e)}module(e){return this.table.module(e)}}class Y{static elVisible(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)}static elOffset(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(e,t,s){var n=e?t.split(e):[t],a=n.length,l;for(let h=0;h<a&&(s=s[n[h]],l=s,!!s);h++);return l}static deepClone(e,t,s=[]){var n={}.__proto__,a=[].__proto__;t||(t=Object.assign(Array.isArray(e)?[]:{},e));for(var l in e){let h=e[l],d,f;h!=null&&typeof h=="object"&&(h.__proto__===n||h.__proto__===a)&&(d=s.findIndex(g=>g.subject===h),d>-1?t[l]=s[d].copy:(f=Object.assign(Array.isArray(h)?[]:{},h),s.unshift({subject:h,copy:f}),t[l]=this.deepClone(h,f,s)))}return t}}let qa=class Wn extends le{constructor(e,t,s){super(e),this.element=t,this.container=this._lookupContainer(),this.parent=s,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var e=this.table.options.popupContainer;return typeof e=="string"?(e=document.querySelector(e),e||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):e===!0&&(e=this.table.element),e&&!this._checkContainerIsParent(e)&&(e=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),e||(e=document.body),e}_checkContainerIsParent(e,t=this.table.element){return e===t?!0:t.parentNode?this._checkContainerIsParent(e,t.parentNode):!1}renderCallback(e){this.renderedCallback=e}containerEventCoords(e){var t=!(e instanceof MouseEvent),s=t?e.touches[0].pageX:e.pageX,n=t?e.touches[0].pageY:e.pageY;if(this.container!==document.body){let a=Y.elOffset(this.container);s-=a.left,n-=a.top}return{x:s,y:n}}elementPositionCoords(e,t="right"){var s=Y.elOffset(e),n,a,l;switch(this.container!==document.body&&(n=Y.elOffset(this.container),s.left-=n.left,s.top-=n.top),t){case"right":a=s.left+e.offsetWidth,l=s.top-1;break;case"bottom":a=s.left,l=s.top+e.offsetHeight;break;case"left":a=s.left,l=s.top-1;break;case"top":a=s.left,l=s.top;break;case"center":a=s.left+e.offsetWidth/2,l=s.top+e.offsetHeight/2;break}return{x:a,y:l,offset:s}}show(e,t){var s,n,a,l,h;return this.destroyed||this.table.destroyed?this:(e instanceof HTMLElement?(a=e,h=this.elementPositionCoords(e,t),l=h.offset,s=h.x,n=h.y):typeof e=="number"?(l={top:0,left:0},s=e,n=t):(h=this.containerEventCoords(e),s=h.x,n=h.y,this.reversedX=!1),this.element.style.top=n+"px",this.element.style.left=s+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(s,n,a,l,t),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",d=>{d.stopPropagation()}),this)}_fitToScreen(e,t,s,n,a){var l=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(e+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",s?this.element.style.right=this.container.offsetWidth-n.left+"px":this.element.style.right=this.container.offsetWidth-e+"px",this.reversedX=!0);let h=Math.max(this.container.offsetHeight,l?this.container.scrollHeight:0);if(t+this.element.offsetHeight>h)if(s)switch(a){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-s.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+s.offsetHeight+1+"px"}else this.element.style.height=h+"px"}isVisible(){return this.visible}hideOnBlur(e){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=e),this}_escapeCheck(e){e.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(e=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!e&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(e){return this.childPopup&&this.childPopup.hide(),this.childPopup=new Wn(this.table,e,this),this.childPopup}};class I extends le{constructor(e,t){super(e),this._handler=null}initialize(){}registerTableOption(e,t){this.table.optionsList.register(e,t)}registerColumnOption(e,t){this.table.columnManager.optionsList.register(e,t)}registerTableFunction(e,t){typeof this.table[e]>"u"?this.table[e]=(...s)=>(this.table.initGuard(e),t(...s)):console.warn("Unable to bind table function, name already in use",e)}registerComponentFunction(e,t,s){return this.table.componentFunctionBinder.bind(e,t,s)}registerDataHandler(e,t){this.table.rowManager.registerDataPipelineHandler(e,t),this._handler=e}registerDisplayHandler(e,t){this.table.rowManager.registerDisplayPipelineHandler(e,t),this._handler=e}displayRows(e){var t=this.table.rowManager.displayRows.length-1,s;if(this._handler&&(s=this.table.rowManager.displayPipeline.findIndex(n=>n.handler===this._handler),s>-1&&(t=s)),e&&(t=t+e),this._handler)return t>-1?this.table.rowManager.getDisplayRows(t):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(e,t){t||(t=this._handler),t&&this.table.rowManager.refreshActiveData(t,!1,e)}footerAppend(e){return this.table.footerManager.append(e)}footerPrepend(e){return this.table.footerManager.prepend(e)}footerRemove(e){return this.table.footerManager.remove(e)}popup(e,t){return new qa(this.table,e,t)}alert(e,t){return this.table.alertManager.alert(e,t)}clearAlert(){return this.table.alertManager.clear()}}var Xa={rownum:function(c,e,t,s,n,a){return a.getPosition()}};const mt=class mt extends I{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var t=!1,s={};this.allowedTypes.forEach(n=>{var a="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),l;e.definition[a]&&(l=this.lookupAccessor(e.definition[a]),l&&(t=!0,s[a]={accessor:l,params:e.definition[a+"Params"]||{}}))}),t&&(e.modules.accessor=s)}lookupAccessor(e){var t=!1;switch(typeof e){case"string":mt.accessors[e]?t=mt.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":t=e;break}return t}transformRow(e,t){var s="accessor"+(t.charAt(0).toUpperCase()+t.slice(1)),n=e.getComponent(),a=Y.deepClone(e.data||{});return this.table.columnManager.traverse(function(l){var h,d,f,g;l.modules.accessor&&(d=l.modules.accessor[s]||l.modules.accessor.accessor||!1,d&&(h=l.getFieldValue(a),h!="undefined"&&(g=l.getComponent(),f=typeof d.params=="function"?d.params(h,a,t,g,n):d.params,l.setFieldValue(a,d.accessor(h,a,t,f,g,n)))))}),a}};S(mt,"moduleName","accessor"),S(mt,"accessors",Xa);let Xi=mt;var Ja={method:"GET"};function Ji(c,e){var t=[];if(e=e||"",Array.isArray(c))c.forEach((n,a)=>{t=t.concat(Ji(n,e?e+"["+a+"]":a))});else if(typeof c=="object")for(var s in c)t=t.concat(Ji(c[s],e?e+"["+s+"]":s));else t.push({key:e,value:c});return t}function Qa(c){var e=Ji(c),t=[];return e.forEach(function(s){t.push(encodeURIComponent(s.key)+"="+encodeURIComponent(s.value))}),t.join("&")}function jn(c,e,t){return c&&t&&Object.keys(t).length&&(!e.method||e.method.toLowerCase()=="get")&&(e.method="get",c+=(c.includes("?")?"&":"?")+Qa(t)),c}function $a(c,e,t){var s;return new Promise((n,a)=>{if(c=this.urlGenerator.call(this.table,c,e,t),e.method.toUpperCase()!="GET")if(s=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],s){for(var l in s.headers)e.headers||(e.headers={}),typeof e.headers[l]>"u"&&(e.headers[l]=s.headers[l]);e.body=s.body.call(this,c,e,t)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);c?(typeof e.headers>"u"&&(e.headers={}),typeof e.headers.Accept>"u"&&(e.headers.Accept="application/json"),typeof e.headers["X-Requested-With"]>"u"&&(e.headers["X-Requested-With"]="XMLHttpRequest"),typeof e.mode>"u"&&(e.mode="cors"),e.mode=="cors"?(typeof e.headers.Origin>"u"&&(e.headers.Origin=window.location.origin),typeof e.credentials>"u"&&(e.credentials="same-origin")):typeof e.credentials>"u"&&(e.credentials="include"),fetch(c,e).then(h=>{h.ok?h.json().then(d=>{n(d)}).catch(d=>{a(d),console.warn("Ajax Load Error - Invalid JSON returned",d)}):(console.error("Ajax Load Error - Connection Error: "+h.status,h.statusText),a(h))}).catch(h=>{console.error("Ajax Load Error - Connection Error: ",h),a(h)})):(console.warn("Ajax Load Error - No URL Set"),n([]))})}function Qi(c,e){var t=[];if(e=e||"",Array.isArray(c))c.forEach((n,a)=>{t=t.concat(Qi(n,e?e+"["+a+"]":a))});else if(typeof c=="object")for(var s in c)t=t.concat(Qi(c[s],e?e+"["+s+"]":s));else t.push({key:e,value:c});return t}var eo={json:{headers:{"Content-Type":"application/json"},body:function(c,e,t){return JSON.stringify(t)}},form:{headers:{},body:function(c,e,t){var s=Qi(t),n=new FormData;return s.forEach(function(a){n.append(a.key,a.value)}),n}}};const ye=class ye extends I{constructor(e){super(e),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=ye.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||ye.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||ye.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(e,t,s,n){var a=this.table.options.ajaxParams;return a&&(typeof a=="function"&&(a=a.call(this.table)),n=Object.assign(Object.assign({},a),n)),n}requestDataCheck(e,t,s,n){return!!(!e&&this.url||typeof e=="string")}requestData(e,t,s,n,a){var l;return!a&&this.requestDataCheck(e)?(e&&this.setUrl(e),l=this.generateConfig(s),this.sendRequest(this.url,t,l)):a}setDefaultConfig(e={}){this.config=Object.assign({},ye.defaultConfig),typeof e=="string"?this.config.method=e:Object.assign(this.config,e)}generateConfig(e={}){var t=Object.assign({},this.config);return typeof e=="string"?t.method=e:Object.assign(t,e),t}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e,t,s){return this.table.options.ajaxRequesting.call(this.table,e,t)!==!1?this.loaderPromise(e,s,t).then(n=>(this.table.options.ajaxResponse&&(n=this.table.options.ajaxResponse.call(this.table,e,t,n)),n)):Promise.reject()}};S(ye,"moduleName","ajax"),S(ye,"defaultConfig",Ja),S(ye,"defaultURLGenerator",jn),S(ye,"defaultLoaderPromise",$a),S(ye,"contentTypeFormatters",eo);let $i=ye;var to={replace:function(c){return this.table.setData(c)},update:function(c){return this.table.updateOrAddData(c)},insert:function(c){return this.table.addData(c)}},io={table:function(c){var e=[],t=!0,s=this.table.columnManager.columns,n=[],a=[];return c=c.split(`
`),c.forEach(function(l){e.push(l.split("	"))}),e.length&&!(e.length===1&&e[0].length<2)?(e[0].forEach(function(l){var h=s.find(function(d){return l&&d.definition.title&&l.trim()&&d.definition.title.trim()===l.trim()});h?n.push(h):t=!1}),t||(t=!0,n=[],e[0].forEach(function(l){var h=s.find(function(d){return l&&d.field&&l.trim()&&d.field.trim()===l.trim()});h?n.push(h):t=!1}),t||(n=this.table.columnManager.columnsByIndex)),t&&e.shift(),e.forEach(function(l){var h={};l.forEach(function(d,f){n[f]&&(h[n[f].field]=d)}),a.push(h)}),a):!1}},so={copyToClipboard:["ctrl + 67","meta + 67"]},no={copyToClipboard:function(c){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},ro={keybindings:{bindings:so,actions:no}};const He=class He extends I{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",e=>{var t,s,n;this.blocked||(e.preventDefault(),this.customSelection?(t=this.customSelection,this.table.options.clipboardCopyFormatter&&(t=this.table.options.clipboardCopyFormatter("plain",t))):(n=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),s=this.table.modules.export.generateHTMLTable(n),t=s?this.generatePlainContent(n):"",this.table.options.clipboardCopyFormatter&&(t=this.table.options.clipboardCopyFormatter("plain",t),s=this.table.options.clipboardCopyFormatter("html",s))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",t):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",t),s&&e.clipboardData.setData("text/html",s)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",t),s&&e.originalEvent.clipboardData.setData("text/html",s)),this.dispatchExternal("clipboardCopied",t,s),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var t=[];return e.forEach(s=>{var n=[];s.columns.forEach(a=>{var l="";if(a)if(s.type==="group"&&(a.value=a.component.getKey()),a.value===null)l="";else switch(typeof a.value){case"object":l=JSON.stringify(a.value);break;case"undefined":l="";break;default:l=a.value}n.push(l)}),t.push(n.join("	"))}),t.join(`
`)}copy(e,t){var s,n;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(e=document.createRange(),e.selectNodeContents(this.table.element),s=window.getSelection(),s.toString()&&t&&(this.customSelection=s.toString()),s.removeAllRanges(),s.addRange(e)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(n=document.body.createTextRange(),n.moveToElementText(this.table.element),n.select()),document.execCommand("copy"),s&&s.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=He.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;break}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=He.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;break}}paste(e){var t,s,n;this.checkPasteOrigin(e)&&(t=this.getPasteData(e),s=this.pasteParser.call(this,t),s?(e.preventDefault(),this.table.modExists("mutator")&&(s=this.mutateData(s)),n=this.pasteAction.call(this,s),this.dispatchExternal("clipboardPasted",t,s,n)):this.dispatchExternal("clipboardPasteError",t))}mutateData(e){var t=[];return Array.isArray(e)?e.forEach(s=>{t.push(this.table.modules.mutator.transformRow(s,"clipboard"))}):t=e,t}checkPasteOrigin(e){var t=!0,s=this.confirm("clipboard-paste",[e]);return(s||!["DIV","SPAN"].includes(e.target.tagName))&&(t=!1),t}getPasteData(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(t=e.originalEvent.clipboardData.getData("text/plain")),t}};S(He,"moduleName","clipboard"),S(He,"moduleExtensions",ro),S(He,"pasteActions",to),S(He,"pasteParsers",io);let es=He;class ao{constructor(e){return this._row=e,new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._row.table.componentFunctionBinder.handle("row",t._row,s)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var e=[];return this._row.getCells().forEach(function(t){e.push(t.getComponent())}),e}getCell(e){var t=this._row.getCell(e);return t?t.getComponent():!1}_getSelf(){return this._row}}class Zn{constructor(e){return this._cell=e,new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._cell.table.componentFunctionBinder.handle("cell",t._cell,s)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(e){return this._cell.row.getData(e)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(e,t){typeof t>"u"&&(t=!0),this._cell.setValue(e,t)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class Gt extends le{constructor(e,t){super(e.table),this.table=e.table,this.column=e,this.row=t,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var e=this.element,t=this.column.getField(),s={top:"flex-start",bottom:"flex-end",middle:"center"},n={left:"flex-start",right:"flex-end",center:"center"};if(e.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(e.style.display="inline-flex",e.style.alignItems=s[this.column.vertAlign]||"",this.column.hozAlign&&(e.style.justifyContent=n[this.column.hozAlign]||"")),t&&e.setAttribute("tabulator-field",t),this.column.definition.cssClass){var a=this.column.definition.cssClass.split(" ");a.forEach(l=>{e.classList.add(l)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var e;switch(e=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof e){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",e!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=e}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(e,t,s){var n=this.setValueProcessData(e,t,s);n&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(e,t,s){var n=!1;return(this.value!==e||s)&&(n=!0,t&&(e=this.chain("cell-value-changing",[this,e],null,e))),this.setValueActual(e),n&&this.dispatch("cell-value-changed",this),n}setValueActual(e){this.oldValue=this.value,this.value=e,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,e),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Zn(this)),this.component}}class Yn{constructor(e){return this._column=e,this.type="ColumnComponent",new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._column.table.componentFunctionBinder.handle("column",t._column,s)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var e=[];return this._column.cells.forEach(function(t){e.push(t.getComponent())}),e}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(e){e.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(e){e.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(t){e.push(t.getComponent())}),e}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(e,t){return this._column.table.columnManager.scrollToColumn(this._column,e,t)}getTable(){return this._column.table}move(e,t){var s=this._column.table.columnManager.findColumn(e);s?this._column.table.columnManager.moveColumn(this._column,s,t):console.warn("Move Error - No matching column found:",s)}getNextColumn(){var e=this._column.nextColumn();return e?e.getComponent():!1}getPrevColumn(){var e=this._column.prevColumn();return e?e.getComponent():!1}updateDefinition(e){return this._column.updateDefinition(e)}getWidth(){return this._column.getWidth()}setWidth(e){var t;return e===!0?t=this._column.reinitializeWidth(!0):t=this._column.setWidth(e),this._column.table.columnManager.rerenderColumns(!0),t}}var qn={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0};const tt=class tt extends le{constructor(e,t,s){super(t.table),this.definition=e,this.parent=t,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=s,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((n,a)=>{var l=new tt(n,this);this.attachColumn(l)}),this.checkColumnVisibility()):t.registerColumnField(this),this._initialize()}createElement(){var e=document.createElement("div");switch(e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),this.isRowHeader&&e.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":e.style.justifyContent="center";break;case"bottom":e.style.justifyContent="flex-end";break}return e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let t in e)typeof this.definition[t]>"u"&&(this.definition[t]=e[t]);this.definition=this.table.columnManager.optionsList.generate(tt.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{tt.defaultOptionList.indexOf(e)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),e.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var e=this.definition;if(this.dispatch("column-layout",this),typeof e.visible<"u"&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass){var t=e.cssClass.split(" ");t.forEach(s=>{this.element.classList.add(s)})}e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxInitialWidth&&(this.maxInitialWidth=parseInt(e.maxInitialWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,t=document.createElement("div");if(t.classList.add("tabulator-col-title"),e.headerWordWrap&&t.classList.add("tabulator-col-title-wrap"),e.editableTitle){var s=document.createElement("input");s.classList.add("tabulator-title-editor"),s.addEventListener("click",n=>{n.stopPropagation(),s.focus()}),s.addEventListener("mousedown",n=>{n.stopPropagation()}),s.addEventListener("change",()=>{e.title=s.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),t.appendChild(s),e.field?this.langBind("columns|"+e.field,n=>{s.value=n||e.title||"&nbsp;"}):s.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,n=>{this._formatColumnHeaderTitle(t,n||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(t,e.title||"&nbsp;");return t}_formatColumnHeaderTitle(e,t){var s=this.chain("column-format",[this,t,e],null,()=>t);switch(typeof s){case"object":s instanceof Node?e.appendChild(s):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",s));break;case"undefined":e.innerHTML="";break;default:e.innerHTML=s}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var e=this.definition.cssClass.split(" ");e.forEach(t=>{this.element.classList.add(t)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var t=e,s=this.fieldStructure,n=s.length,a;for(let l=0;l<n&&(t=t[s[l]],a=t,!!t);l++);return a}_setFlatData(e,t){this.field&&(e[this.field]=t)}_setNestedData(e,t){var s=e,n=this.fieldStructure,a=n.length;for(let l=0;l<a;l++)if(l==a-1)s[n[l]]=t;else{if(!s[n[l]])if(typeof t<"u")s[n[l]]={};else break;s=s[n[l]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement()),e.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,t){var s=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=s+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=s-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(n){n.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(e){var t=[];return e?this.columns.forEach(s=>{t.push(s),t=t.concat(s.getColumns(!0))}):t=this.columns,t}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var t=[];return this.isGroup&&e&&(this.columns.forEach(function(s){t.push(s.getDefinition(!0))}),this.definition.columns=t),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(t){t.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,t){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(s){s.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,t),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(e,t){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(s){s.hide()}),this.dispatch("column-hide",this,t),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(t){t.visible&&(e+=t.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.table.initialized&&(this.element.style.width=e+"px"),this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var t=this.columns.indexOf(e);t>-1&&this.columns.splice(t,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(t){t.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var e=[];this.cells.forEach(function(t){t.row.heightInitialized&&(t.row.getElement().offsetParent!==null?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)}),e.forEach(function(t){t.calcHeight()}),e.forEach(function(t){t.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(t){t.visible&&(e+=t.getWidth())}):e=this.width,e}getLeftOffset(){var e=this.element.offsetLeft;return this.parent.isGroup&&(e+=this.parent.getLeftOffset()),e}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(e){this.maxWidth&&e>this.maxWidth&&(e=this.maxWidth,console.warn("the minWidth ("+e+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(t){t.setMinWidth()})}setMaxWidth(e){this.minWidth&&e<this.minWidth&&(e=this.minWidth,console.warn("the maxWidth ("+e+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(t){t.setMaxWidth()})}delete(){return new Promise((e,t)=>{this.isGroup&&this.columns.forEach(function(n){n.delete()}),this.dispatch("column-delete",this);var s=this.cells.length;for(let n=0;n<s;n++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(e){var t=new Gt(this,e);return this.cells.push(t),t}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._nextVisibleColumn(e+1):!1}_nextVisibleColumn(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._prevVisibleColumn(e-1):!1}_prevVisibleColumn(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,typeof this.definition.width<"u"&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(e),this.dispatch("column-width-fit-after",this)}fitToData(e){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(n=>{n.clearWidth()}));var t=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(n=>{var a=n.getWidth();a>t&&(t=a)}),t)){var s=t+1;e?this.setWidth(s):(this.maxInitialWidth&&!e&&(s=Math.min(s,this.maxInitialWidth)),this.setWidthActual(s))}}}updateDefinition(e){var t;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(t=Object.assign({},this.getDefinition()),t=Object.assign(t,e),this.table.columnManager.addColumn(t,!1,this).then(s=>(t.field==this.field&&(this.field=!1),this.delete().then(()=>s.getComponent()))))}deleteCell(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)}getComponent(){return this.component||(this.component=new Yn(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof tt?this.parent.getComponent():!1}};S(tt,"defaultOptionList",qn);let nt=tt;class ui{constructor(e){return this._row=e,new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._row.table.componentFunctionBinder.handle("row",t._row,s)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getCells(){var e=[];return this._row.getCells().forEach(function(t){e.push(t.getComponent())}),e}getCell(e){var t=this._row.getCell(e);return t?t.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(e){return this._row.watchPosition(e)}delete(){return this._row.delete()}scrollTo(e,t){return this._row.table.rowManager.scrollToRow(this._row,e,t)}move(e,t){this._row.moveToRow(e,t)}update(e){return this._row.updateData(e)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var e=this._row.nextRow();return e&&e.getComponent()}getPrevRow(){var e=this._row.prevRow();return e&&e.getComponent()}}class he extends le{constructor(e,t,s="row"){super(t.table),this.parent=t,this.data={},this.type=s,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(e)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(e,t){if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,t),e&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,t)}rendered(){this.cells.forEach(e=>{e.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(e){var t=0,s=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(s=this.calcMinHeight(),t=this.calcMaxHeight(),e?this.height=Math.max(t,s):this.height=this.manualHeight?this.height:Math.max(t,s)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var e=0;return this.cells.forEach(function(t){var s=t.getHeight();s>e&&(e=s)}),e}setCellHeight(){this.cells.forEach(function(e){e.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(e){e.clearHeight()})}normalizeHeight(e){e&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()}setHeight(e,t){(this.height!=e||t)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)}setData(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e),this.dispatch("row-data-init-after",this)}updateData(e){var t=this.element&&Y.elVisible(this.element),s={},n;return new Promise((a,l)=>{typeof e=="string"&&(e=JSON.parse(e)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(s=Object.assign(s,this.data),s=Object.assign(s,e)),n=this.chain("row-data-changing",[this,s,e],null,e);for(let h in n)this.data[h]=n[h];this.dispatch("row-data-save-after",this);for(let h in e)this.table.columnManager.getColumnsByFieldRoot(h).forEach(f=>{let g=this.getCell(f.getField());if(g){let b=f.getFieldValue(n);g.getValue()!==b&&(g.setValueProcessData(b),t&&g.cellRendered())}});t?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,t,e),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),a()})}getData(e){return e?this.chain("row-data-retrieve",[this,e],null,this.data):this.data}getCell(e){var t=!1;return e=this.table.columnManager.findColumn(e),!this.initialized&&this.cells.length===0&&this.generateCells(),t=this.cells.find(function(s){return s.column===e}),t}getCellIndex(e){return this.cells.findIndex(function(t){return t===e})}findCell(e){return this.cells.find(t=>t.element===e)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var e=this.table.rowManager.nextDisplayRow(this,!0);return e||!1}prevRow(){var e=this.table.rowManager.prevDisplayRow(this,!0);return e||!1}moveToRow(e,t){var s=this.table.rowManager.findRow(e);s?(this.table.rowManager.moveRowActual(this,s,!t),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(e){this.detachModules(),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var e=this.cells.length;for(let t=0;t<e;t++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(e){e!=this.position&&(this.position=e,this.positionWatchers.forEach(t=>{t(this.position)}))}watchPosition(e){this.positionWatchers.push(e),e(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new ui(this)),this.component}}var oo={avg:function(c,e,t){var s=0,n=typeof t.precision<"u"?t.precision:2;return c.length&&(s=c.reduce(function(a,l){return Number(a)+Number(l)}),s=s/c.length,s=n!==!1?s.toFixed(n):s),parseFloat(s).toString()},max:function(c,e,t){var s=null,n=typeof t.precision<"u"?t.precision:!1;return c.forEach(function(a){a=Number(a),(a>s||s===null)&&(s=a)}),s!==null?n!==!1?s.toFixed(n):s:""},min:function(c,e,t){var s=null,n=typeof t.precision<"u"?t.precision:!1;return c.forEach(function(a){a=Number(a),(a<s||s===null)&&(s=a)}),s!==null?n!==!1?s.toFixed(n):s:""},sum:function(c,e,t){var s=0,n=typeof t.precision<"u"?t.precision:!1;return c.length&&c.forEach(function(a){a=Number(a),s+=isNaN(a)?0:Number(a)}),n!==!1?s.toFixed(n):s},concat:function(c,e,t){var s=0;return c.length&&(s=c.reduce(function(n,a){return String(n)+String(a)})),s},count:function(c,e,t){var s=0;return c.length&&c.forEach(function(n){n&&s++}),s},unique:function(c,e,t){var s=c.filter((n,a)=>(c||n===0)&&c.indexOf(n)===a);return s.length}};const Ke=class Ke extends I{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new nt({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(e,t){return this.topRow&&t.unshift(this.topRow),this.botRow&&t.push(this.botRow),t}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(e):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var t=e.definition,s={topCalcParams:t.topCalcParams||{},botCalcParams:t.bottomCalcParams||{}};if(t.topCalc){switch(typeof t.topCalc){case"string":Ke.calculations[t.topCalc]?s.topCalc=Ke.calculations[t.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.topCalc);break;case"function":s.topCalc=t.topCalc;break}s.topCalc&&(e.modules.columnCalcs=s,this.topCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(t.bottomCalc){switch(typeof t.bottomCalc){case"string":Ke.calculations[t.bottomCalc]?s.botCalc=Ke.calculations[t.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.bottomCalc);break;case"function":s.botCalc=t.bottomCalc;break}s.botCalc&&(e.modules.columnCalcs=s,this.botCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var e=document.createDocumentFragment();this.topInitialized||(e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=e)}recalc(e){var t,s;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(t=this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),s=this.generateRow("top",t),this.topRow=s;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(s.getElement()),s.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),s=this.generateRow("bottom",t),this.botRow=s;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(s.getElement()),s.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var e=this.table.modules.groupRows.getChildGroups();e.forEach(t=>{this.recalcGroup(t)})}}recalcGroup(e){var t,s;this.blockCheck()||e&&e.calcs&&(e.calcs.bottom&&(t=this.rowsToData(e.rows),s=this.generateRowData("bottom",t),e.calcs.bottom.updateData(s),e.calcs.bottom.reinitialize()),e.calcs.top&&(t=this.rowsToData(e.rows),s=this.generateRowData("top",t),e.calcs.top.updateData(s),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var t=[],s=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,n=this.table.modules.dataTree;return e.forEach(a=>{var l;t.push(a.getData()),s&&((l=a.modules.dataTree)!=null&&l.open)&&this.rowsToData(n.getFilteredTreeChildren(a)).forEach(h=>{t.push(a)})}),t}generateRow(e,t){var s=this.generateRowData(e,t),n;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),n=new he(s,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),n.component=!1,n.getComponent=()=>(n.component||(n.component=new ao(n)),n.component),n.generateCells=()=>{var a=[];this.table.columnManager.columnsByIndex.forEach(l=>{this.genColumn.setField(l.getField()),this.genColumn.hozAlign=l.hozAlign,l.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter(l.definition[e+"CalcFormatter"]),params:l.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=l.definition.cssClass;var h=new Gt(this.genColumn,n);h.getElement(),h.column=l,h.setWidth(),l.cells.push(h),a.push(h),l.visible||h.hide()}),n.cells=a},n}generateRowData(e,t){var s={},n=e=="top"?this.topCalcs:this.botCalcs,a=e=="top"?"topCalc":"botCalc",l,h;return n.forEach(function(d){var f=[];d.modules.columnCalcs&&d.modules.columnCalcs[a]&&(t.forEach(function(g){f.push(d.getFieldValue(g))}),h=a+"Params",l=typeof d.modules.columnCalcs[h]=="function"?d.modules.columnCalcs[h](f,t):d.modules.columnCalcs[h],d.setFieldValue(s,d.modules.columnCalcs[a](f,t,l)))}),s}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={},t;return this.table.options.groupBy&&this.table.modExists("groupRows")?(t=this.table.modules.groupRows.getGroups(!0),t.forEach(s=>{e[s.getKey()]=this.getGroupResults(s)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var t=e._getSelf(),s=e.getSubGroups(),n={},a={};return s.forEach(l=>{n[l.getKey()]=this.getGroupResults(l)}),a={top:t.calcs.top?t.calcs.top.getData():{},bottom:t.calcs.bottom?t.calcs.bottom.getData():{},groups:n},a}adjustForScrollbar(e){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=e+"px":this.botElement.style.paddingRight=e+"px")}};S(Ke,"moduleName","columnCalcs"),S(Ke,"calculations",oo);let ts=Ke;class Xn extends I{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,t=this.table.options;switch(this.field=t.dataTreeChildField,this.indent=t.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),t.dataTreeBranchElement?t.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof t.dataTreeBranchElement=="string"?(e=document.createElement("div"),e.innerHTML=t.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=t.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),t.dataTreeCollapseElement?typeof t.dataTreeCollapseElement=="string"?(e=document.createElement("div"),e.innerHTML=t.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=t.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),t.dataTreeExpandElement?typeof t.dataTreeExpandElement=="string"?(e=document.createElement("div"),e.innerHTML=t.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=t.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof t.dataTreeStartExpanded){case"boolean":this.startOpen=function(s,n){return t.dataTreeStartExpanded};break;case"function":this.startOpen=t.dataTreeStartExpanded;break;default:this.startOpen=function(s,n){return t.dataTreeStartExpanded[n]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(e){var t;e&&(t=this.table.rowManager.getRows(),t.forEach(s=>{this.reinitializeRowChildren(s)}))}initializeElementField(){var e=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(e?e.field:!1)}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(t=>{e=e.concat(this.getTreeChildren(t,!1,!0))}),e}rowDataChanged(e,t,s){this.redrawNeeded(s)&&(this.initializeRow(e),t&&(this.layoutRow(e),this.refreshData(!0)))}cellValueChanged(e){var t=e.column.getField();t===this.elementField&&this.layoutRow(e.row)}initializeRow(e){var t=e.getData()[this.field],s=Array.isArray(t),n=s||!s&&typeof t=="object"&&t!==null;!n&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!n&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:n?e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0):!1,controlEl:e.modules.dataTree&&n?e.modules.dataTree.controlEl:!1,branchEl:e.modules.dataTree&&n?e.modules.dataTree.branchEl:!1,parent:e.modules.dataTree?e.modules.dataTree.parent:!1,children:n}}reinitializeRowChildren(e){var t=this.getTreeChildren(e,!1,!0);t.forEach(function(s){s.reinitialize(!0)})}layoutRow(e){var t=this.elementField?e.getCell(this.elementField):e.getCells()[0],s=t.getElement(),n=e.modules.dataTree;n.branchEl&&(n.branchEl.parentNode&&n.branchEl.parentNode.removeChild(n.branchEl),n.branchEl=!1),n.controlEl&&(n.controlEl.parentNode&&n.controlEl.parentNode.removeChild(n.controlEl),n.controlEl=!1),this.generateControlElement(e,s),e.getElement().classList.add("tabulator-tree-level-"+n.index),n.index&&(this.branchEl?(n.branchEl=this.branchEl.cloneNode(!0),s.insertBefore(n.branchEl,s.firstChild),this.table.rtl?n.branchEl.style.marginRight=(n.branchEl.offsetWidth+n.branchEl.style.marginLeft)*(n.index-1)+n.index*this.indent+"px":n.branchEl.style.marginLeft=(n.branchEl.offsetWidth+n.branchEl.style.marginRight)*(n.index-1)+n.index*this.indent+"px"):this.table.rtl?s.style.paddingRight=parseInt(window.getComputedStyle(s,null).getPropertyValue("padding-right"))+n.index*this.indent+"px":s.style.paddingLeft=parseInt(window.getComputedStyle(s,null).getPropertyValue("padding-left"))+n.index*this.indent+"px")}generateControlElement(e,t){var s=e.modules.dataTree,n=s.controlEl;t=t||e.getCells()[0].getElement(),s.children!==!1&&(s.open?(s.controlEl=this.collapseEl.cloneNode(!0),s.controlEl.addEventListener("click",a=>{a.stopPropagation(),this.collapseRow(e)})):(s.controlEl=this.expandEl.cloneNode(!0),s.controlEl.addEventListener("click",a=>{a.stopPropagation(),this.expandRow(e)})),s.controlEl.addEventListener("mousedown",a=>{a.stopPropagation()}),n&&n.parentNode===t?n.parentNode.replaceChild(s.controlEl,n):t.insertBefore(s.controlEl,t.firstChild))}getRows(e){var t=[];return e.forEach((s,n)=>{var a,l;t.push(s),s instanceof he&&(s.create(),a=s.modules.dataTree,!a.index&&a.children!==!1&&(l=this.getChildren(s,!1,!0),l.forEach(h=>{h.create(),t.push(h)})))}),t}getChildren(e,t,s){var n=e.modules.dataTree,a=[],l=[];return n.children!==!1&&(n.open||t)&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?a=this.table.modules.filter.filter(n.children):a=n.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(a,s),a.forEach(h=>{l.push(h);var d=this.getChildren(h,!1,!0);d.forEach(f=>{l.push(f)})})),l}generateChildren(e){var t=[],s=e.getData()[this.field];return Array.isArray(s)||(s=[s]),s.forEach(n=>{var a=new he(n||{},this.table.rowManager);a.create(),a.modules.dataTree.index=e.modules.dataTree.index+1,a.modules.dataTree.parent=e,a.modules.dataTree.children&&(a.modules.dataTree.open=this.startOpen(a.getComponent(),a.modules.dataTree.index)),t.push(a)}),t}expandRow(e,t){var s=e.modules.dataTree;s.children!==!1&&(s.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var t=e.modules.dataTree;t.children!==!1&&(t.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var t=e.modules.dataTree;t.children!==!1&&(t.open?this.collapseRow(e):this.expandRow(e))}isRowExpanded(e){return e.modules.dataTree.open}getTreeParent(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(e){return e.modules.dataTree&&e.modules.dataTree.parent?this.getTreeParentRoot(e.modules.dataTree.parent):e}getFilteredTreeChildren(e){var t=e.modules.dataTree,s=[],n;return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?n=this.table.modules.filter.filter(t.children):n=t.children,n.forEach(a=>{a instanceof he&&s.push(a)})),s}rowDeleting(e){var t=e.modules.dataTree;t&&t.children&&Array.isArray(t.children)&&t.children.forEach(s=>{s instanceof he&&s.wipe()})}rowDelete(e){var t=e.modules.dataTree.parent,s;t&&(s=this.findChildIndex(e,t),s!==!1&&t.data[this.field].splice(s,1),t.data[this.field].length||delete t.data[this.field],this.initializeRow(t),this.layoutRow(t)),this.refreshData(!0)}addTreeChildRow(e,t,s,n){var a=!1;typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),typeof n<"u"&&(a=this.findChildIndex(n,e),a!==!1&&e.data[this.field].splice(s?a:a+1,0,t)),a===!1&&(s?e.data[this.field].unshift(t):e.data[this.field].push(t)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,t){var s=!1;return typeof e=="object"?e instanceof he?s=e.data:e instanceof ui?s=e._getSelf().data:typeof HTMLElement<"u"&&e instanceof HTMLElement?t.modules.dataTree&&(s=t.modules.dataTree.children.find(n=>n instanceof he?n.element===e:!1),s&&(s=s.data)):e===null&&(s=!1):typeof e>"u"?s=!1:s=t.data[this.field].find(n=>n.data[this.table.options.index]==e),s&&(Array.isArray(t.data[this.field])&&(s=t.data[this.field].indexOf(s)),s==-1&&(s=!1)),s}getTreeChildren(e,t,s){var n=e.modules.dataTree,a=[];return n&&n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),n.children.forEach(l=>{l instanceof he&&(a.push(t?l.getComponent():l),s&&this.getTreeChildren(l,t,s).forEach(h=>{a.push(h)}))})),a}getChildField(){return this.field}redrawNeeded(e){return(this.field?typeof e[this.field]<"u":!1)||(this.elementField?typeof e[this.elementField]<"u":!1)}}S(Xn,"moduleName","dataTree");function lo(c,e={},t){var s=e.delimiter?e.delimiter:",",n=[],a=[];c.forEach(l=>{var h=[];switch(l.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":l.columns.forEach((d,f)=>{d&&d.depth===1&&(a[f]=typeof d.value>"u"||d.value===null?"":'"'+String(d.value).split('"').join('""')+'"')});break;case"row":l.columns.forEach(d=>{if(d){switch(typeof d.value){case"object":d.value=d.value!==null?JSON.stringify(d.value):"";break;case"undefined":d.value="";break}h.push('"'+String(d.value).split('"').join('""')+'"')}}),n.push(h.join(s));break}}),a.length&&n.unshift(a.join(s)),n=n.join(`
`),e.bom&&(n="\uFEFF"+n),t(n,"text/csv")}function ho(c,e,t){var s=[];c.forEach(n=>{var a={};switch(n.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":n.columns.forEach(l=>{l&&(a[l.component.getTitleDownload()||l.component.getField()]=l.value)}),s.push(a);break}}),s=JSON.stringify(s,null,"	"),t(s,"application/json")}function uo(c,e={},t){var s=[],n=[],a={},l=e.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},h=e.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},d=e.jsPDF||{},f=e.title?e.title:"",g,b;d.orientation||(d.orientation=e.orientation||"landscape"),d.unit||(d.unit="pt"),c.forEach(w=>{switch(w.type){case"header":s.push(v(w));break;case"group":n.push(v(w,l));break;case"calc":n.push(v(w,h));break;case"row":n.push(v(w));break}});function v(w,y){var R=[];return w.columns.forEach(x=>{var A;if(x){switch(typeof x.value){case"object":x.value=x.value!==null?JSON.stringify(x.value):"";break;case"undefined":x.value="";break}A={content:x.value,colSpan:x.width,rowSpan:x.height},y&&(A.styles=y),R.push(A)}}),R}g=this.dependencyRegistry.lookup("jspdf","jsPDF"),b=new g(d),e.autoTable&&(typeof e.autoTable=="function"?a=e.autoTable(b)||{}:a=e.autoTable),f&&(a.didDrawPage=function(w){b.text(f,40,30)}),a.head=s,a.body=n,b.autoTable(a),e.documentProcessing&&e.documentProcessing(b),t(b.output("arraybuffer"),"application/pdf")}function co(c,e,t){var s=this,n=e.sheetName||"Sheet1",a=this.dependencyRegistry.lookup("XLSX"),l=a.utils.book_new(),h=new le(this),d="compress"in e?e.compress:!0,f=e.writeOptions||{bookType:"xlsx",bookSST:!0,compression:d},g;f.type="binary",l.SheetNames=[],l.Sheets={};function b(){var y=[],R=[],x={},A={s:{c:0,r:0},e:{c:c[0]?c[0].columns.reduce((z,H)=>z+(H&&H.width?H.width:1),0):0,r:c.length}};return c.forEach((z,H)=>{var X=[];z.columns.forEach(function(W,re){W?(X.push(!(W.value instanceof Date)&&typeof W.value=="object"?JSON.stringify(W.value):W.value),(W.width>1||W.height>-1)&&(W.height>1||W.width>1)&&R.push({s:{r:H,c:re},e:{r:H+W.height-1,c:re+W.width-1}})):X.push("")}),y.push(X)}),a.utils.sheet_add_aoa(x,y),x["!ref"]=a.utils.encode_range(A),R.length&&(x["!merges"]=R),x}if(e.sheetOnly){t(b());return}if(e.sheets)for(var v in e.sheets)e.sheets[v]===!0?(l.SheetNames.push(v),l.Sheets[v]=b()):(l.SheetNames.push(v),h.commsSend(e.sheets[v],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:s.active,intercept:function(y){l.Sheets[v]=y}}));else l.SheetNames.push(n),l.Sheets[n]=b();e.documentProcessing&&(l=e.documentProcessing(l));function w(y){for(var R=new ArrayBuffer(y.length),x=new Uint8Array(R),A=0;A!=y.length;++A)x[A]=y.charCodeAt(A)&255;return R}g=a.write(l,f),t(w(g),"application/octet-stream")}function po(c,e,t){this.modExists("export",!0)&&t(this.modules.export.generateHTMLTable(c),"text/html")}function fo(c,e,t){const s=[];c.forEach(n=>{const a={};switch(n.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":n.columns.forEach(l=>{l&&(a[l.component.getTitleDownload()||l.component.getField()]=l.value)}),s.push(JSON.stringify(a));break}}),t(s.join(`
`),"application/x-ndjson")}var mo={csv:lo,json:ho,jsonLines:fo,pdf:uo,xlsx:co,html:po};const gt=class gt extends I{constructor(e){super(e),this.registerTableOption("downloadEncoder",function(t,s){return new Blob([t],{type:s})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(e,t,s,n){this.download(e,t,s,n,!0)}download(e,t,s,n,a){var l=!1;function h(f,g){a?a===!0?this.triggerDownload(f,g,e,t,!0):a(f):this.triggerDownload(f,g,e,t)}if(typeof e=="function"?l=e:gt.downloaders[e]?l=gt.downloaders[e]:console.warn("Download Error - No such download type found: ",e),l){var d=this.generateExportList(n);l.call(this.table,d,s||{},h.bind(this))}}generateExportList(e){var t=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),s=this.table.options.groupHeaderDownload;return s&&!Array.isArray(s)&&(s=[s]),t.forEach(n=>{var a;n.type==="group"&&(a=n.columns[0],s&&s[n.indent]&&(a.value=s[n.indent](a.value,n.component._group.getRowCount(),n.component._group.getData(),n.component)))}),t}triggerDownload(e,t,s,n,a){var l=document.createElement("a"),h=this.table.options.downloadEncoder(e,t);h&&(a?window.open(window.URL.createObjectURL(h)):(n=n||"Tabulator."+(typeof s=="function"?"txt":s),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(h,n):(l.setAttribute("href",window.URL.createObjectURL(h)),l.setAttribute("download",n),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l))),this.dispatchExternal("downloadComplete"))}commsReceived(e,t,s){switch(t){case"intercept":this.download(s.type,"",s.options,s.active,s.intercept);break}}};S(gt,"moduleName","download"),S(gt,"downloaders",mo);let is=gt;function di(c,e){var t=e.mask,s=typeof e.maskLetterChar<"u"?e.maskLetterChar:"A",n=typeof e.maskNumberChar<"u"?e.maskNumberChar:"9",a=typeof e.maskWildcardChar<"u"?e.maskWildcardChar:"*";function l(h){var d=t[h];typeof d<"u"&&d!==a&&d!==s&&d!==n&&(c.value=c.value+""+d,l(h+1))}c.addEventListener("keydown",h=>{var d=c.value.length,f=h.key;if(h.keyCode>46&&!h.ctrlKey&&!h.metaKey){if(d>=t.length)return h.preventDefault(),h.stopPropagation(),!1;switch(t[d]){case s:if(f.toUpperCase()==f.toLowerCase())return h.preventDefault(),h.stopPropagation(),!1;break;case n:if(isNaN(f))return h.preventDefault(),h.stopPropagation(),!1;break;case a:break;default:if(f!==t[d])return h.preventDefault(),h.stopPropagation(),!1}}}),c.addEventListener("keyup",h=>{h.keyCode>46&&e.maskAutoFill&&l(c.value.length)}),c.placeholder||(c.placeholder=t),e.maskAutoFill&&l(c.value.length)}function go(c,e,t,s,n){var a=c.getValue(),l=document.createElement("input");if(l.setAttribute("type",n.search?"search":"text"),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let d in n.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+n.elementAttributes["+"+d])):l.setAttribute(d,n.elementAttributes[d]);l.value=typeof a<"u"?a:"",e(function(){c.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",n.selectContents&&l.select())});function h(d){(a===null||typeof a>"u")&&l.value!==""||l.value!==a?t(l.value)&&(a=l.value):s()}return l.addEventListener("change",h),l.addEventListener("blur",h),l.addEventListener("keydown",function(d){switch(d.keyCode){case 13:h();break;case 27:s();break;case 35:case 36:d.stopPropagation();break}}),n.mask&&di(l,n),l}function bo(c,e,t,s,n){var a=c.getValue(),l=n.verticalNavigation||"hybrid",h=String(a!==null&&typeof a<"u"?a:""),d=document.createElement("textarea"),f=0;if(d.style.display="block",d.style.padding="2px",d.style.height="100%",d.style.width="100%",d.style.boxSizing="border-box",d.style.whiteSpace="pre-wrap",d.style.resize="none",n.elementAttributes&&typeof n.elementAttributes=="object")for(let b in n.elementAttributes)b.charAt(0)=="+"?(b=b.slice(1),d.setAttribute(b,d.getAttribute(b)+n.elementAttributes["+"+b])):d.setAttribute(b,n.elementAttributes[b]);d.value=h,e(function(){c.getType()==="cell"&&(d.focus({preventScroll:!0}),d.style.height="100%",d.scrollHeight,d.style.height=d.scrollHeight+"px",c.getRow().normalizeHeight(),n.selectContents&&d.select())});function g(b){(a===null||typeof a>"u")&&d.value!==""||d.value!==a?(t(d.value)&&(a=d.value),setTimeout(function(){c.getRow().normalizeHeight()},300)):s()}return d.addEventListener("change",g),d.addEventListener("blur",g),d.addEventListener("keyup",function(){d.style.height="";var b=d.scrollHeight;d.style.height=b+"px",b!=f&&(f=b,c.getRow().normalizeHeight())}),d.addEventListener("keydown",function(b){switch(b.keyCode){case 13:b.shiftKey&&n.shiftEnterSubmit&&g();break;case 27:s();break;case 38:(l=="editor"||l=="hybrid"&&d.selectionStart)&&(b.stopImmediatePropagation(),b.stopPropagation());break;case 40:(l=="editor"||l=="hybrid"&&d.selectionStart!==d.value.length)&&(b.stopImmediatePropagation(),b.stopPropagation());break;case 35:case 36:b.stopPropagation();break}}),n.mask&&di(d,n),d}function vo(c,e,t,s,n){var a=c.getValue(),l=n.verticalNavigation||"editor",h=document.createElement("input");if(h.setAttribute("type","number"),typeof n.max<"u"&&h.setAttribute("max",n.max),typeof n.min<"u"&&h.setAttribute("min",n.min),typeof n.step<"u"&&h.setAttribute("step",n.step),h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let g in n.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),h.setAttribute(g,h.getAttribute(g)+n.elementAttributes["+"+g])):h.setAttribute(g,n.elementAttributes[g]);h.value=a;var d=function(g){f()};e(function(){c.getType()==="cell"&&(h.removeEventListener("blur",d),h.focus({preventScroll:!0}),h.style.height="100%",h.addEventListener("blur",d),n.selectContents&&h.select())});function f(){var g=h.value;!isNaN(g)&&g!==""&&(g=Number(g)),g!==a?t(g)&&(a=g):s()}return h.addEventListener("keydown",function(g){switch(g.keyCode){case 13:f();break;case 27:s();break;case 38:case 40:l=="editor"&&(g.stopImmediatePropagation(),g.stopPropagation());break;case 35:case 36:g.stopPropagation();break}}),n.mask&&di(h,n),h}function Co(c,e,t,s,n){var a=c.getValue(),l=document.createElement("input");if(l.setAttribute("type","range"),typeof n.max<"u"&&l.setAttribute("max",n.max),typeof n.min<"u"&&l.setAttribute("min",n.min),typeof n.step<"u"&&l.setAttribute("step",n.step),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let d in n.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+n.elementAttributes["+"+d])):l.setAttribute(d,n.elementAttributes[d]);l.value=a,e(function(){c.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%")});function h(){var d=l.value;!isNaN(d)&&d!==""&&(d=Number(d)),d!=a?t(d)&&(a=d):s()}return l.addEventListener("blur",function(d){h()}),l.addEventListener("keydown",function(d){switch(d.keyCode){case 13:h();break;case 27:s();break}}),l}function Eo(c,e,t,s,n){var a=n.format,l=n.verticalNavigation||"editor",h=a?window.DateTime||luxon.DateTime:null,d=c.getValue(),f=document.createElement("input");function g(v){var w;return h.isDateTime(v)?w=v:a==="iso"?w=h.fromISO(String(v)):w=h.fromFormat(String(v),a),w.toFormat("yyyy-MM-dd")}if(f.type="date",f.style.padding="4px",f.style.width="100%",f.style.boxSizing="border-box",n.max&&f.setAttribute("max",a?g(n.max):n.max),n.min&&f.setAttribute("min",a?g(n.min):n.min),n.elementAttributes&&typeof n.elementAttributes=="object")for(let v in n.elementAttributes)v.charAt(0)=="+"?(v=v.slice(1),f.setAttribute(v,f.getAttribute(v)+n.elementAttributes["+"+v])):f.setAttribute(v,n.elementAttributes[v]);d=typeof d<"u"?d:"",a&&(h?d=g(d):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),f.value=d,e(function(){c.getType()==="cell"&&(f.focus({preventScroll:!0}),f.style.height="100%",n.selectContents&&f.select())});function b(){var v=f.value,w;if((d===null||typeof d>"u")&&v!==""||v!==d){if(v&&a)switch(w=h.fromFormat(String(v),"yyyy-MM-dd"),a){case!0:v=w;break;case"iso":v=w.toISO();break;default:v=w.toFormat(a)}t(v)&&(d=f.value)}else s()}return f.addEventListener("blur",function(v){(v.relatedTarget||v.rangeParent||v.explicitOriginalTarget!==f)&&b()}),f.addEventListener("keydown",function(v){switch(v.keyCode){case 13:b();break;case 27:s();break;case 35:case 36:v.stopPropagation();break;case 38:case 40:l=="editor"&&(v.stopImmediatePropagation(),v.stopPropagation());break}}),f}function wo(c,e,t,s,n){var a=n.format,l=n.verticalNavigation||"editor",h=a?window.DateTime||luxon.DateTime:null,d,f=c.getValue(),g=document.createElement("input");if(g.type="time",g.style.padding="4px",g.style.width="100%",g.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let v in n.elementAttributes)v.charAt(0)=="+"?(v=v.slice(1),g.setAttribute(v,g.getAttribute(v)+n.elementAttributes["+"+v])):g.setAttribute(v,n.elementAttributes[v]);f=typeof f<"u"?f:"",a&&(h?(h.isDateTime(f)?d=f:a==="iso"?d=h.fromISO(String(f)):d=h.fromFormat(String(f),a),f=d.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),g.value=f,e(function(){c.getType()=="cell"&&(g.focus({preventScroll:!0}),g.style.height="100%",n.selectContents&&g.select())});function b(){var v=g.value,w;if((f===null||typeof f>"u")&&v!==""||v!==f){if(v&&a)switch(w=h.fromFormat(String(v),"hh:mm"),a){case!0:v=w;break;case"iso":v=w.toISO();break;default:v=w.toFormat(a)}t(v)&&(f=g.value)}else s()}return g.addEventListener("blur",function(v){(v.relatedTarget||v.rangeParent||v.explicitOriginalTarget!==g)&&b()}),g.addEventListener("keydown",function(v){switch(v.keyCode){case 13:b();break;case 27:s();break;case 35:case 36:v.stopPropagation();break;case 38:case 40:l=="editor"&&(v.stopImmediatePropagation(),v.stopPropagation());break}}),g}function _o(c,e,t,s,n){var a=n.format,l=n.verticalNavigation||"editor",h=a?this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"):null,d,f=c.getValue(),g=document.createElement("input");if(g.type="datetime-local",g.style.padding="4px",g.style.width="100%",g.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let v in n.elementAttributes)v.charAt(0)=="+"?(v=v.slice(1),g.setAttribute(v,g.getAttribute(v)+n.elementAttributes["+"+v])):g.setAttribute(v,n.elementAttributes[v]);f=typeof f<"u"?f:"",a&&(h?(h.isDateTime(f)?d=f:a==="iso"?d=h.fromISO(String(f)):d=h.fromFormat(String(f),a),f=d.toFormat("yyyy-MM-dd")+"T"+d.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),g.value=f,e(function(){c.getType()==="cell"&&(g.focus({preventScroll:!0}),g.style.height="100%",n.selectContents&&g.select())});function b(){var v=g.value,w;if((f===null||typeof f>"u")&&v!==""||v!==f){if(v&&a)switch(w=h.fromISO(String(v)),a){case!0:v=w;break;case"iso":v=w.toISO();break;default:v=w.toFormat(a)}t(v)&&(f=g.value)}else s()}return g.addEventListener("blur",function(v){(v.relatedTarget||v.rangeParent||v.explicitOriginalTarget!==g)&&b()}),g.addEventListener("keydown",function(v){switch(v.keyCode){case 13:b();break;case 27:s();break;case 35:case 36:v.stopPropagation();break;case 38:case 40:l=="editor"&&(v.stopImmediatePropagation(),v.stopPropagation());break}}),g}let Ro=class{constructor(e,t,s,n,a,l){this.edit=e,this.table=e.table,this.cell=t,this.params=this._initializeParams(l),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=t.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:n,cancel:a},this._deprecatedOptionsCheck(),this._initializeValue(),s(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var e=this.cell.getValue();typeof e>"u"&&typeof this.params.defaultValue<"u"&&(e=this.params.defaultValue),this.initialValues=this.params.multiselect?e:[e],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var e=this.cell.getElement();function t(s){s.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),e.addEventListener("click",t),setTimeout(()=>{e.removeEventListener("click",t)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var e=document.createElement("div");return e.classList.add("tabulator-edit-list"),e.addEventListener("mousedown",this._preventBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e}_setListWidth(){var e=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=e.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=e.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var e=this.params.elementAttributes,t=document.createElement("input");if(t.setAttribute("type",this.params.clearable?"search":"text"),t.style.padding="4px",t.style.width="100%",t.style.boxSizing="border-box",this.params.autocomplete||(t.style.cursor="default",t.style.caretColor="transparent"),e&&typeof e=="object")for(let s in e)s.charAt(0)=="+"?(s=s.slice(1),t.setAttribute(s,t.getAttribute(s)+e["+"+s])):t.setAttribute(s,e[s]);return this.params.mask&&di(t,this.params),this._bindInputEvents(t),t}_initializeParams(e){var t=["values","valuesURL","valuesLookup"],s;return e=Object.assign({},e),e.verticalNavigation=e.verticalNavigation||"editor",e.placeholderLoading=typeof e.placeholderLoading>"u"?"Searching ...":e.placeholderLoading,e.placeholderEmpty=typeof e.placeholderEmpty>"u"?"No Results Found":e.placeholderEmpty,e.filterDelay=typeof e.filterDelay>"u"?300:e.filterDelay,e.emptyValue=Object.keys(e).includes("emptyValue")?e.emptyValue:"",s=Object.keys(e).filter(n=>t.includes(n)).length,s?s>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),e.autocomplete?e.multiselect&&(e.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(e.freetext&&(e.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),e.filterFunc&&(e.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),e.filterRemote&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),e.mask&&(e.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),e.allowEmpty&&(e.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),e.listOnEmpty&&(e.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),e.filterRemote&&!(typeof e.valuesLookup=="function"||e.valuesURL)&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),e}_bindInputEvents(e){e.addEventListener("focus",this._inputFocus.bind(this)),e.addEventListener("click",this._inputClick.bind(this)),e.addEventListener("blur",this._inputBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&e.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(e){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(e){e.stopPropagation()}_inputBlur(e){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(e){switch(e.keyCode){case 38:this._keyUp(e);break;case 40:this._keyDown(e);break;case 37:case 39:this._keySide(e);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(e);break;case 9:this._keyTab(e);break;default:this._keySelectLetter(e)}}_inputKeyUp(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(e)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(e){var t=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t>0&&this._focusItem(this.displayItems[t-1]))}_keyDown(e){var t=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&t<this.displayItems.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<this.displayItems.length-1&&(t==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[t+1])))}_keySide(e){this.params.autocomplete||(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}_keyEnter(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(e){this._cancel()}_keyHomeEnd(e){this.params.autocomplete&&e.stopImmediatePropagation()}_keySelectLetter(e){this.params.autocomplete||(e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&this._scrollToValue(e.keyCode))}_keyAutoCompLetter(e){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(e){clearTimeout(this.filterTimeout);var t=String.fromCharCode(e).toLowerCase();this.filterTerm+=t.toLowerCase();var s=this.displayItems.find(n=>typeof n.label<"u"&&n.label.toLowerCase().startsWith(this.filterTerm));s&&this._focusItem(s),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(e){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=e,e&&e.element&&(e.element.classList.add("focused"),e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e=>{Number.isInteger(e)||console.error("List generation error",e)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(e){var t=[],s=++this.listIteration;return this.filtered=!1,this.params.values?t=this.params.values:this.params.valuesURL?t=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?t=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(t=this._uniqueColumnValues(this.params.valuesLookupField)),t instanceof Promise?(e||this._addPlaceholder(this.params.placeholderLoading),t.then().then(n=>this.listIteration===s?this._parseList(n):Promise.reject(s))):Promise.resolve(this._parseList(t))}_addPlaceholder(e){var t=document.createElement("div");typeof e=="function"&&(e=e(this.cell.getComponent(),this.listEl)),e&&(this._clearList(),e instanceof HTMLElement?t=e:(t.classList.add("tabulator-edit-list-placeholder"),t.innerHTML=e),this.listEl.appendChild(t),this._showList())}_ajaxRequest(e,t){var s=this.params.filterRemote?{term:t}:{};return e=jn(e,{},s),fetch(e).then(n=>n.ok?n.json().catch(a=>(console.warn("List Ajax Load Error - Invalid JSON returned",a),Promise.reject(a))):(console.error("List Ajax Load Error - Connection Error: "+n.status,n.statusText),Promise.reject(n))).catch(n=>(console.error("List Ajax Load Error - Connection Error: ",n),Promise.reject(n)))}_uniqueColumnValues(e){var t={},s=this.table.getData(this.params.valuesLookup),n;return e?n=this.table.columnManager.getColumnByField(e):n=this.cell.getColumn()._getSelf(),n?s.forEach(a=>{var l=n.getFieldValue(a);this._emptyValueCheck(l)||(this.params.multiselect&&Array.isArray(l)?l.forEach(h=>{this._emptyValueCheck(h)||(t[h]=!0)}):t[l]=!0)}):(console.warn("unable to find matching column to create select lookup list:",e),t=[]),Object.keys(t)}_emptyValueCheck(e){return e===null||typeof e>"u"||e===""}_parseList(e){var t=[];return Array.isArray(e)||(e=Object.entries(e).map(([s,n])=>({label:n,value:s}))),e.forEach(s=>{typeof s!="object"&&(s={label:s,value:s}),this._parseListItem(s,t,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=t,t}_parseListItem(e,t,s){var n={};e.options?n=this._parseListGroup(e,s+1):(n={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,selected:!1,visible:!0,level:s,original:e},this.initialValues&&this.initialValues.indexOf(e.value)>-1&&this._chooseItem(n,!0)),t.push(n)}_parseListGroup(e,t){var s={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,visible:!0,level:t,options:[],original:e};return e.options.forEach(n=>{this._parseListItem(n,s.options,t)}),s}_sortOptions(e){var t;return this.params.sort&&(t=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(t,e)),e}_sortGroup(e,t){t.sort((s,n)=>e(s.label,n.label,s.value,n.value,s.original,n.original)),t.forEach(s=>{s.group&&this._sortGroup(e,s.options)})}_defaultSortFunction(e,t){var s,n,a,l,h=0,d,f=/(\d+)|(\D+)/g,g=/\d/,b=0;if(this.params.sort==="desc"&&([e,t]=[t,e]),!e&&e!==0)b=!t&&t!==0?0:-1;else if(!t&&t!==0)b=1;else{if(isFinite(e)&&isFinite(t))return e-t;if(s=String(e).toLowerCase(),n=String(t).toLowerCase(),s===n)return 0;if(!(g.test(s)&&g.test(n)))return s>n?1:-1;for(s=s.match(f),n=n.match(f),d=s.length>n.length?n.length:s.length;h<d;)if(a=s[h],l=n[h++],a!==l)return isFinite(a)&&isFinite(l)?(a.charAt(0)==="0"&&(a="."+a),l.charAt(0)==="0"&&(l="."+l),a-l):a>l?1:-1;return s.length>n.length}return b}_filterOptions(){var e=this.params.filterFunc||this._defaultFilterFunc,t=this.input.value;return t?(this.filtered=!0,this.data.forEach(s=>{this._filterItem(e,t,s)})):this.filtered=!1,this.data}_filterItem(e,t,s){var n=!1;return s.group?(s.options.forEach(a=>{this._filterItem(e,t,a)&&(n=!0)}),s.visible=n):s.visible=e(t,s.label,s.value,s.original),s.visible}_defaultFilterFunc(e,t,s,n){return e=String(e).toLowerCase(),t!==null&&typeof t<"u"&&(String(t).toLowerCase().indexOf(e)>-1||String(s).toLowerCase().indexOf(e)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(e){this._clearList(),e.forEach(t=>{this._buildItem(t)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(e){var t=e.element,s;if(!this.filtered||e.visible){if(!t){if(t=document.createElement("div"),t.tabIndex=0,s=this.params.itemFormatter?this.params.itemFormatter(e.label,e.value,e.original,t):e.label,s instanceof HTMLElement?t.appendChild(s):t.innerHTML=s,e.group?t.classList.add("tabulator-edit-list-group"):t.classList.add("tabulator-edit-list-item"),t.classList.add("tabulator-edit-list-group-level-"+e.level),e.elementAttributes&&typeof e.elementAttributes=="object")for(let n in e.elementAttributes)n.charAt(0)=="+"?(n=n.slice(1),t.setAttribute(n,this.input.getAttribute(n)+e.elementAttributes["+"+n])):t.setAttribute(n,e.elementAttributes[n]);e.group?t.addEventListener("click",this._groupClick.bind(this,e)):t.addEventListener("click",this._itemClick.bind(this,e)),t.addEventListener("mousedown",this._preventBlur.bind(this)),e.element=t}this._styleItem(e),this.listEl.appendChild(t),e.group?e.options.forEach(n=>{this._buildItem(n)}):this.displayItems.push(e)}}_showList(){var e=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),e||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(e){e&&e.element&&(e.selected?e.element.classList.add("active"):e.element.classList.remove("active"))}_itemClick(e,t){t.stopPropagation(),this._chooseItem(e)}_groupClick(e,t){t.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(e=>{e.selected=!1,this._styleItem(e)}),this.currentItems=[],this.focusedItem=null}_chooseItem(e,t){var s;this.typing=!1,this.params.multiselect?(s=this.currentItems.indexOf(e),s>-1?(this.currentItems.splice(s,1),e.selected=!1):(this.currentItems.push(e),e.selected=!0),this.input.value=this.currentItems.map(n=>n.label).join(","),this._styleItem(e)):(this.currentItems=[e],e.selected=!0,this.input.value=e.label,this._styleItem(e),t||this._resolveValue()),this._focusItem(e)}_resolveValue(e){var t,s;if(this.popup&&this.popup.hide(!0),this.params.multiselect)t=this.currentItems.map(n=>n.value);else if(e&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")t=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?t=this.currentItems[0].value:(s=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,s===null||typeof s>"u"||s===""?t=s:t=this.params.emptyValue);t===""&&(t=this.params.emptyValue),this.actions.success(t),this.isFilter&&(this.initialValues=t&&!Array.isArray(t)?[t]:t,this.currentItems=[])}};function yo(c,e,t,s,n){var a=new Ro(this,c,e,t,s,n);return a.input}function To(c,e,t,s,n){var a=this,l=c.getElement(),h=c.getValue(),d=l.getElementsByTagName("svg").length||5,f=l.getElementsByTagName("svg")[0]?l.getElementsByTagName("svg")[0].getAttribute("width"):14,g=[],b=document.createElement("div"),v=document.createElementNS("http://www.w3.org/2000/svg","svg");function w(A){g.forEach(function(z,H){H<A?(a.table.browser=="ie"?z.setAttribute("class","tabulator-star-active"):z.classList.replace("tabulator-star-inactive","tabulator-star-active"),z.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(a.table.browser=="ie"?z.setAttribute("class","tabulator-star-inactive"):z.classList.replace("tabulator-star-active","tabulator-star-inactive"),z.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function y(A){var z=document.createElement("span"),H=v.cloneNode(!0);g.push(H),z.addEventListener("mouseenter",function(X){X.stopPropagation(),X.stopImmediatePropagation(),w(A)}),z.addEventListener("mousemove",function(X){X.stopPropagation(),X.stopImmediatePropagation()}),z.addEventListener("click",function(X){X.stopPropagation(),X.stopImmediatePropagation(),t(A),l.blur()}),z.appendChild(H),b.appendChild(z)}function R(A){h=A,w(A)}if(l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",b.style.verticalAlign="middle",b.style.display="inline-block",b.style.padding="4px",v.setAttribute("width",f),v.setAttribute("height",f),v.setAttribute("viewBox","0 0 512 512"),v.setAttribute("xml:space","preserve"),v.style.padding="0 1px",n.elementAttributes&&typeof n.elementAttributes=="object")for(let A in n.elementAttributes)A.charAt(0)=="+"?(A=A.slice(1),b.setAttribute(A,b.getAttribute(A)+n.elementAttributes["+"+A])):b.setAttribute(A,n.elementAttributes[A]);for(var x=1;x<=d;x++)y(x);return h=Math.min(parseInt(h),d),w(h),b.addEventListener("mousemove",function(A){w(0)}),b.addEventListener("click",function(A){t(0)}),l.addEventListener("blur",function(A){s()}),l.addEventListener("keydown",function(A){switch(A.keyCode){case 39:R(h+1);break;case 37:R(h-1);break;case 13:t(h);break;case 27:s();break}}),b}function Ao(c,e,t,s,n){var a=c.getElement(),l=typeof n.max>"u"?a.getElementsByTagName("div")[0]&&a.getElementsByTagName("div")[0].getAttribute("max")||100:n.max,h=typeof n.min>"u"?a.getElementsByTagName("div")[0]&&a.getElementsByTagName("div")[0].getAttribute("min")||0:n.min,d=(l-h)/100,f=c.getValue()||0,g=document.createElement("div"),b=document.createElement("div"),v,w;function y(){var R=window.getComputedStyle(a,null),x=d*Math.round(b.offsetWidth/((a.clientWidth-parseInt(R.getPropertyValue("padding-left"))-parseInt(R.getPropertyValue("padding-right")))/100))+h;t(x),a.setAttribute("aria-valuenow",x),a.setAttribute("aria-label",f)}if(g.style.position="absolute",g.style.right="0",g.style.top="0",g.style.bottom="0",g.style.width="5px",g.classList.add("tabulator-progress-handle"),b.style.display="inline-block",b.style.position="relative",b.style.height="100%",b.style.backgroundColor="#488CE9",b.style.maxWidth="100%",b.style.minWidth="0%",n.elementAttributes&&typeof n.elementAttributes=="object")for(let R in n.elementAttributes)R.charAt(0)=="+"?(R=R.slice(1),b.setAttribute(R,b.getAttribute(R)+n.elementAttributes["+"+R])):b.setAttribute(R,n.elementAttributes[R]);return a.style.padding="4px 4px",f=Math.min(parseFloat(f),l),f=Math.max(parseFloat(f),h),f=Math.round((f-h)/d),b.style.width=f+"%",a.setAttribute("aria-valuemin",h),a.setAttribute("aria-valuemax",l),b.appendChild(g),g.addEventListener("mousedown",function(R){v=R.screenX,w=b.offsetWidth}),g.addEventListener("mouseover",function(){g.style.cursor="ew-resize"}),a.addEventListener("mousemove",function(R){v&&(b.style.width=w+R.screenX-v+"px")}),a.addEventListener("mouseup",function(R){v&&(R.stopPropagation(),R.stopImmediatePropagation(),v=!1,w=!1,y())}),a.addEventListener("keydown",function(R){switch(R.keyCode){case 39:R.preventDefault(),b.style.width=b.clientWidth+a.clientWidth/100+"px";break;case 37:R.preventDefault(),b.style.width=b.clientWidth-a.clientWidth/100+"px";break;case 9:case 13:y();break;case 27:s();break}}),a.addEventListener("blur",function(){s()}),b}function Lo(c,e,t,s,n){var a=c.getValue(),l=document.createElement("input"),h=n.tristate,d=typeof n.indeterminateValue>"u"?null:n.indeterminateValue,f=!1,g=Object.keys(n).includes("trueValue"),b=Object.keys(n).includes("falseValue");if(l.setAttribute("type","checkbox"),l.style.marginTop="5px",l.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let w in n.elementAttributes)w.charAt(0)=="+"?(w=w.slice(1),l.setAttribute(w,l.getAttribute(w)+n.elementAttributes["+"+w])):l.setAttribute(w,n.elementAttributes[w]);l.value=a,h&&(typeof a>"u"||a===d||a==="")&&(f=!0,l.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&e(function(){c.getType()==="cell"&&l.focus({preventScroll:!0})}),l.checked=g?a===n.trueValue:a===!0||a==="true"||a==="True"||a===1;function v(w){var y=l.checked;return g&&y?y=n.trueValue:b&&!y&&(y=n.falseValue),h?w?f?d:y:l.checked&&!f?(l.checked=!1,l.indeterminate=!0,f=!0,d):(f=!1,y):y}return l.addEventListener("change",function(w){t(v())}),l.addEventListener("blur",function(w){t(v(!0))}),l.addEventListener("keydown",function(w){w.keyCode==13&&t(v()),w.keyCode==27&&s()}),l}function So(c,e,t,s,n){var a=c._getSelf().column,l,h,d;function f(g){var b=g.getValue(),v="input";switch(typeof b){case"number":v="number";break;case"boolean":v="tickCross";break;case"string":b.includes(`
`)&&(v="textarea");break}return v}return l=n.editorLookup?n.editorLookup(c):f(c),n.paramsLookup&&(d=typeof n.paramsLookup=="function"?n.paramsLookup(l,c):n.paramsLookup[l]),h=this.table.modules.edit.lookupEditor(l,a),h.call(this,c,e,t,s,d||{})}var xo={input:go,textarea:bo,number:vo,range:Co,date:Eo,time:wo,datetime:_o,list:yo,star:To,progress:Ao,tickCross:Lo,adaptable:So};const It=class It extends I{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=It.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(e){if(this.currentCell)return!0}keybindingNavigateNext(e){var t=this.currentCell,s=this.options("tabEndNewRow");t&&(this.navigateNext(t,e)||s&&(t.getElement().firstChild.blur(),this.invalidEdit||(s===!0?s=this.table.addRow({}):typeof s=="function"?s=this.table.addRow(s(t.row.getComponent())):s=this.table.addRow(Object.assign({},s)),s.then(()=>{setTimeout(()=>{t.getComponent().navigateNext()})}))))}cellIsEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(e){this.allowEdit(e)?e.getElement().classList.add("tabulator-editable"):e.getElement().classList.remove("tabulator-editable")}clearCellEdited(e){e||(e=this.table.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(t=>{this.table.modules.edit.clearEdited(t._getSelf())})}navigatePrev(e=this.currentCell,t){var s,n;if(e){if(t&&t.preventDefault(),s=this.navigateLeft(),s)return!0;if(n=this.table.rowManager.prevDisplayRow(e.row,!0),n&&(s=this.findPrevEditableCell(n,n.cells.length),s))return s.getComponent().edit(),!0}return!1}navigateNext(e=this.currentCell,t){var s,n;if(e){if(t&&t.preventDefault(),s=this.navigateRight(),s)return!0;if(n=this.table.rowManager.nextDisplayRow(e.row,!0),n&&(s=this.findNextEditableCell(n,-1),s))return s.getComponent().edit(),!0}return!1}navigateLeft(e=this.currentCell,t){var s,n;return e&&(t&&t.preventDefault(),s=e.getIndex(),n=this.findPrevEditableCell(e.row,s),n)?(n.getComponent().edit(),!0):!1}navigateRight(e=this.currentCell,t){var s,n;return e&&(t&&t.preventDefault(),s=e.getIndex(),n=this.findNextEditableCell(e.row,s),n)?(n.getComponent().edit(),!0):!1}navigateUp(e=this.currentCell,t){var s,n;return e&&(t&&t.preventDefault(),s=e.getIndex(),n=this.table.rowManager.prevDisplayRow(e.row,!0),n)?(n.cells[s].getComponent().edit(),!0):!1}navigateDown(e=this.currentCell,t){var s,n;return e&&(t&&t.preventDefault(),s=e.getIndex(),n=this.table.rowManager.nextDisplayRow(e.row,!0),n)?(n.cells[s].getComponent().edit(),!0):!1}findNextEditableCell(e,t){var s=!1;if(t<e.cells.length-1)for(var n=t+1;n<e.cells.length;n++){let a=e.cells[n];if(a.column.modules.edit&&Y.elVisible(a.getElement())&&this.allowEdit(a)){s=a;break}}return s}findPrevEditableCell(e,t){var s=!1;if(t>0)for(var n=t-1;n>=0;n--){let a=e.cells[n];if(a.column.modules.edit&&Y.elVisible(a.getElement())&&this.allowEdit(a)){s=a;break}}return s}initializeColumnCheck(e){typeof e.definition.editor<"u"&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}rowEditableCheck(e){e.getCells().forEach(t=>{t.column.modules.edit&&typeof t.column.modules.edit.check=="function"&&this.updateCellClass(t)})}initializeColumn(e){var t=Object.keys(e.definition).includes("editorEmptyValue"),s={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{},convertEmptyValues:t,editorEmptyValue:e.definition.editorEmptyValue,editorEmptyValueFunc:e.definition.editorEmptyValueFunc};s.editor=this.lookupEditor(e.definition.editor,e),s.editor&&(e.modules.edit=s)}lookupEditor(e,t){var s;switch(typeof e){case"string":this.editors[e]?s=this.editors[e]:console.warn("Editor Error - No such editor found: ",e);break;case"function":s=e;break;case"boolean":e===!0&&(typeof t.definition.formatter!="function"?this.editors[t.definition.formatter]?s=this.editors[t.definition.formatter]:s=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter));break}return s}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(e){var t=this.currentCell,s;if(this.invalidEdit=!1,t){for(this.currentCell=!1,s=t.getElement(),this.dispatch("edit-editor-clear",t,e),s.classList.remove("tabulator-editing");s.firstChild;)s.removeChild(s.firstChild);t.row.getElement().classList.remove("tabulator-editing"),t.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),(e.column.definition.editor=="textarea"||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,t),this.dispatch("edit-cancelled",e),this.dispatchExternal("cellEditCancelled",t)}}bindEditor(e){if(e.column.modules.edit){var t=this,s=e.getElement(!0);this.updateCellClass(e),s.setAttribute("tabindex",0),s.addEventListener("mousedown",function(n){n.button===2?n.preventDefault():t.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&s.addEventListener("dblclick",function(n){s.classList.contains("tabulator-editing")||(s.focus({preventScroll:!0}),t.edit(e,n,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&s.addEventListener("click",function(n){s.classList.contains("tabulator-editing")||(s.focus({preventScroll:!0}),t.edit(e,n,!1))}),this.options("editTriggerEvent")==="focus"&&s.addEventListener("focus",function(n){t.recursionBlock||t.edit(e,n,!1)})}}focusCellNoEvent(e,t){this.recursionBlock=!0,t&&this.table.browser==="ie"||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,t){this.focusCellNoEvent(e),this.edit(e,!1,t)}focusScrollAdjust(e){if(this.table.rowManager.getRenderMode()=="virtual"){var t=this.table.rowManager.element.scrollTop,s=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,n=e.row.getElement();n.offsetTop<t?this.table.rowManager.element.scrollTop-=t-n.offsetTop:n.offsetTop+n.offsetHeight>s&&(this.table.rowManager.element.scrollTop+=n.offsetTop+n.offsetHeight-s);var a=this.table.rowManager.element.scrollLeft,l=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,h=e.getElement();this.table.modExists("frozenColumns")&&(a+=parseInt(this.table.modules.frozenColumns.leftMargin||0),l-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(a-=parseInt(this.table.columnManager.renderer.vDomPadLeft),l-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),h.offsetLeft<a?this.table.rowManager.element.scrollLeft-=a-h.offsetLeft:h.offsetLeft+h.offsetWidth>l&&(this.table.rowManager.element.scrollLeft+=h.offsetLeft+h.offsetWidth-l)}}allowEdit(e){var t=!!e.column.modules.edit;if(e.column.modules.edit)switch(typeof e.column.modules.edit.check){case"function":e.row.initialized&&(t=e.column.modules.edit.check(e.getComponent()));break;case"string":t=!!e.row.data[e.column.modules.edit.check];break;case"boolean":t=e.column.modules.edit.check;break}return t}edit(e,t,s){var n=this,a=!0,l=function(){},h=e.getElement(),d=!1,f,g,b;if(this.currentCell){!this.invalidEdit&&this.currentCell!==e&&this.cancelEdit();return}function v(A){if(n.currentCell===e&&!d){var z=n.chain("edit-success",[e,A],!0,!0);return z===!0||n.table.options.validationMode==="highlight"?(d=!0,n.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,n.editedCells.indexOf(e)==-1&&n.editedCells.push(e),A=n.transformEmptyValues(A,e),e.setValue(A,!0),z===!0):(d=!0,n.invalidEdit=!0,n.focusCellNoEvent(e,!0),l(),setTimeout(()=>{d=!1},10),!1)}}function w(){n.currentCell===e&&!d&&n.cancelEdit()}function y(A){l=A}if(e.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(h),!1;if(t&&t.stopPropagation(),a=this.allowEdit(e),a||s){if(n.cancelEdit(),n.currentCell=e,this.focusScrollAdjust(e),g=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,t,g)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,g),this.dispatch("cell-editing",e),this.dispatchExternal("cellEditing",g),b=typeof e.column.modules.edit.params=="function"?e.column.modules.edit.params(g):e.column.modules.edit.params,f=e.column.modules.edit.editor.call(n,g,y,v,w,b),this.currentCell&&f!==!1)if(f instanceof Node){for(h.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-editing"),e.table.element.classList.add("tabulator-editing");h.firstChild;)h.removeChild(h.firstChild);h.appendChild(f),l();for(var R=h.children,x=0;x<R.length;x++)R[x].addEventListener("click",function(A){A.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",f),this.blur(h),!1;else return this.blur(h),!1;return!0}else return this.mouseClick=!1,this.blur(h),!1}emptyValueCheck(e){return e===""||e===null||typeof e>"u"}transformEmptyValues(e,t){var s=t.column.modules.edit,n=s.convertEmptyValues||this.convertEmptyValues,a;return n&&(a=s.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),a&&a(e)&&(e=s.convertEmptyValues?s.editorEmptyValue:this.options("editorEmptyValue"))),e}blur(e){this.confirm("edit-blur",[e])||e.blur()}getEditedCells(){var e=[];return this.editedCells.forEach(t=>{e.push(t.getComponent())}),e}clearEdited(e){var t;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,this.dispatch("edit-edited-clear",e)),t=this.editedCells.indexOf(e),t>-1&&this.editedCells.splice(t,1)}};S(It,"moduleName","edit"),S(It,"editors",xo);let ss=It;class Hn{constructor(e,t,s,n){this.type=e,this.columns=t,this.component=s||!1,this.indent=n||0}}class Yi{constructor(e,t,s,n,a){this.value=e,this.component=t||!1,this.width=s,this.height=n,this.depth=a}}var Mo={},Fo={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}};const Ge=class Ge extends I{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,t,s,n){var a,l,h,d;return this.cloneTableStyle=t,this.config=e||{},this.colVisProp=n,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),d=Ge.columnLookups[s],d&&(h=d.call(this.table),h=h.filter(f=>this.columnVisCheck(f))),a=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(h)):[],h&&(h=h.map(f=>f.getComponent())),l=this.bodyToExportRows(this.rowLookup(s),h),a.concat(l)}generateTable(e,t,s,n){var a=this.generateExportList(e,t,s,n);return this.generateTableElement(a)}rowLookup(e){var t=[],s;return typeof e=="function"?e.call(this.table).forEach(n=>{n=this.table.rowManager.findRow(n),n&&t.push(n)}):(s=Ge.rowLookups[e]||Ge.rowLookups.active,t=s.call(this.table)),Object.assign([],t)}generateColumnGroupHeaders(e){var t=[];return e||(e=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),e.forEach(s=>{var n=this.processColumnGroup(s);n&&t.push(n)}),t}processColumnGroup(e){var t=e.columns,s=0,n=e.definition["title"+this.colVisPropAttach]||e.definition.title,a={title:n,column:e,depth:1};if(t.length){if(a.subGroups=[],a.width=0,t.forEach(l=>{var h=this.processColumnGroup(l);h&&(a.width+=h.width,a.subGroups.push(h),h.depth>s&&(s=h.depth))}),a.depth+=s,!a.width)return!1}else if(this.columnVisCheck(e))a.width=1;else return!1;return a}columnVisCheck(e){var t=e.definition[this.colVisProp];return this.config.rowHeaders===!1&&e.isRowHeader?!1:(typeof t=="function"&&(t=t.call(this.table,e.getComponent())),t===!1||t===!0?t:e.visible&&e.field)}headersToExportRows(e){var t=[],s=0,n=[];function a(l,h){var d=s-h;if(typeof t[h]>"u"&&(t[h]=[]),l.height=l.subGroups?1:d-l.depth+1,t[h].push(l),l.height>1)for(let f=1;f<l.height;f++)typeof t[h+f]>"u"&&(t[h+f]=[]),t[h+f].push(!1);if(l.width>1)for(let f=1;f<l.width;f++)t[h].push(!1);l.subGroups&&l.subGroups.forEach(function(f){a(f,h+1)})}return e.forEach(function(l){l.depth>s&&(s=l.depth)}),e.forEach(function(l){a(l,0)}),t.forEach(l=>{var h=[];l.forEach(d=>{if(d){let f=typeof d.title>"u"?"":d.title;h.push(new Yi(f,d.column.getComponent(),d.width,d.height,d.depth))}else h.push(null)}),n.push(new Hn("header",h))}),n}bodyToExportRows(e,t=[]){var s=[];return t.length===0&&this.table.columnManager.columnsByIndex.forEach(n=>{this.columnVisCheck(n)&&t.push(n.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),e=e.filter(n=>{switch(n.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&n.modules.dataTree.parent)}return!0}),e.forEach((n,a)=>{var l=n.getData(this.colVisProp),h=[],d=0;switch(n.type){case"group":d=n.level,h.push(new Yi(n.key,n.getComponent(),t.length,1));break;case"calc":case"row":t.forEach(f=>{h.push(new Yi(f._column.getFieldValue(l),f,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(d=n.modules.dataTree.index);break}s.push(new Hn(n.type,h,n.getComponent(),d))}),s}generateTableElement(e){var t=document.createElement("table"),s=document.createElement("thead"),n=document.createElement("tbody"),a=this.lookupTableStyles(),l=this.table.options["rowFormatter"+this.colVisPropAttach],h={};return h.rowFormatter=l!==null?l:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(h.treeElementField=this.table.modules.dataTree.elementField),h.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],h.groupHeader&&!Array.isArray(h.groupHeader)&&(h.groupHeader=[h.groupHeader]),t.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),s,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((d,f)=>{let g;switch(d.type){case"header":s.appendChild(this.generateHeaderElement(d,h,a));break;case"group":n.appendChild(this.generateGroupElement(d,h,a));break;case"calc":n.appendChild(this.generateCalcElement(d,h,a));break;case"row":g=this.generateRowElement(d,h,a),this.mapElementStyles(f%2&&a.evenRow?a.evenRow:a.oddRow,g,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n.appendChild(g);break}}),s.innerHTML&&t.appendChild(s),t.appendChild(n),this.mapElementStyles(this.table.element,t,["border-top","border-left","border-right","border-bottom"]),t}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.styleRowHeader=e.firstRow.getElementsByClassName("tabulator-row-header")[0],e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}generateHeaderElement(e,t,s){var n=document.createElement("tr");return e.columns.forEach(a=>{if(a){var l=document.createElement("th"),h=a.component._column.definition.cssClass?a.component._column.definition.cssClass.split(" "):[];l.colSpan=a.width,l.rowSpan=a.height,l.innerHTML=a.value,this.cloneTableStyle&&(l.style.boxSizing="border-box"),h.forEach(function(d){l.classList.add(d)}),this.mapElementStyles(a.component.getElement(),l,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(a.component._column.contentElement,l,["padding-top","padding-left","padding-right","padding-bottom"]),a.component._column.visible?this.mapElementStyles(a.component.getElement(),l,["width"]):a.component._column.definition.width&&(l.style.width=a.component._column.definition.width+"px"),a.component._column.parent&&a.component._column.parent.isGroup?this.mapElementStyles(a.component._column.parent.groupElement,l,["border-top"]):this.mapElementStyles(a.component.getElement(),l,["border-top"]),a.component._column.isGroup?this.mapElementStyles(a.component.getElement(),l,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),l,["border-bottom"]),n.appendChild(l)}}),n}generateGroupElement(e,t,s){var n=document.createElement("tr"),a=document.createElement("td"),l=e.columns[0];return n.classList.add("tabulator-print-table-row"),t.groupHeader&&t.groupHeader[e.indent]?l.value=t.groupHeader[e.indent](l.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):t.groupHeader!==!1&&(l.value=e.component._group.generator(l.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)),a.colSpan=l.width,a.innerHTML=l.value,n.classList.add("tabulator-print-table-group"),n.classList.add("tabulator-group-level-"+e.indent),l.component.isVisible()&&n.classList.add("tabulator-group-visible"),this.mapElementStyles(s.firstGroup,n,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(s.firstGroup,a,["padding-top","padding-left","padding-right","padding-bottom"]),n.appendChild(a),n}generateCalcElement(e,t,s){var n=this.generateRowElement(e,t,s);return n.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(s.calcRow,n,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n}generateRowElement(e,t,s){var n=document.createElement("tr");if(n.classList.add("tabulator-print-table-row"),e.columns.forEach((a,l)=>{if(a){var h=document.createElement("td"),d=a.component._column,f=this.table,g=f.columnManager.findColumnIndex(d),b=a.value,v,w,y={modules:{},getValue:function(){return b},getField:function(){return d.definition.field},getElement:function(){return h},getType:function(){return"cell"},getColumn:function(){return d.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getTable:function(){return f},getComponent:function(){return y},column:d},R=d.definition.cssClass?d.definition.cssClass.split(" "):[];if(R.forEach(function(x){h.classList.add(x)}),this.table.modExists("format")&&this.config.formatCells!==!1)b=this.table.modules.format.formatExportValue(y,this.colVisProp);else switch(typeof b){case"object":b=b!==null?JSON.stringify(b):"";break;case"undefined":b="";break}b instanceof Node?h.appendChild(b):h.innerHTML=b,w=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],d.isRowHeader?(v=s.styleRowHeader,w.push("background-color")):v=s.styleCells&&s.styleCells[g]?s.styleCells[g]:s.firstCell,v&&(this.mapElementStyles(v,h,w),d.definition.align&&(h.style.textAlign=d.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(t.treeElementField&&t.treeElementField==d.field||!t.treeElementField&&l==0)&&(e.component._row.modules.dataTree.controlEl&&h.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),h.firstChild),e.component._row.modules.dataTree.branchEl&&h.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),h.firstChild)),n.appendChild(h),y.modules.format&&y.modules.format.renderedCallback&&y.modules.format.renderedCallback()}}),t.rowFormatter&&e.type==="row"&&this.config.formatCells!==!1){let a=Object.assign(e.component);a.getElement=function(){return n},t.rowFormatter(e.component)}return n}generateHTMLTable(e){var t=document.createElement("div");return t.appendChild(this.generateTableElement(e)),t.innerHTML}getHtml(e,t,s,n){var a=this.generateExportList(s||this.table.options.htmlOutputConfig,t,e,n||"htmlOutput");return this.generateHTMLTable(a)}mapElementStyles(e,t,s){if(this.cloneTableStyle&&e&&t){var n={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var a=window.getComputedStyle(e);s.forEach(function(l){t.style[n[l]]||(t.style[n[l]]=a.getPropertyValue(l))})}}}};S(Ge,"moduleName","export"),S(Ge,"columnLookups",Mo),S(Ge,"rowLookups",Fo);let ns=Ge;var Do={"=":function(c,e,t,s){return e==c},"<":function(c,e,t,s){return e<c},"<=":function(c,e,t,s){return e<=c},">":function(c,e,t,s){return e>c},">=":function(c,e,t,s){return e>=c},"!=":function(c,e,t,s){return e!=c},regex:function(c,e,t,s){return typeof c=="string"&&(c=new RegExp(c)),c.test(e)},like:function(c,e,t,s){return c===null||typeof c>"u"?e===c:typeof e<"u"&&e!==null?String(e).toLowerCase().indexOf(c.toLowerCase())>-1:!1},keywords:function(c,e,t,s){var n=c.toLowerCase().split(typeof s.separator>"u"?" ":s.separator),a=String(e===null||typeof e>"u"?"":e).toLowerCase(),l=[];return n.forEach(h=>{a.includes(h)&&l.push(!0)}),s.matchAll?l.length===n.length:!!l.length},starts:function(c,e,t,s){return c===null||typeof c>"u"?e===c:typeof e<"u"&&e!==null?String(e).toLowerCase().startsWith(c.toLowerCase()):!1},ends:function(c,e,t,s){return c===null||typeof c>"u"?e===c:typeof e<"u"&&e!==null?String(e).toLowerCase().endsWith(c.toLowerCase()):!1},in:function(c,e,t,s){return Array.isArray(c)?c.length?c.indexOf(e)>-1:!0:(console.warn("Filter Error - filter value is not an array:",c),!1)}};const ke=class ke extends I{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var t=this.table.columnManager.findColumn(e.field);if(t)this.setHeaderFilterValue(t,e.value);else return console.warn("Column Filter Error - No matching column found:",e.field),!1}),this.tableInitialized=!0}remoteFilterParams(e,t,s,n){return n.filter=this.getFilters(!0,!0),n}generatePlaceholder(e){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(e,t,s,n){this.setFilter(e,t,s,n),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,t,s,n){this.addFilter(e,t,s,n),this.refreshFilter()}userSetHeaderFilterFocus(e){var t=this.table.columnManager.findColumn(e);if(t)this.setHeaderFilterFocus(t);else return console.warn("Column Filter Focus Error - No matching column found:",e),!1}userGetHeaderFilterValue(e){var t=this.table.columnManager.findColumn(e);if(t)return this.getHeaderFilterValue(t);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,t){var s=this.table.columnManager.findColumn(e);if(s)this.setHeaderFilterValue(s,t);else return console.warn("Column Filter Error - No matching column found:",e),!1}userRemoveFilter(e,t,s){this.removeFilter(e,t,s),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,t,s){return this.search("rows",e,t,s)}searchData(e,t,s){return this.search("data",e,t,s)}initializeColumnHeaderFilter(e){var t=e.definition;t.headerFilter&&this.initializeColumn(e)}initializeColumn(e,t){var s=this,n=e.getField();function a(l){var h=e.modules.filter.tagType=="input"&&e.modules.filter.attrType=="text"||e.modules.filter.tagType=="textarea"?"partial":"match",d="",f="",g;if(typeof e.modules.filter.prevSuccess>"u"||e.modules.filter.prevSuccess!==l){if(e.modules.filter.prevSuccess=l,e.modules.filter.emptyFunc(l))delete s.headerFilters[n];else{switch(e.modules.filter.value=l,typeof e.definition.headerFilterFunc){case"string":ke.filters[e.definition.headerFilterFunc]?(d=e.definition.headerFilterFunc,g=function(b){var v=e.definition.headerFilterFuncParams||{},w=e.getFieldValue(b);return v=typeof v=="function"?v(l,w,b):v,ke.filters[e.definition.headerFilterFunc](l,w,b,v)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":g=function(b){var v=e.definition.headerFilterFuncParams||{},w=e.getFieldValue(b);return v=typeof v=="function"?v(l,w,b):v,e.definition.headerFilterFunc(l,w,b,v)},d=g;break}if(!g)switch(h){case"partial":g=function(b){var v=e.getFieldValue(b);return typeof v<"u"&&v!==null?String(v).toLowerCase().indexOf(String(l).toLowerCase())>-1:!1},d="like";break;default:g=function(b){return e.getFieldValue(b)==l},d="="}s.headerFilters[n]={value:l,func:g,type:d}}e.modules.filter.value=l,f=JSON.stringify(s.headerFilters),s.prevHeaderFilterChangeCheck!==f&&(s.prevHeaderFilterChangeCheck=f,s.trackChanges(),s.refreshFilter())}return!0}e.modules.filter={success:a,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,t,s){var n=this,a=e.modules.filter.success,l=e.getField(),h,d,f,g,b,v,w,y;e.modules.filter.value=t;function R(){}function x(A){y=A}if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),l){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(A){return!A&&A!==0},h=document.createElement("div"),h.classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":n.table.modules.edit.editors[e.definition.headerFilter]?(d=n.table.modules.edit.editors[e.definition.headerFilter],(e.definition.headerFilter==="tick"||e.definition.headerFilter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(A){return A!==!0&&A!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":d=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?d=e.modules.edit.editor:e.definition.formatter&&n.table.modules.edit.editors[e.definition.formatter]?(d=n.table.modules.edit.editors[e.definition.formatter],(e.definition.formatter==="tick"||e.definition.formatter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(A){return A!==!0&&A!==!1})):d=n.table.modules.edit.editors.input;break}if(d){if(g={getValue:function(){return typeof t<"u"?t:""},getField:function(){return e.definition.field},getElement:function(){return h},getColumn:function(){return e.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},w=e.definition.headerFilterParams||{},w=typeof w=="function"?w.call(n.table,g):w,f=d.call(this.table.modules.edit,g,x,a,R,w),!f){console.warn("Filter Error - Cannot add filter to "+l+" column, editor returned a value of false");return}if(!(f instanceof Node)){console.warn("Filter Error - Cannot add filter to "+l+" column, editor should return an instance of Node, the editor returned:",f);return}n.langBind("headerFilters|columns|"+e.definition.field,function(A){f.setAttribute("placeholder",typeof A<"u"&&A?A:e.definition.headerFilterPlaceholder||n.langText("headerFilters|default"))}),f.addEventListener("click",function(A){A.stopPropagation(),f.focus()}),f.addEventListener("focus",A=>{var z=this.table.columnManager.contentsElement.scrollLeft,H=this.table.rowManager.element.scrollLeft;z!==H&&(this.table.rowManager.scrollHorizontal(z),this.table.columnManager.scrollHorizontal(z))}),b=!1,v=function(A){b&&clearTimeout(b),b=setTimeout(function(){a(f.value)},n.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=f,e.modules.filter.attrType=f.hasAttribute("type")?f.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=f.tagName.toLowerCase(),e.definition.headerFilterLiveFilter!==!1&&(e.definition.headerFilter==="autocomplete"||e.definition.headerFilter==="tickCross"||(e.definition.editor==="autocomplete"||e.definition.editor==="tickCross")&&e.definition.headerFilter===!0||(f.addEventListener("keyup",v),f.addEventListener("search",v),e.modules.filter.attrType=="number"&&f.addEventListener("change",function(A){a(f.value)}),e.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&f.setAttribute("type","search")),(e.modules.filter.tagType=="input"||e.modules.filter.tagType=="select"||e.modules.filter.tagType=="textarea")&&f.addEventListener("mousedown",function(A){A.stopPropagation()})),h.appendChild(f),e.contentElement.appendChild(h),s||n.headerFilterColumns.push(e),y&&y()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,t){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,t,!0),e.modules.filter.success(t)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,t,s,n){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:t,value:s,params:n}]),this.addFilter(e)}addFilter(e,t,s,n){var a=!1;Array.isArray(e)||(e=[{field:e,type:t,value:s,params:n}]),e.forEach(l=>{l=this.findFilter(l),l&&(this.filterList.push(l),a=!0)}),a&&this.trackChanges()}findFilter(e){var t;if(Array.isArray(e))return this.findSubFilters(e);var s=!1;return typeof e.field=="function"?s=function(n){return e.field(n,e.type||{})}:ke.filters[e.type]?(t=this.table.columnManager.getColumnByField(e.field),t?s=function(n){return ke.filters[e.type](e.value,t.getFieldValue(n),n,e.params||{})}:s=function(n){return ke.filters[e.type](e.value,n[e.field],n,e.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=s,e.func?e:!1}findSubFilters(e){var t=[];return e.forEach(s=>{s=this.findFilter(s),s&&t.push(s)}),t.length?t:!1}getFilters(e,t){var s=[];return e&&(s=this.getHeaderFilters()),t&&s.forEach(function(n){typeof n.type=="function"&&(n.type="function")}),s=s.concat(this.filtersToArray(this.filterList,t)),s}filtersToArray(e,t){var s=[];return e.forEach(n=>{var a;Array.isArray(n)?s.push(this.filtersToArray(n,t)):(a={field:n.field,type:n.type,value:n.value},t&&typeof a.type=="function"&&(a.type="function"),s.push(a))}),s}getHeaderFilters(){var e=[];for(var t in this.headerFilters)e.push({field:t,type:this.headerFilters[t].type,value:this.headerFilters[t].value});return e}removeFilter(e,t,s){Array.isArray(e)||(e=[{field:e,type:t,value:s}]),e.forEach(n=>{var a=-1;typeof n.field=="object"?a=this.filterList.findIndex(l=>n===l):a=this.filterList.findIndex(l=>n.field===l.field&&n.type===l.type&&n.value===l.value),a>-1?this.filterList.splice(a,1):console.warn("Filter Error - No matching filter type found, ignoring: ",n.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{typeof e.modules.filter.value<"u"&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,t,s,n){var a=[],l=[];return Array.isArray(t)||(t=[{field:t,type:s,value:n}]),t.forEach(h=>{h=this.findFilter(h),h&&l.push(h)}),this.table.rowManager.rows.forEach(h=>{var d=!0;l.forEach(f=>{this.filterRecurse(f,h.getData())||(d=!1)}),d&&a.push(e==="data"?h.getData("data"):h.getComponent())}),a}filter(e,t){var s=[],n=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(a=>{this.filterRow(a)&&s.push(a)}):s=e.slice(0),this.subscribedExternal("dataFiltered")&&(s.forEach(a=>{n.push(a.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),n)),s}filterRow(e,t){var s=!0,n=e.getData();this.filterList.forEach(l=>{this.filterRecurse(l,n)||(s=!1)});for(var a in this.headerFilters)this.headerFilters[a].func(n)||(s=!1);return s}filterRecurse(e,t){var s=!1;return Array.isArray(e)?e.forEach(n=>{this.filterRecurse(n,t)&&(s=!0)}):s=e.func(t),s}};S(ke,"moduleName","filter"),S(ke,"filters",Do);let rs=ke;function Bo(c,e,t){return this.emptyToSpace(this.sanitizeHTML(c.getValue()))}function Uo(c,e,t){return c.getValue()}function Po(c,e,t){return c.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(c.getValue()))}function ko(c,e,t){var s=parseFloat(c.getValue()),n="",a,l,h,d,f,g=e.decimal||".",b=e.thousand||",",v=e.negativeSign||"-",w=e.symbol||"",y=!!e.symbolAfter,R=typeof e.precision<"u"?e.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(c.getValue()));if(s<0&&(s=Math.abs(s),n=v),a=R!==!1?s.toFixed(R):s,a=String(a).split("."),l=a[0],h=a.length>1?g+a[1]:"",e.thousand!==!1)for(d=/(\d+)(\d{3})/;d.test(l);)l=l.replace(d,"$1"+b+"$2");return f=l+h,n===!0?(f="("+f+")",y?f+w:w+f):y?n+f+w:n+w+f}function Oo(c,e,t){var s=c.getValue(),n=e.urlPrefix||"",a=e.download,l=s,h=document.createElement("a"),d;function f(g,b){var v=g.shift(),w=b[v];return g.length&&typeof w=="object"?f(g,w):w}if(e.labelField&&(d=c.getData(),l=f(e.labelField.split(this.table.options.nestedFieldSeparator),d)),e.label)switch(typeof e.label){case"string":l=e.label;break;case"function":l=e.label(c);break}if(l){if(e.urlField&&(d=c.getData(),s=Y.retrieveNestedData(this.table.options.nestedFieldSeparator,e.urlField,d)),e.url)switch(typeof e.url){case"string":s=e.url;break;case"function":s=e.url(c);break}return h.setAttribute("href",n+s),e.target&&h.setAttribute("target",e.target),e.download&&(typeof a=="function"?a=a(c):a=a===!0?"":a,h.setAttribute("download",a)),h.innerHTML=this.emptyToSpace(this.sanitizeHTML(l)),h}else return"&nbsp;"}function Io(c,e,t){var s=document.createElement("img"),n=c.getValue();switch(e.urlPrefix&&(n=e.urlPrefix+c.getValue()),e.urlSuffix&&(n=n+e.urlSuffix),s.setAttribute("src",n),typeof e.height){case"number":s.style.height=e.height+"px";break;case"string":s.style.height=e.height;break}switch(typeof e.width){case"number":s.style.width=e.width+"px";break;case"string":s.style.width=e.width;break}return s.addEventListener("load",function(){c.getRow().normalizeHeight()}),s}function No(c,e,t){var s=c.getValue(),n=c.getElement(),a=e.allowEmpty,l=e.allowTruthy,h=Object.keys(e).includes("trueValue"),d=typeof e.tickElement<"u"?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',f=typeof e.crossElement<"u"?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return h&&s===e.trueValue||!h&&(l&&s||s===!0||s==="true"||s==="True"||s===1||s==="1")?(n.setAttribute("aria-checked",!0),d||""):a&&(s==="null"||s===""||s===null||typeof s>"u")?(n.setAttribute("aria-checked","mixed"),""):(n.setAttribute("aria-checked",!1),f||"")}function zo(c,e,t){var s=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),n=e.inputFormat||"yyyy-MM-dd HH:mm:ss",a=e.outputFormat||"dd/MM/yyyy HH:mm:ss",l=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",h=c.getValue();if(typeof s<"u"){var d;return s.isDateTime(h)?d=h:n==="iso"?d=s.fromISO(String(h)):d=s.fromFormat(String(h),n),d.isValid?(e.timezone&&(d=d.setZone(e.timezone)),d.toFormat(a)):l===!0||!h?h:typeof l=="function"?l(h):l}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function Ho(c,e,t){var s=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),n=e.inputFormat||"yyyy-MM-dd HH:mm:ss",a=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",l=typeof e.suffix<"u"?e.suffix:!1,h=typeof e.unit<"u"?e.unit:"days",d=typeof e.humanize<"u"?e.humanize:!1,f=typeof e.date<"u"?e.date:s.now(),g=c.getValue();if(typeof s<"u"){var b;return s.isDateTime(g)?b=g:n==="iso"?b=s.fromISO(String(g)):b=s.fromFormat(String(g),n),b.isValid?d?b.diff(f,h).toHuman()+(l?" "+l:""):parseInt(b.diff(f,h)[h])+(l?" "+l:""):a===!0?g:typeof a=="function"?a(g):a}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function Ko(c,e,t){var s=c.getValue();return typeof e[s]>"u"?(console.warn("Missing display value for "+s),s):e[s]}function Go(c,e,t){var s=c.getValue(),n=c.getElement(),a=e&&e.stars?e.stars:5,l=document.createElement("span"),h=document.createElementNS("http://www.w3.org/2000/svg","svg"),d='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',f='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';l.style.verticalAlign="middle",h.setAttribute("width","14"),h.setAttribute("height","14"),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",s=s&&!isNaN(s)?parseInt(s):0,s=Math.max(0,Math.min(s,a));for(var g=1;g<=a;g++){var b=h.cloneNode(!0);b.innerHTML=g<=s?d:f,l.appendChild(b)}return n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.setAttribute("aria-label",s),l}function Vo(c,e,t){var s=this.sanitizeHTML(c.getValue())||0,n=document.createElement("span"),a=e&&e.max?e.max:100,l=e&&e.min?e.min:0,h=e&&typeof e.color<"u"?e.color:["red","orange","green"],d="#666666",f,g;if(!(isNaN(s)||typeof c.getValue()>"u")){switch(n.classList.add("tabulator-traffic-light"),g=parseFloat(s)<=a?parseFloat(s):a,g=parseFloat(g)>=l?parseFloat(g):l,f=(a-l)/100,g=Math.round((g-l)/f),typeof h){case"string":d=h;break;case"function":d=h(s);break;case"object":if(Array.isArray(h)){var b=100/h.length,v=Math.floor(g/b);v=Math.min(v,h.length-1),v=Math.max(v,0),d=h[v];break}}return n.style.backgroundColor=d,n}}function Wo(c,e={},t){var s=this.sanitizeHTML(c.getValue())||0,n=c.getElement(),a=e.max?e.max:100,l=e.min?e.min:0,h=e.legendAlign?e.legendAlign:"center",d,f,g,b,v;switch(f=parseFloat(s)<=a?parseFloat(s):a,f=parseFloat(f)>=l?parseFloat(f):l,d=(a-l)/100,f=Math.round((f-l)/d),typeof e.color){case"string":g=e.color;break;case"function":g=e.color(s);break;case"object":if(Array.isArray(e.color)){let x=100/e.color.length,A=Math.floor(f/x);A=Math.min(A,e.color.length-1),A=Math.max(A,0),g=e.color[A];break}default:g="#2DC214"}switch(typeof e.legend){case"string":b=e.legend;break;case"function":b=e.legend(s);break;case"boolean":b=s;break;default:b=!1}switch(typeof e.legendColor){case"string":v=e.legendColor;break;case"function":v=e.legendColor(s);break;case"object":if(Array.isArray(e.legendColor)){let x=100/e.legendColor.length,A=Math.floor(f/x);A=Math.min(A,e.legendColor.length-1),A=Math.max(A,0),v=e.legendColor[A]}break;default:v="#000"}n.style.minWidth="30px",n.style.position="relative",n.setAttribute("aria-label",f);var w=document.createElement("div");w.style.display="inline-block",w.style.width=f+"%",w.style.backgroundColor=g,w.style.height="100%",w.setAttribute("data-max",a),w.setAttribute("data-min",l);var y=document.createElement("div");if(y.style.position="relative",y.style.width="100%",y.style.height="100%",b){var R=document.createElement("div");R.style.position="absolute",R.style.top=0,R.style.left=0,R.style.textAlign=h,R.style.width="100%",R.style.color=v,R.innerHTML=b}return t(function(){if(!(c instanceof Zn)){var x=document.createElement("div");x.style.position="absolute",x.style.top="4px",x.style.bottom="4px",x.style.left="4px",x.style.right="4px",n.appendChild(x),n=x}n.appendChild(y),y.appendChild(w),b&&y.appendChild(R)}),""}function jo(c,e,t){return c.getElement().style.backgroundColor=this.sanitizeHTML(c.getValue()),""}function Zo(c,e,t){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function Yo(c,e,t){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function qo(c,e,t){var s=c.getValue(),n=e.size||15,a=n+"px",l,h,d=e.hasOwnProperty("onValue")?e.onValue:!0,f=e.hasOwnProperty("offValue")?e.offValue:!1,g=e.onTruthy?s:s===d;return l=document.createElement("div"),l.classList.add("tabulator-toggle"),g?(l.classList.add("tabulator-toggle-on"),l.style.flexDirection="row-reverse",e.onColor&&(l.style.background=e.onColor)):e.offColor&&(l.style.background=e.offColor),l.style.width=2.5*n+"px",l.style.borderRadius=a,e.clickable&&l.addEventListener("click",b=>{c.setValue(g?f:d)}),h=document.createElement("div"),h.classList.add("tabulator-toggle-switch"),h.style.height=a,h.style.width=a,h.style.borderRadius=a,l.appendChild(h),l}function Xo(c,e,t){var s=document.createElement("span"),n=c.getRow(),a=c.getTable();return n.watchPosition(l=>{e.relativeToPage&&(l+=a.modules.page.getPageSize()*(a.modules.page.getPage()-1)),s.innerText=l}),s}function Jo(c,e,t){return c.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function Qo(c,e,t){var s,n,a;function l(h){var d=h.getValue(),f="plaintext";switch(typeof d){case"boolean":f="tickCross";break;case"string":d.includes(`
`)&&(f="textarea");break}return f}return s=e.formatterLookup?e.formatterLookup(c):l(c),e.paramsLookup&&(a=typeof e.paramsLookup=="function"?e.paramsLookup(s,c):e.paramsLookup[s]),n=this.table.modules.format.lookupFormatter(s),n.call(this,c,a||{},t)}function $o(c,e,t){var s=e.delimiter||",",n=c.getValue(),a=this.table,l;return e.valueMap&&(typeof e.valueMap=="string"?l=function(h){return h.map(d=>Y.retrieveNestedData(a.options.nestedFieldSeparator,e.valueMap,d))}:l=e.valueMap),Array.isArray(n)?(l&&(n=l(n)),n.join(s)):n}function el(c,e,t){var s=e.indent||"	",n=typeof e.multiline>"u"?!0:e.multiline,a=e.replacer||null,l=c.getValue();return n&&(c.getElement().style.whiteSpace="pre-wrap"),JSON.stringify(l,a,s)}var tl={plaintext:Bo,html:Uo,textarea:Po,money:ko,link:Oo,image:Io,tickCross:No,datetime:zo,datetimediff:Ho,lookup:Ko,star:Go,traffic:Vo,progress:Wo,color:jo,buttonTick:Zo,buttonCross:Yo,toggle:qo,rownum:Xo,handle:Jo,adaptable:Qo,array:$o,json:el};const Ve=class Ve extends I{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupTypeFormatter(e,""),typeof e.definition.formatterPrint<"u"&&(e.modules.format.print=this.lookupTypeFormatter(e,"Print")),typeof e.definition.formatterClipboard<"u"&&(e.modules.format.clipboard=this.lookupTypeFormatter(e,"Clipboard")),typeof e.definition.formatterHtmlOutput<"u"&&(e.modules.format.htmlOutput=this.lookupTypeFormatter(e,"HtmlOutput"))}lookupTypeFormatter(e,t){var s={params:e.definition["formatter"+t+"Params"]||{}},n=e.definition["formatter"+t];return s.formatter=this.lookupFormatter(n),s}lookupFormatter(e){var t;switch(typeof e){case"string":Ve.formatters[e]?t=Ve.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),t=Ve.formatters.plaintext);break;case"function":t=e;break;default:t=Ve.formatters.plaintext;break}return t}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,t,s){var n,a,l,h;return e.definition.titleFormatter?(n=this.lookupFormatter(e.definition.titleFormatter),l=d=>{e.titleFormatterRendered=d},h={getValue:function(){return t},getElement:function(){return s},getType:function(){return"header"},getColumn:function(){return e.getComponent()},getTable:()=>this.table},a=e.definition.titleFormatterParams||{},a=typeof a=="function"?a():a,n.call(this,h,a,l)):t}formatValue(e){var t=e.getComponent(),s=typeof e.column.modules.format.params=="function"?e.column.modules.format.params(t):e.column.modules.format.params;function n(a){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=a,e.modules.format.rendered=!1}return e.column.modules.format.formatter.call(this,t,s,n)}formatExportValue(e,t){var s=e.column.modules.format[t],n;if(s){let l=function(h){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=h,e.modules.format.rendered=!1};var a=l;return n=typeof s.params=="function"?s.params(e.getComponent()):s.params,s.formatter.call(this,e.getComponent(),n,l)}else return this.formatValue(e)}sanitizeHTML(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,function(s){return t[s]})}else return e}emptyToSpace(e){return e===null||typeof e>"u"||e===""?"&nbsp;":e}};S(Ve,"moduleName","format"),S(Ve,"formatters",tl);let as=Ve;class Jn extends I{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(e){this.layoutElement(e.element,e.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(e=>{this.initializeColumn(e)}),this.layout()}initializeColumn(e){var t={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(t.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=t):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(t=>{t.calcs.top&&this.layoutRow(t.calcs.top),t.calcs.bottom&&this.layoutRow(t.calcs.bottom),t.groupList&&t.groupList.length&&this.layoutGroupCalcs(t.groupList)})}layoutColumnPosition(e){var t=[],s=0,n=0;this.leftColumns.forEach((a,l)=>{if(a.modules.frozen.marginValue=s,a.modules.frozen.margin=a.modules.frozen.marginValue+"px",a.visible&&(s+=a.getWidth()),l==this.leftColumns.length-1?a.modules.frozen.edge=!0:a.modules.frozen.edge=!1,a.parent.isGroup){var h=this.getColGroupParentElement(a);t.includes(h)||(this.layoutElement(h,a),t.push(h)),h.classList.toggle("tabulator-frozen-left",a.modules.frozen.edge&&a.modules.frozen.position==="left"),h.classList.toggle("tabulator-frozen-right",a.modules.frozen.edge&&a.modules.frozen.position==="right")}else this.layoutElement(a.getElement(),a);e&&a.cells.forEach(d=>{this.layoutElement(d.getElement(!0),a)})}),this.rightColumns.forEach((a,l)=>{a.modules.frozen.marginValue=n,a.modules.frozen.margin=a.modules.frozen.marginValue+"px",a.visible&&(n+=a.getWidth()),l==this.rightColumns.length-1?a.modules.frozen.edge=!0:a.modules.frozen.edge=!1,a.parent.isGroup?this.layoutElement(this.getColGroupParentElement(a),a):this.layoutElement(a.getElement(),a),e&&a.cells.forEach(h=>{this.layoutElement(h.getElement(!0),a)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var e=this.table.rowManager.getVisibleRows(!0),t=this.table.rowManager.getRows().filter(s=>!e.includes(s));t.forEach(s=>{s.deinitialize()}),e.forEach(s=>{s.type==="row"&&this.layoutRow(s)})}layoutRow(e){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(t=>{var s=e.getCell(t);s&&this.layoutElement(s.getElement(!0),t)}),this.rightColumns.forEach(t=>{var s=e.getCell(t);s&&this.layoutElement(s.getElement(!0),t)})}layoutElement(e,t){var s;t.modules.frozen&&e&&(e.style.position="sticky",this.table.rtl?s=t.modules.frozen.position==="left"?"right":"left":s=t.modules.frozen.position,e.style[s]=t.modules.frozen.margin,e.classList.add("tabulator-frozen"),e.classList.toggle("tabulator-frozen-left",t.modules.frozen.edge&&t.modules.frozen.position==="left"),e.classList.toggle("tabulator-frozen-right",t.modules.frozen.edge&&t.modules.frozen.position==="right"))}adjustForScrollbar(e){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+e+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(e,t){var s=0;for(let n=0;n<t;n++)e[n].visible&&(s+=e[n].getWidth());return s}}S(Jn,"moduleName","frozenColumns");class Qn extends I{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var e=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(e=>{this.initializeRow(e)})}initializeRow(e){var t=this.table.options.frozenRows,s=typeof t;s==="number"?e.getPosition()&&e.getPosition()+this.rows.length<=t&&this.freezeRow(e):s==="function"?t.call(this.table,e.getComponent())&&this.freezeRow(e):Array.isArray(t)&&t.includes(e.data[this.options("frozenRowsField")])&&this.freezeRow(e)}isRowFrozen(e){var t=this.rows.indexOf(e);return t>-1}isFrozen(){return!!this.rows.length}visibleRows(e,t){return this.rows.forEach(s=>{t.push(s)}),t}getRows(e){var t=e.slice(0);return this.rows.forEach(function(s){var n=t.indexOf(s);n>-1&&t.splice(n,1)}),t}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.rows.push(e),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(e){e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var t=this.rows.indexOf(e);if(t>-1){var s=e.getElement();s.parentNode&&s.parentNode.removeChild(s),this.rows.splice(t,1)}}styleRows(e){this.rows.forEach((t,s)=>{this.table.rowManager.styleRow(t,s)})}}S(Qn,"moduleName","frozenRows");class il{constructor(e){return this._group=e,this.type="GroupComponent",new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._group.groupManager.table.componentFunctionBinder.handle("group",t._group,s)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(e,t){return this._group.groupManager.table.rowManager.scrollToRow(this._group,e,t)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class ft{constructor(e,t,s,n,a,l,h){this.groupManager=e,this.parent=t,this.key=n,this.level=s,this.field=a,this.hasSubGroups=s<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=h,this.rows=[],this.groups=[],this.groupList=[],this.generator=l,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=h?h.visible:typeof e.startOpen[s]<"u"?e.startOpen[s]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(e){e||(this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):this.rows.forEach(t=>{t.modules&&delete t.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach(t=>{this._createGroup(t,e)})}addBindings(){var e;this.groupManager.table.options.groupToggleElement&&(e=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,e.addEventListener("click",t=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(t.stopPropagation(),t.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(e,t){var s=t+"_"+e,n=new ft(this.groupManager,this,t,e,this.groupManager.groupIDLookups[t].field,this.groupManager.headerGenerator[t]||this.groupManager.headerGenerator[0],this.old?this.old.groups[s]:!1);this.groups[s]=n,this.groupList.push(n)}_addRowToGroup(e){var t=this.level+1;if(this.hasSubGroups){var s=this.groupManager.groupIDLookups[t].func(e.getData()),n=t+"_"+s;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]?this.groups[n]&&this.groups[n].addRow(e):(this.groups[n]||this._createGroup(s,t),this.groups[n].addRow(e))}}_addRow(e){this.rows.push(e),e.modules.group=this}insertRow(e,t,s){var n=this.conformRowData({});e.updateData(n);var a=this.rows.indexOf(t);a>-1?s?this.rows.splice(a+1,0,e):this.rows.splice(a,0,e):s?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(e){this.arrowElement&&(this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(t){t.scrollHeader(e)}))}getRowIndex(e){}conformRowData(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e}removeRow(e){var t=this.rows.indexOf(e),s=e.getElement();t>-1&&this.rows.splice(t,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(s.parentNode&&s.parentNode.removeChild(s),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(e){var t=e.level+"_"+e.key,s;this.groups[t]&&(delete this.groups[t],s=this.groupList.indexOf(e),s>-1&&this.groupList.splice(s,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var e=[];return e.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(t){e=e.concat(t.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))),e}getData(e,t){var s=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach(n=>{s.push(n.getData(t||"data"))}),s}getRowCount(){var e=0;return this.groupList.length?this.groupList.forEach(t=>{e+=t.getRowCount()}):e=this.rows.length,e}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(e=>{var t=e.getHeadersAndRows();t.forEach(s=>{s.detachElement()})}):this.rows.forEach(e=>{var t=e.getElement();t.parentNode.removeChild(t)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var e=this.generateElement();this.groupList.length?this.groupList.forEach(t=>{var s=t.getHeadersAndRows();s.forEach(n=>{var a=n.getElement();e.parentNode.insertBefore(a,e.nextSibling),n.initialize(),e=a})}):this.rows.forEach(t=>{var s=t.getElement();e.parentNode.insertBefore(s,e.nextSibling),t.initialize(),e=s}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var e=[];typeof this.visible=="function"&&(this.rows.forEach(function(t){e.push(t.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))}getRowGroup(e){var t=!1;return this.groupList.length?this.groupList.forEach(function(s){var n=s.getRowGroup(e);n&&(t=n)}):this.rows.find(function(s){return s===e})&&(t=this),t}getSubGroups(e){var t=[];return this.groupList.forEach(function(s){t.push(e?s.getComponent():s)}),t}getRows(e,t){var s=[];return t&&this.groupList.length?this.groupList.forEach(n=>{s=s.concat(n.getRows(e,t))}):this.rows.forEach(function(n){s.push(e?n.getComponent():n)}),s}generateGroupHeaderContents(){var e=[],t=this.getRows(!1,!0);for(t.forEach(function(s){e.push(s.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(e=[]){return e.unshift(this.key),this.parent&&this.parent.getPath(e),e}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(e){(!this.initialized||e)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Y.elVisible(this.element)&&this.initialize(!0)}setHeight(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new il(this)),this.component}}class $n extends I{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,t=this.table.options.groupStartOpen,s=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(s)&&e.length>s.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(a,l)=>{this.headerGenerator[0]=(h,d,f)=>(typeof h>"u"?"":h)+"<span>("+d+" "+(d===1?a:l.groups.items)+")</span>"}),this.groupIDLookups=[],e)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var n=this.table.columnManager.getRealColumns();n.forEach(a=>{a.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),a.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(e)||(e=[e]),e.forEach((a,l)=>{var h,d;typeof a=="function"?h=a:(d=this.table.columnManager.getColumnByField(a),d?h=function(f){return d.getFieldValue(f)}:h=function(f){return f[a]}),this.groupIDLookups.push({field:typeof a=="function"?!1:a,func:h,values:this.allowedValues?this.allowedValues[l]:!1})}),t&&(Array.isArray(t)||(t=[t]),t.forEach(a=>{}),this.startOpen=t),s&&(this.headerGenerator=Array.isArray(s)?s:[s])}else this.groupList=[],this.groups={}}rowSample(e,t){if(this.table.options.groupBy){var s=this.getGroups(!1)[0];t.push(s.getRows(!1)[0])}return t}virtualRenderFill(){var e=this.table.rowManager.tableElement,t=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)t=t.filter(s=>s.type!=="group"),e.style.minWidth=t.length?"":this.table.columnManager.getWidth()+"px";else return t}rowAddingIndex(e,t,s){if(this.table.options.groupBy){this.assignRowToGroup(e);var n=e.modules.group.rows;return n.length>1&&(!t||t&&n.indexOf(t)==-1?s?n[0]!==e&&(t=n[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!s)):n[n.length-1]!==e&&(t=n[n.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!s)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!s)),t}}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.initialized||this.initialize(),this.configureGroupSetup(),!e&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return e.modules.group?e.modules.group.getComponent():!1}rowMoving(e,t,s){if(this.table.options.groupBy){!s&&t instanceof ft&&(t=this.table.rowManager.prevDisplayRow(e)||t);var n=t instanceof ft?t:t.modules.group,a=e instanceof ft?e:e.modules.group;n===a?this.table.rowManager.moveRowInArray(n.rows,e,t,s):(a&&a.removeRow(e),n.insertRow(e,t,s))}}rowDeleting(e){this.table.options.groupBy&&e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(e){this.table.options.groupBy&&this.reassignRowToGroup(e.row)}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var t=[];return this.groupList.forEach(function(s){t.push(e?s.getComponent():s)}),t}getChildGroups(e){var t=[];return e||(e=this),e.groupList.forEach(s=>{s.groupList.length?t=t.concat(this.getChildGroups(s)):t.push(s)}),t}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(e){e.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(e){var t=[];return e.forEach(s=>{var n={};n.level=0,n.rowCount=0,n.headerContent="";var a=[];s.hasSubGroups?(a=this.pullGroupListData(s.groupList),n.level=s.level,n.rowCount=a.length-s.groupList.length,n.headerContent=s.generator(s.key,n.rowCount,s.rows,s),t.push(n),t=t.concat(a)):(n.level=s.level,n.headerContent=s.generator(s.key,s.rows.length,s.rows,s),n.rowCount=s.getRows().length,t.push(n),s.getRows().forEach(l=>{t.push(l.getData("data"))}))}),t}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var t=!1;return this.options("dataTree")&&(e=this.table.modules.dataTree.getTreeParentRoot(e)),this.groupList.forEach(s=>{var n=s.getRowGroup(e);n&&(t=n)}),t}countGroups(){return this.groupList.length}generateGroups(e){var t=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(s=>{this.createGroup(s,0,t)}),e.forEach(s=>{this.assignRowToExistingGroup(s,t)})):e.forEach(s=>{this.assignRowToGroup(s,t)}),Object.values(t).forEach(s=>{s.wipe(!0)})}createGroup(e,t,s){var n=t+"_"+e,a;s=s||[],a=new ft(this,!1,t,e,this.groupIDLookups[0].field,this.headerGenerator[0],s[n]),this.groups[n]=a,this.groupList.push(a)}assignRowToExistingGroup(e,t){var s=this.groupIDLookups[0].func(e.getData()),n="0_"+s;this.groups[n]&&this.groups[n].addRow(e)}assignRowToGroup(e,t){var s=this.groupIDLookups[0].func(e.getData()),n=!this.groups["0_"+s];return n&&this.createGroup(s,0,t),this.groups["0_"+s].addRow(e),!n}reassignRowToGroup(e){if(e.type==="row"){var t=e.modules.group,s=t.getPath(),n=this.getExpectedPath(e),a;a=s.length==n.length&&s.every((l,h)=>l===n[h]),a||(t.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var t=[],s=e.getData();return this.groupIDLookups.forEach(n=>{t.push(n.func(s))}),t}updateGroupRows(e){var t=[];return this.blockRedraw||(this.groupList.forEach(s=>{t=t.concat(s.getHeadersAndRows())}),e&&this.refreshData(!0)),t}scrollHeaders(e){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(e-=this.table.columnManager.renderer.vDomPadLeft),e=e+"px",this.groupList.forEach(t=>{t.scrollHeader(e)}))}removeGroup(e){var t=e.level+"_"+e.key,s;this.groups[t]&&(delete this.groups[t],s=this.groupList.indexOf(e),s>-1&&this.groupList.splice(s,1))}checkBasicModeGroupHeaderWidth(){var e=this.table.rowManager.tableElement,t=!0;this.table.rowManager.getDisplayRows().forEach((s,n)=>{this.table.rowManager.styleRow(s,n),e.appendChild(s.getElement()),s.initialize(!0),s.type!=="group"&&(t=!1)}),t?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}}S($n,"moduleName","groupRows");var sl={cellEdit:function(c){c.component.setValueProcessData(c.data.oldValue),c.component.cellRendered()},rowAdd:function(c){c.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(c){var e=this.table.rowManager.addRowActual(c.data.data,c.data.pos,c.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(c.component,e),this.table.rowManager.checkPlaceholder()},rowMove:function(c){var e=c.data.posFrom-c.data.posTo>0;this.table.rowManager.moveRowActual(c.component,this.table.rowManager.getRowFromPosition(c.data.posFrom),e),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},nl={cellEdit:function(c){c.component.setValueProcessData(c.data.newValue),c.component.cellRendered()},rowAdd:function(c){var e=this.table.rowManager.addRowActual(c.data.data,c.data.pos,c.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(c.component,e),this.table.rowManager.checkPlaceholder()},rowDelete:function(c){c.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(c){this.table.rowManager.moveRowActual(c.component,this.table.rowManager.getRowFromPosition(c.data.posTo),c.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},rl={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},al={undo:function(c){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(c.preventDefault(),this.table.modules.history.undo()))},redo:function(c){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(c.preventDefault(),this.table.modules.history.redo()))}},ol={keybindings:{bindings:rl,actions:al}};const We=class We extends I{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,t,s){this.action("rowMove",e,{posFrom:e.getPosition(),posTo:t.getPosition(),to:t,after:s})}rowAdded(e,t,s,n){this.action("rowAdd",e,{data:t,pos:s,index:n})}rowDeleted(e){var t,s;this.table.options.groupBy?(s=e.getComponent().getGroup()._getSelf().rows,t=s.indexOf(e),t&&(t=s[t-1])):(t=e.table.rowManager.getRowIndex(e),t&&(t=e.table.rowManager.rows[t-1])),this.action("rowDelete",e,{data:e.getData(),pos:!t,index:t})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,t,s){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:t,data:s}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var t=this.history.findIndex(function(s){return s.component===e});t>-1&&(this.history.splice(t,1),t<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return We.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return We.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(e,t){this.history.forEach(function(s){if(s.component instanceof he)s.component===e&&(s.component=t);else if(s.component instanceof Gt&&s.component.row===e){var n=s.component.column.getField();n&&(s.component=t.getCell(n))}})}};S(We,"moduleName","history"),S(We,"moduleExtensions",ol),S(We,"undoers",sl),S(We,"redoers",nl);let os=We;class er extends I{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var e=this.table.originalElement,t=this.table.options,s=e.getElementsByTagName("th"),n=e.getElementsByTagName("tbody")[0],a=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),n=n?n.getElementsByTagName("tr"):[],this._extractOptions(e,t),s.length?this._extractHeaders(s,n):this._generateBlankHeaders(s,n);for(var l=0;l<n.length;l++){var h=n[l],d=h.getElementsByTagName("td"),f={};this.hasIndex||(f[t.index]=l);for(var g=0;g<d.length;g++){var b=d[g];typeof this.fieldIndex[g]<"u"&&(f[this.fieldIndex[g]]=b.innerHTML)}a.push(f)}t.data=a,this.dispatchExternal("htmlImported")}_extractOptions(e,t,s){var n=e.attributes,a=Object.keys(s||t),l={};a.forEach(g=>{l[g.toLowerCase()]=g});for(var h in n){var d=n[h],f;d&&typeof d=="object"&&d.name&&d.name.indexOf("tabulator-")===0&&(f=d.name.replace("tabulator-",""),typeof l[f]<"u"&&(t[l[f]]=this._attribValue(d.value)))}}_attribValue(e){return e==="true"?!0:e==="false"?!1:e}_findCol(e){var t=this.table.options.columns.find(s=>s.title===e);return t||!1}_extractHeaders(e,t){for(var s=0;s<e.length;s++){var n=e[s],a=!1,l=this._findCol(n.textContent),h;l?a=!0:l={title:n.textContent.trim()},l.field||(l.field=n.textContent.trim().toLowerCase().replaceAll(" ","_")),h=n.getAttribute("width"),h&&!l.width&&(l.width=h),this._extractOptions(n,l,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[s]=l.field,l.field==this.table.options.index&&(this.hasIndex=!0),a||this.table.options.columns.push(l)}}_generateBlankHeaders(e,t){for(var s=0;s<e.length;s++){var n=e[s],a={title:"",field:"col"+s};this.fieldIndex[s]=a.field;var l=n.getAttribute("width");l&&(a.width=l),this.table.options.columns.push(a)}}}S(er,"moduleName","htmlTableImport");function ll(c){var e=[],t=0,s=0,n=!1;for(let a=0;a<c.length;a++){let l=c[a],h=c[a+1];if(e[t]||(e[t]=[]),e[t][s]||(e[t][s]=""),l=='"'&&n&&h=='"'){e[t][s]+=l,a++;continue}if(l=='"'){n=!n;continue}if(l==","&&!n){s++;continue}if(l=="\r"&&h==`
`&&!n){s=0,t++,a++;continue}if((l=="\r"||l==`
`)&&!n){s=0,t++;continue}e[t][s]+=l}return e}function hl(c){try{return JSON.parse(c)}catch(e){return console.warn("JSON Import Error - File contents is invalid JSON",e),Promise.reject()}}function ul(c){return c}function dl(c){var e=this.dependencyRegistry.lookup("XLSX"),t=e.read(c),s=t.Sheets[t.SheetNames[0]];return e.utils.sheet_to_json(s,{header:1})}var cl={csv:ll,json:hl,array:ul,xlsx:dl};const Nt=class Nt extends I{constructor(e){super(e),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text"),this.registerTableOption("importHeaderTransform"),this.registerTableOption("importValueTransform"),this.registerTableOption("importDataValidator"),this.registerTableOption("importFileValidator")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(e){return this.table.options.importFormat&&(typeof e=="string"||Array.isArray(e)&&e.length&&Array.isArray(e))}loadData(e,t,s,n,a){return this.importData(this.lookupImporter(),e).then(this.structureData.bind(this)).catch(l=>(console.error("Import Error:",l||"Unable to import data"),Promise.reject(l)))}lookupImporter(e){var t;return e||(e=this.table.options.importFormat),typeof e=="string"?t=Nt.importers[e]:t=e,t||console.error("Import Error - Importer not found:",e),t}importFromFile(e,t,s){var n=this.lookupImporter(e);if(n)return this.pickFile(t,s).then(this.importData.bind(this,n)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(a=>(this.dispatch("import-error",a),this.dispatchExternal("importError",a),console.error("Import Error:",a||"Unable to import file"),this.table.dataLoader.alertError(),setTimeout(()=>{this.table.dataLoader.clearAlert()},3e3),Promise.reject(a)))}pickFile(e,t){return new Promise((s,n)=>{var a=document.createElement("input");a.type="file",a.accept=e,a.addEventListener("change",l=>{var h=a.files[0],d=new FileReader,f=this.validateFile(h);if(f===!0){switch(this.dispatch("import-importing",a.files),this.dispatchExternal("importImporting",a.files),t||this.table.options.importReader){case"buffer":d.readAsArrayBuffer(h);break;case"binary":d.readAsBinaryString(h);break;case"url":d.readAsDataURL(h);break;case"text":default:d.readAsText(h)}d.onload=g=>{s(d.result)},d.onerror=g=>{console.warn("File Load Error - Unable to read file"),n(g)}}else n(f)}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),a.click()})}importData(e,t){var s;return this.table.dataLoader.alertLoader(),new Promise((n,a)=>{setTimeout(()=>{s=e.call(this.table,t),s instanceof Promise||s?n(s):a()},10)})}structureData(e){var t=[];return Array.isArray(e)&&e.length&&Array.isArray(e[0])?(this.table.options.autoColumns?t=this.structureArrayToObject(e):t=this.structureArrayToColumns(e),t):e}mutateData(e){var t=[];return Array.isArray(e)?e.forEach(s=>{t.push(this.table.modules.mutator.transformRow(s,"import"))}):t=e,t}transformHeader(e){var t=[];if(this.table.options.importHeaderTransform)e.forEach(s=>{t.push(this.table.options.importHeaderTransform.call(this.table,s,e))});else return e;return t}transformData(e){var t=[];if(this.table.options.importValueTransform)e.forEach(s=>{t.push(this.table.options.importValueTransform.call(this.table,s,e))});else return e;return t}structureArrayToObject(e){var t=this.transformHeader(e.shift()),s=e.map(n=>{var a={};return n=this.transformData(n),t.forEach((l,h)=>{a[l]=n[h]}),a});return s}structureArrayToColumns(e){var t=[],s=this.transformHeader(e[0]),n=this.table.getColumns();return n[0]&&s[0]&&n[0].getDefinition().title===s[0]&&e.shift(),e.forEach(a=>{var l={};a=this.transformData(a),a.forEach((h,d)=>{var f=n[d];f&&(l[f.getField()]=h)}),t.push(l)}),t}validateFile(e){return this.table.options.importFileValidator?this.table.options.importFileValidator.call(this.table,e):!0}validateData(e){var t;return this.table.options.importDataValidator?(t=this.table.options.importDataValidator.call(this.table,e),t===!0?e:Promise.reject(t)):e}setData(e){return this.dispatch("import-imported",e),this.dispatchExternal("importImported",e),this.table.dataLoader.clearAlert(),this.table.setData(e)}};S(Nt,"moduleName","import"),S(Nt,"importers",cl);let ls=Nt;class tr extends I{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var e=Object.values(this.touchWatchers);e.forEach(t=>{for(let s in t)t[s]=null})}cellContentsSelectionFixer(e,t){var s;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===t)){e.preventDefault();try{document.selection?(s=document.body.createTextRange(),s.moveToElementText(t.getElement()),s.select()):window.getSelection&&(s=document.createRange(),s.selectNode(t.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(s))}catch{}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,t){t?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var t=this.eventMap[e];this.touchSubscribers[t+"-touchstart"]||(this.touchSubscribers[t+"-touchstart"]=this.handleTouch.bind(this,t,"start"),this.touchSubscribers[t+"-touchend"]=this.handleTouch.bind(this,t,"end"),this.subscribe(t+"-touchstart",this.touchSubscribers[t+"-touchstart"]),this.subscribe(t+"-touchend",this.touchSubscribers[t+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var t=!0,s=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let n in this.eventMap)this.eventMap[n]===s&&this.subscribers[n]&&(t=!1);t&&(this.unsubscribe(s+"-touchstart",this.touchSubscribers[s+"-touchstart"]),this.unsubscribe(s+"-touchend",this.touchSubscribers[s+"-touchend"]),delete this.touchSubscribers[s+"-touchstart"],delete this.touchSubscribers[s+"-touchend"])}}initializeColumn(e){var t=e.definition;for(let s in this.eventMap)t[s]&&(this.subscriptionChanged(s,!0),this.columnSubscribers[s]||(this.columnSubscribers[s]=[]),this.columnSubscribers[s].push(e))}handle(e,t,s){this.dispatchEvent(e,t,s)}handleTouch(e,t,s,n){var a=this.touchWatchers[e];switch(e==="column"&&(e="header"),t){case"start":a.tap=!0,clearTimeout(a.tapHold),a.tapHold=setTimeout(()=>{clearTimeout(a.tapHold),a.tapHold=null,a.tap=null,clearTimeout(a.tapDbl),a.tapDbl=null,this.dispatchEvent(e+"TapHold",s,n)},1e3);break;case"end":a.tap&&(a.tap=null,this.dispatchEvent(e+"Tap",s,n)),a.tapDbl?(clearTimeout(a.tapDbl),a.tapDbl=null,this.dispatchEvent(e+"DblTap",s,n)):a.tapDbl=setTimeout(()=>{clearTimeout(a.tapDbl),a.tapDbl=null},300),clearTimeout(a.tapHold),a.tapHold=null;break}}dispatchEvent(e,t,s){var n=s.getComponent(),a;this.columnSubscribers[e]&&(s instanceof Gt?a=s.column.definition[e]:s instanceof nt&&(a=s.definition[e]),a&&a(t,n)),this.dispatchExternal(e,t,n)}}S(tr,"moduleName","interaction");var pl={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},fl={keyBlock:function(c){c.stopPropagation(),c.preventDefault()},scrollPageUp:function(c){var e=this.table.rowManager,t=e.scrollTop-e.element.clientHeight;c.preventDefault(),e.displayRowsCount&&(t>=0?e.element.scrollTop=t:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(c){var e=this.table.rowManager,t=e.scrollTop+e.element.clientHeight,s=e.element.scrollHeight;c.preventDefault(),e.displayRowsCount&&(t<=s?e.element.scrollTop=t:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(c){var e=this.table.rowManager;c.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(c){var e=this.table.rowManager;c.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(c){this.dispatch("keybinding-nav-prev",c)},navNext:function(c){this.dispatch("keybinding-nav-next",c)},navLeft:function(c){this.dispatch("keybinding-nav-left",c)},navRight:function(c){this.dispatch("keybinding-nav-right",c)},navUp:function(c){this.dispatch("keybinding-nav-up",c)},navDown:function(c){this.dispatch("keybinding-nav-down",c)}};const je=class je extends I{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,t={};this.watchKeys={},this.pressedKeys=[],e!==!1&&(Object.assign(t,je.bindings),Object.assign(t,e),this.mapBindings(t),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let t in e)je.actions[t]?e[t]&&(typeof e[t]!="object"&&(e[t]=[e[t]]),e[t].forEach(s=>{var n=Array.isArray(s)?s:[s];n.forEach(a=>{this.mapBinding(t,a)})})):console.warn("Key Binding Error - no such action:",t)}mapBinding(e,t){var s={action:je.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},n=t.toString().toLowerCase().split(" ").join("").split("+");n.forEach(a=>{switch(a){case"ctrl":s.ctrl=!0;break;case"shift":s.shift=!0;break;case"meta":s.meta=!0;break;default:a=isNaN(a)?a.toUpperCase().charCodeAt(0):parseInt(a),s.keys.push(a),this.watchKeys[a]||(this.watchKeys[a]=[]),this.watchKeys[a].push(s)}})}bindEvents(){var e=this;this.keyupBinding=function(t){var s=t.keyCode,n=e.watchKeys[s];n&&(e.pressedKeys.push(s),n.forEach(function(a){e.checkBinding(t,a)}))},this.keydownBinding=function(t){var s=t.keyCode,n=e.watchKeys[s];if(n){var a=e.pressedKeys.indexOf(s);a>-1&&e.pressedKeys.splice(a,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,t){var s=!0;return e.ctrlKey==t.ctrl&&e.shiftKey==t.shift&&e.metaKey==t.meta?(t.keys.forEach(n=>{var a=this.pressedKeys.indexOf(n);a==-1&&(s=!1)}),s&&t.action.call(this,e),!0):!1}};S(je,"moduleName","keybindings"),S(je,"bindings",pl),S(je,"actions",fl);let hs=je;class ir extends I{constructor(e){super(e),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(e){var t=e.definition;t.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),t.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),t.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),t.headerMenu&&this.initializeColumnHeaderMenu(e),t.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),t.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),t.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(e){var t=e.definition.headerMenuIcon,s;s=document.createElement("span"),s.classList.add("tabulator-header-popup-button"),t?(typeof t=="function"&&(t=t(e.getComponent())),t instanceof HTMLElement?s.appendChild(t):s.innerHTML=t):s.innerHTML="&vellip;",s.addEventListener("click",n=>{n.stopPropagation(),n.preventDefault(),this.loadMenuEvent(e.definition.headerMenu,n,e)}),e.titleElement.insertBefore(s,e.titleElement.firstChild)}loadMenuTableCellEvent(e,t,s){s._cell&&(s=s._cell),s.column.definition[e]&&this.loadMenuEvent(s.column.definition[e],t,s)}loadMenuTableColumnEvent(e,t,s){s._column&&(s=s._column),s.definition[e]&&this.loadMenuEvent(s.definition[e],t,s)}loadMenuEvent(e,t,s){s._group?s=s._group:s._row&&(s=s._row),e=typeof e=="function"?e.call(this.table,t,s.getComponent()):e,this.loadMenu(t,s,e)}loadMenu(e,t,s,n,a){var l=!(e instanceof MouseEvent),h=document.createElement("div"),d;if(h.classList.add("tabulator-menu"),l||e.preventDefault(),!(!s||!s.length)){if(n)d=a.child(h);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=d=this.popup(h)}s.forEach(f=>{var g=document.createElement("div"),b=f.label,v=f.disabled;f.separator?g.classList.add("tabulator-menu-separator"):(g.classList.add("tabulator-menu-item"),typeof b=="function"&&(b=b.call(this.table,t.getComponent())),b instanceof Node?g.appendChild(b):g.innerHTML=b,typeof v=="function"&&(v=v.call(this.table,t.getComponent())),v?(g.classList.add("tabulator-menu-item-disabled"),g.addEventListener("click",w=>{w.stopPropagation()})):f.menu&&f.menu.length?g.addEventListener("click",w=>{w.stopPropagation(),this.loadMenu(w,t,f.menu,g,d)}):f.action&&g.addEventListener("click",w=>{f.action(w,t.getComponent())}),f.menu&&f.menu.length&&g.classList.add("tabulator-menu-item-submenu")),h.appendChild(g)}),h.addEventListener("click",f=>{this.rootPopup&&this.rootPopup.hide()}),d.show(n||e),d===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",s,d),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=t,this.dispatch("menu-opened",s,d),this.dispatchExternal("menuOpened",t.getComponent()))}}}S(ir,"moduleName","menu");class sr extends I{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(e){var t=this,s={},n;!e.modules.frozen&&!e.isGroup&&!e.isRowHeader&&(n=e.getElement(),s.mousemove=(function(a){e.parent===t.moving.parent&&((t.touchMove?a.touches[0].pageX:a.pageX)-Y.elOffset(n).left+t.table.columnManager.contentsElement.scrollLeft>e.getWidth()/2?(t.toCol!==e||!t.toColAfter)&&(n.parentNode.insertBefore(t.placeholderElement,n.nextSibling),t.moveColumn(e,!0)):(t.toCol!==e||t.toColAfter)&&(n.parentNode.insertBefore(t.placeholderElement,n),t.moveColumn(e,!1)))}).bind(t),n.addEventListener("mousedown",function(a){t.touchMove=!1,a.which===1&&(t.checkTimeout=setTimeout(function(){t.startMove(a,e)},t.checkPeriod))}),n.addEventListener("mouseup",function(a){a.which===1&&t.checkTimeout&&clearTimeout(t.checkTimeout)}),t.bindTouchEvents(e)),e.modules.moveColumn=s}bindTouchEvents(e){var t=e.getElement(),s=!1,n,a,l,h,d,f;t.addEventListener("touchstart",g=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,n=e.nextColumn(),l=n?n.getWidth()/2:0,a=e.prevColumn(),h=a?a.getWidth()/2:0,d=0,f=0,s=!1,this.startMove(g,e)},this.checkPeriod)},{passive:!0}),t.addEventListener("touchmove",g=>{var b,v;this.moving&&(this.moveHover(g),s||(s=g.touches[0].pageX),b=g.touches[0].pageX-s,b>0?n&&b-d>l&&(v=n,v!==e&&(s=g.touches[0].pageX,v.getElement().parentNode.insertBefore(this.placeholderElement,v.getElement().nextSibling),this.moveColumn(v,!0))):a&&-b-f>h&&(v=a,v!==e&&(s=g.touches[0].pageX,v.getElement().parentNode.insertBefore(this.placeholderElement,v.getElement()),this.moveColumn(v,!1))),v&&(n=v.nextColumn(),d=l,l=n?n.getWidth()/2:0,a=v.prevColumn(),f=h,h=a?a.getWidth()/2:0))},{passive:!0}),t.addEventListener("touchend",g=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(g)})}startMove(e,t){var s=t.getElement(),n=this.table.columnManager.getContentsElement(),a=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=t,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Y.elOffset(s).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",s.parentNode.insertBefore(this.placeholderElement,s),s.parentNode.removeChild(s),this.hoverElement=s.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),n.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=n.clientHeight-a.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e),this.dispatch("column-moving",e,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,t){var s=this.moving.getCells();this.toCol=e,this.toColAfter=t,t?e.getCells().forEach(function(n,a){var l=n.getElement(!0);l.parentNode&&s[a]&&l.parentNode.insertBefore(s[a].getElement(),l.nextSibling)}):e.getCells().forEach(function(n,a){var l=n.getElement(!0);l.parentNode&&s[a]&&l.parentNode.insertBefore(s[a].getElement(),l)})}endMove(e){(e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var t=this.table.columnManager.getContentsElement(),s=t.scrollLeft,n=(this.touchMove?e.touches[0].pageX:e.pageX)-Y.elOffset(t).left+s,a;this.hoverElement.style.left=n-this.startX+"px",n-s<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{a=Math.max(0,s-5),this.table.rowManager.getElement().scrollLeft=a,this.autoScrollTimeout=!1},1))),s+t.clientWidth-n<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{a=Math.min(t.clientWidth,s+5),this.table.rowManager.getElement().scrollLeft=a,this.autoScrollTimeout=!1},1)))}}S(sr,"moduleName","moveColumn");var ml={delete:function(c,e,t){c.delete()}},gl={insert:function(c,e,t){return this.table.addRow(c.getData(),void 0,e),!0},add:function(c,e,t){return this.table.addRow(c.getData()),!0},update:function(c,e,t){return e?(e.update(c.getData()),!0):!1},replace:function(c,e,t){return e?(this.table.addRow(c.getData(),void 0,e),e.delete(),!0):!1}};const it=class it extends I{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var t=this,s={};s.mouseup=(function(n){t.tableRowDrop(n,e)}).bind(t),s.mousemove=(function(n){var a;n.pageY-Y.elOffset(e.element).top+t.table.rowManager.element.scrollTop>e.getHeight()/2?(t.toRow!==e||!t.toRowAfter)&&(a=e.getElement(),a.parentNode.insertBefore(t.placeholderElement,a.nextSibling),t.moveRow(e,!0)):(t.toRow!==e||t.toRowAfter)&&(a=e.getElement(),a.previousSibling&&(a.parentNode.insertBefore(t.placeholderElement,a),t.moveRow(e,!1)))}).bind(t),e.modules.moveRow=s}initializeRow(e){var t=this,s={},n;s.mouseup=(function(a){t.tableRowDrop(a,e)}).bind(t),s.mousemove=(function(a){var l=e.getElement();a.pageY-Y.elOffset(l).top+t.table.rowManager.element.scrollTop>e.getHeight()/2?(t.toRow!==e||!t.toRowAfter)&&(l.parentNode.insertBefore(t.placeholderElement,l.nextSibling),t.moveRow(e,!0)):(t.toRow!==e||t.toRowAfter)&&(l.parentNode.insertBefore(t.placeholderElement,l),t.moveRow(e,!1))}).bind(t),this.hasHandle||(n=e.getElement(),n.addEventListener("mousedown",function(a){a.which===1&&(t.checkTimeout=setTimeout(function(){t.startMove(a,e)},t.checkPeriod))}),n.addEventListener("mouseup",function(a){a.which===1&&t.checkTimeout&&clearTimeout(t.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=s}initializeColumn(e){e.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&this.table.options.movableRows!==!1){var t=this,s=e.getElement(!0);s.addEventListener("mousedown",function(n){n.which===1&&(t.checkTimeout=setTimeout(function(){t.startMove(n,e.row)},t.checkPeriod))}),s.addEventListener("mouseup",function(n){n.which===1&&t.checkTimeout&&clearTimeout(t.checkTimeout)}),this.bindTouchEvents(e.row,s)}}bindTouchEvents(e,t){var s=!1,n,a,l,h,d,f;t.addEventListener("touchstart",g=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,n=e.nextRow(),l=n?n.getHeight()/2:0,a=e.prevRow(),h=a?a.getHeight()/2:0,d=0,f=0,s=!1,this.startMove(g,e)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,t.addEventListener("touchmove",g=>{var b,v;this.moving&&(g.preventDefault(),this.moveHover(g),s||(s=g.touches[0].pageY),b=g.touches[0].pageY-s,b>0?n&&b-d>l&&(v=n,v!==e&&(s=g.touches[0].pageY,v.getElement().parentNode.insertBefore(this.placeholderElement,v.getElement().nextSibling),this.moveRow(v,!0))):a&&-b-f>h&&(v=a,v!==e&&(s=g.touches[0].pageY,v.getElement().parentNode.insertBefore(this.placeholderElement,v.getElement()),this.moveRow(v,!1))),v&&(n=v.nextRow(),d=l,l=n?n.getHeight()/2:0,a=v.prevRow(),f=h,h=a?a.getHeight()/2:0))}),t.addEventListener("touchend",g=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(g),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})}startMove(e,t){var s=t.getElement();this.setStartPosition(e,t),this.moving=t,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(t)):(s.parentNode.insertBefore(this.placeholderElement,s),s.parentNode.removeChild(s)),this.hoverElement=s.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",t.getComponent()),this.moveHover(e)}setStartPosition(e,t){var s=this.touchMove?e.touches[0].pageX:e.pageX,n=this.touchMove?e.touches[0].pageY:e.pageY,a,l;a=t.getElement(),this.connection?(l=a.getBoundingClientRect(),this.startX=l.left-s+window.pageXOffset,this.startY=l.top-n+window.pageYOffset):this.startY=n-a.getBoundingClientRect().top}endMove(e){(!e||e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,t){this.toRow=e,this.toRowAfter=t}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var t=this.table.rowManager.getElement(),s=t.scrollTop,n=(this.touchMove?e.touches[0].pageY:e.pageY)-t.getBoundingClientRect().top+s;this.hoverElement.style.top=Math.min(n-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,t,s){this.dispatchExternal("movableRowsElementDrop",e,t,s?s.getComponent():!1)}connectToTables(e){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",t),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(s=>{typeof s=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(s))):this.connectionElements.push(s)}),this.connectionElements.forEach(s=>{var n=a=>{this.elementRowDrop(a,s,this.moving)};s.addEventListener("mouseup",n),s.tabulatorElementDropEvent=n,s.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(t=>{t.classList.remove("tabulator-movingrow-receiving"),t.removeEventListener("mouseup",t.tabulatorElementDropEvent),delete t.tabulatorElementDropEvent})}connect(e,t){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=t,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(s=>{s.type==="row"&&s.modules.moveRow&&s.modules.moveRow.mouseup&&s.getElement().addEventListener("mouseup",s.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",t,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(t=>{t.type==="row"&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,t,s){var n=!1;if(s){switch(typeof this.table.options.movableRowsSender){case"string":n=it.senders[this.table.options.movableRowsSender];break;case"function":n=this.table.options.movableRowsSender;break}n?n.call(this,this.moving?this.moving.getComponent():void 0,t?t.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),t?t.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),t?t.getComponent():void 0,e);this.endMove()}tableRowDrop(e,t){var s=!1,n=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":s=it.receivers[this.table.options.movableRowsReceiver];break;case"function":s=this.table.options.movableRowsReceiver;break}s?n=s.call(this,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),n?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:t,success:n})}commsReceived(e,t,s){switch(t){case"connect":return this.connect(e,s.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,s.row,s.success)}}};S(it,"moduleName","moveRow"),S(it,"senders",ml),S(it,"receivers",gl);let us=it;var bl={};const bt=class bt extends I{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard","import"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutatorImport"),this.registerColumnOption("mutatorImportParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,t,s){return this.transformRow(t,"data",s)}initializeColumn(e){var t=!1,s={};this.allowedTypes.forEach(n=>{var a="mutator"+(n.charAt(0).toUpperCase()+n.slice(1)),l;e.definition[a]&&(l=this.lookupMutator(e.definition[a]),l&&(t=!0,s[a]={mutator:l,params:e.definition[a+"Params"]||{}}))}),t&&(e.modules.mutate=s)}lookupMutator(e){var t=!1;switch(typeof e){case"string":bt.mutators[e]?t=bt.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":t=e;break}return t}transformRow(e,t,s){var n="mutator"+(t.charAt(0).toUpperCase()+t.slice(1)),a;return this.enabled&&this.table.columnManager.traverse(l=>{var h,d,f;l.modules.mutate&&(h=l.modules.mutate[n]||l.modules.mutate.mutator||!1,h&&(a=l.getFieldValue(typeof s<"u"?s:e),(t=="data"&&!s||typeof a<"u")&&(f=l.getComponent(),d=typeof h.params=="function"?h.params(a,e,t,f):h.params,l.setFieldValue(e,h.mutator(a,e,t,d,f)))))}),e}transformCell(e,t){if(e.column.modules.mutate){var s=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,n={};if(s)return n=Object.assign(n,e.row.getData()),e.column.setFieldValue(n,t),s.mutator(t,n,"edit",s.params,e.getComponent())}return t}mutateLink(e){var t=e.column.definition.mutateLink;t&&(Array.isArray(t)||(t=[t]),t.forEach(s=>{var n=e.row.getCell(s);n&&n.setValue(n.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}};S(bt,"moduleName","mutator"),S(bt,"mutators",bl);let ds=bt;function vl(c,e,t,s,n){var a=document.createElement("span"),l=document.createElement("span"),h=document.createElement("span"),d=document.createElement("span"),f=document.createElement("span"),g=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",b=>{l.innerHTML=b}),this.table.modules.localize.langBind("pagination|counter|of",b=>{d.innerHTML=b}),this.table.modules.localize.langBind("pagination|counter|rows",b=>{g.innerHTML=b}),s?(h.innerHTML=" "+e+"-"+Math.min(e+c-1,s)+" ",f.innerHTML=" "+s+" ",a.appendChild(l),a.appendChild(h),a.appendChild(d),a.appendChild(f),a.appendChild(g)):(h.innerHTML=" 0 ",a.appendChild(l),a.appendChild(h),a.appendChild(g)),a}function Cl(c,e,t,s,n){var a=document.createElement("span"),l=document.createElement("span"),h=document.createElement("span"),d=document.createElement("span"),f=document.createElement("span"),g=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",b=>{l.innerHTML=b}),h.innerHTML=" "+t+" ",this.table.modules.localize.langBind("pagination|counter|of",b=>{d.innerHTML=b}),f.innerHTML=" "+n+" ",this.table.modules.localize.langBind("pagination|counter|pages",b=>{g.innerHTML=b}),a.appendChild(l),a.appendChild(h),a.appendChild(d),a.appendChild(f),a.appendChild(g),a}var El={rows:vl,pages:Cl};const zt=class zt extends I{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("paginationOutOfRange",!1),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,t){var s=this.table.rowManager,n=s.getDisplayRows(),a;return t?n.length?a=n[0]:s.activeRows.length&&(a=s.activeRows[s.activeRows.length-1],t=!1):n.length&&(a=n[n.length-1],t=!(n.length<this.size)),{index:a,top:t}}calculatePageSizes(){var e,t;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(e=document.createElement("div"),e.classList.add("tabulator-row"),e.style.visibility="hidden",t=document.createElement("div"),t.classList.add("tabulator-cell"),t.innerHTML="Page Row Test",e.appendChild(t),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,t,s,n){return this.initialLoad||(this.progressiveLoad&&!s||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),n.page=this.page,this.size&&(n.size=this.size),n}userSetPageToRow(e){return this.table.options.pagination&&(e=this.table.rowManager.findRow(e),e)?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return this.table.options.pagination?(this.setPageSize(e),this.setPage(1)):!1}scrollVertical(e,t){var s,n,a;!t&&!this.table.dataLoader.loading&&(s=this.table.rowManager.getElement(),n=s.scrollHeight-s.clientHeight-e,a=this.table.options.progressiveLoadScrollMargin||s.clientHeight*2,n<a&&this.nextPage().catch(()=>{}))}restOnRenderBefore(e,t){return t||this.mode==="local"&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,this.pageSizes.indexOf(this.size)==-1&&e.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){e=[];for(let t=1;t<5;t++)e.push(this.size*t);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(t=>{var s=document.createElement("option");s.value=t,t===!0?this.langBind("pagination|all",function(n){s.innerHTML=n}):s.innerHTML=t,this.pageSizeSelect.appendChild(s)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var e=this.table.options.paginationCounter,t=null;e&&(typeof e=="function"?t=e:t=zt.pageCounters[e],t?(this.pageCounter=t,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",e))}initializePaginator(e){var t,s;e||(this.langBind("pagination|first",n=>{this.firstBut.innerHTML=n}),this.langBind("pagination|first_title",n=>{this.firstBut.setAttribute("aria-label",n),this.firstBut.setAttribute("title",n)}),this.langBind("pagination|prev",n=>{this.prevBut.innerHTML=n}),this.langBind("pagination|prev_title",n=>{this.prevBut.setAttribute("aria-label",n),this.prevBut.setAttribute("title",n)}),this.langBind("pagination|next",n=>{this.nextBut.innerHTML=n}),this.langBind("pagination|next_title",n=>{this.nextBut.setAttribute("aria-label",n),this.nextBut.setAttribute("title",n)}),this.langBind("pagination|last",n=>{this.lastBut.innerHTML=n}),this.langBind("pagination|last_title",n=>{this.lastBut.setAttribute("aria-label",n),this.lastBut.setAttribute("title",n)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(t=document.createElement("label"),this.langBind("pagination|page_size",n=>{this.pageSizeSelect.setAttribute("aria-label",n),this.pageSizeSelect.setAttribute("title",n),t.innerHTML=n}),this.element.appendChild(t),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",n=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(s=document.querySelector(this.table.options.paginationCounterElement),s?s.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(e){e?this.max=this.size===!0?1:Math.ceil(e/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||(this.mode=="local"||e)&&(this.page=1,this.trackChanges())}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return e=parseInt(e),e>0&&e<=this.max||this.mode!=="local"?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var t=this.displayRows(-1),s=t.indexOf(e);if(s>-1){var n=this.size===!0?1:Math.ceil((s+1)/this.size);return this.setPage(n)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){e!==!0&&(e=parseInt(e)),e>0&&(this.size=e,this.dispatchExternal("pageSizeChanged",e)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(e,t,s){var n;if(this.pageCounter)switch(this.mode==="remote"&&(t=this.size,s=(this.page-1)*this.size+1,e=this.remoteRowCountEstimate),n=this.pageCounter.call(this,t,s,this.page,e,this.max),typeof n){case"object":if(n instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(n)}else this.pageCounterElement.innerHTML="",n!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",n);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=n}}_setPageButtons(){let e=Math.floor((this.count-1)/2),t=Math.ceil((this.count-1)/2),s=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),n=this.page<=t?Math.min(this.count,this.max):Math.min(this.page+t,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let a=s;a<=n;a++)a>0&&a<=this.max&&this.pagesElement.appendChild(this._generatePageButton(a));this.footerRedraw()}_generatePageButton(e){var t=document.createElement("button");return t.classList.add("tabulator-page"),e==this.page&&t.classList.add("active"),t.setAttribute("type","button"),t.setAttribute("role","button"),this.langBind("pagination|page_title",s=>{t.setAttribute("aria-label",s+" "+e),t.setAttribute("title",s+" "+e)}),t.setAttribute("data-page",e),t.textContent=e,t.addEventListener("click",s=>{this.setPage(e)}),t}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var t=0,s,n,a,l,h=e.filter(d=>d.type==="row");if(this.mode=="local"){s=[],this.setMaxRows(e.length),this.size===!0?(n=0,a=e.length):(n=this.size*(this.page-1),a=n+parseInt(this.size)),this._setPageButtons();for(let d=n;d<a;d++){let f=e[d];f&&(s.push(f),f.type==="row"&&(l||(l=f),t++))}return this._setPageCounter(h.length,t,l?h.indexOf(l)+1:0),s}else return this._setPageButtons(),this._setPageCounter(h.length),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var t,s;if(typeof e.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),e.data)if(this.max=parseInt(e.last_page)||1,this.remoteRowCountEstimate=typeof e.last_row<"u"?e.last_row:e.last_page*this.size-(this.page==e.last_page?this.size-e.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(e.data,!1,this.page==1):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.page===1?e.data:this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,this.page!==1,this.page==1),t=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+t&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else{if(this.page>this.max&&(console.warn("Remote Pagination Error - Server returned last page value lower than the current page"),s=this.options("paginationOutOfRange"),s))return this.setPage(typeof s=="function"?s.call(this,this.page,this.max):s);this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.containerElement;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}};S(zt,"moduleName","page"),S(zt,"pageCounters",El);let cs=zt;var wl={local:function(c,e){var t=localStorage.getItem(c+"-"+e);return t?JSON.parse(t):!1},cookie:function(c,e){var t=document.cookie,s=c+"-"+e,n=t.indexOf(s+"="),a,l;return n>-1&&(t=t.slice(n),a=t.indexOf(";"),a>-1&&(t=t.slice(0,a)),l=t.replace(s+"=","")),l?JSON.parse(l):!1}},_l={local:function(c,e,t){localStorage.setItem(c+"-"+e,JSON.stringify(t))},cookie:function(c,e,t){var s=new Date;s.setDate(s.getDate()+1e4),document.cookie=c+"-"+e+"="+JSON.stringify(t)+"; expires="+s.toUTCString()}};const fe=class fe extends I{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,t=this.table.options.persistenceID,s;this.mode=e!==!0?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:fe.readers[this.table.options.persistenceReaderFunc]?this.readFunc=fe.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):fe.readers[this.mode]?this.readFunc=fe.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:fe.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=fe.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):fe.writers[this.mode]?this.writeFunc=fe.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(t||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(s=this.retrieveData("page"),s&&(typeof s.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=s.paginationSize),typeof s.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=s.paginationInitialPage))),this.config.group&&(s=this.retrieveData("group"),s&&(typeof s.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=s.groupBy),typeof s.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=s.groupStartOpen),typeof s.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=s.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,t,s;this.config.sort&&(e=this.load("sort"),e&&(this.table.options.initialSort=e)),this.config.filter&&(t=this.load("filter"),t&&(this.table.options.initialFilter=t)),this.config.headerFilter&&(s=this.load("headerFilter"),s&&(this.table.options.initialHeaderFilter=s))}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e,!0)),!0}initializeColumn(e){var t,s;this.config.columns&&(this.defWatcherBlock=!0,t=e.getDefinition(),s=this.config.columns===!0?Object.keys(t):this.config.columns,s.forEach(n=>{var a=Object.getOwnPropertyDescriptor(t,n),l=t[n];a&&Object.defineProperty(t,n,{set:h=>{l=h,this.defWatcherBlock||this.save("columns"),a.set&&a.set(h)},get:()=>(a.get&&a.get(),l)})}),this.defWatcherBlock=!1)}load(e,t){var s=this.retrieveData(e);return t&&(s=s?this.mergeDefinition(t,s):t),s}retrieveData(e){return this.readFunc?this.readFunc(this.id,e):!1}mergeDefinition(e,t,s){var n=[];return t=t||[],t.forEach((a,l)=>{var h=this._findColumn(e,a),d;h&&(s?d=Object.keys(a):this.config.columns===!0||this.config.columns==null?(d=Object.keys(h),d.push("width")):d=this.config.columns,d.forEach(f=>{f!=="columns"&&typeof a[f]<"u"&&(h[f]=a[f])}),h.columns&&(h.columns=this.mergeDefinition(h.columns,a.columns)),n.push(h))}),e.forEach((a,l)=>{var h=this._findColumn(t,a);h||(n.length>l?n.splice(l,0,a):n.push(a))}),n}_findColumn(e,t){var s=t.columns?"group":t.field?"field":"object";return e.find(function(n){switch(s){case"group":return n.title===t.title&&n.columns.length===t.columns.length;case"field":return n.field===t.field;case"object":return n===t}})}save(e){var t={};switch(e){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"headerFilter":t=this.table.modules.filter.getHeaderFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,e,t)}validateSorters(e){return e.forEach(function(t){t.column=t.field,delete t.field}),e}getGroupConfig(){var e={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var t=[],s=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(n=>{var a={},l=n.getDefinition(),h;n.isGroup?(a.title=l.title,a.columns=this.parseColumns(n.getColumns())):(a.field=n.getField(),this.config.columns===!0||this.config.columns==null?(h=Object.keys(l),h.push("width"),h.push("visible")):h=this.config.columns,h.forEach(d=>{switch(d){case"width":a.width=n.getWidth();break;case"visible":a.visible=n.visible;break;default:typeof l[d]!="function"&&s.indexOf(d)===-1&&(a[d]=l[d])}})),t.push(a)}),t}};S(fe,"moduleName","persistence"),S(fe,"moduleInitOrder",-10),S(fe,"readers",wl),S(fe,"writers",_l);let ps=fe;class nr extends I{constructor(e){super(e),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(e,t,s){this.loadPopupEvent(t,null,e,s)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(e){var t=e.definition;t.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),t.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),t.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),t.headerPopup&&this.initializeColumnHeaderPopup(e),t.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),t.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),t.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(e){var t=e.definition.headerPopupIcon,s;s=document.createElement("span"),s.classList.add("tabulator-header-popup-button"),t?(typeof t=="function"&&(t=t(e.getComponent())),t instanceof HTMLElement?s.appendChild(t):s.innerHTML=t):s.innerHTML="&vellip;",s.addEventListener("click",n=>{n.stopPropagation(),n.preventDefault(),this.loadPopupEvent(e.definition.headerPopup,n,e)}),e.titleElement.insertBefore(s,e.titleElement.firstChild)}loadPopupTableCellEvent(e,t,s){s._cell&&(s=s._cell),s.column.definition[e]&&this.loadPopupEvent(s.column.definition[e],t,s)}loadPopupTableColumnEvent(e,t,s){s._column&&(s=s._column),s.definition[e]&&this.loadPopupEvent(s.definition[e],t,s)}loadPopupEvent(e,t,s,n){var a;function l(h){a=h}s._group?s=s._group:s._row&&(s=s._row),e=typeof e=="function"?e.call(this.table,t,s.getComponent(),l):e,this.loadPopup(t,s,e,a,n)}loadPopup(e,t,s,n,a){var l=!(e instanceof MouseEvent),h,d;s instanceof HTMLElement?h=s:(h=document.createElement("div"),h.innerHTML=s),h.classList.add("tabulator-popup"),h.addEventListener("click",f=>{f.stopPropagation()}),l||e.preventDefault(),d=this.popup(h),typeof n=="function"&&d.renderCallback(n),e?d.show(e):d.show(t.getElement(),a||"center"),d.hideOnBlur(()=>{this.dispatchExternal("popupClosed",t.getComponent())}),this.dispatchExternal("popupOpened",t.getComponent())}}S(nr,"moduleName","popup");class rr extends I{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,t,s){var n=window.scrollX,a=window.scrollY,l=document.createElement("div"),h=document.createElement("div"),d=this.table.modules.export.generateTable(typeof s<"u"?s:this.table.options.printConfig,typeof t<"u"?t:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),f,g;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(l.classList.add("tabulator-print-header"),f=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof f=="string"?l.innerHTML=f:l.appendChild(f),this.element.appendChild(l)),this.element.appendChild(d),this.table.options.printFooter&&(h.classList.add("tabulator-print-footer"),g=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof g=="string"?h.innerHTML=g:h.appendChild(g),this.element.appendChild(h)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,d),window.print(),this.cleanup(),window.scrollTo(n,a),this.manualBlock=!1}}S(rr,"moduleName","print");class ar extends I{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var t=this,s;this.currentVersion++,s=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments),a;return!t.blocked&&s===t.currentVersion&&(t.block("data-push"),n.forEach(l=>{t.table.rowManager.addRowActual(l,!1)}),a=t.origFuncs.push.apply(e,arguments),t.unblock("data-push")),a}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments),a;return!t.blocked&&s===t.currentVersion&&(t.block("data-unshift"),n.forEach(l=>{t.table.rowManager.addRowActual(l,!0)}),a=t.origFuncs.unshift.apply(e,arguments),t.unblock("data-unshift")),a}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var n,a;return!t.blocked&&s===t.currentVersion&&(t.block("data-shift"),t.data.length&&(n=t.table.rowManager.getRowFromDataObject(t.data[0]),n&&n.deleteActual()),a=t.origFuncs.shift.call(e),t.unblock("data-shift")),a}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var n,a;return!t.blocked&&s===t.currentVersion&&(t.block("data-pop"),t.data.length&&(n=t.table.rowManager.getRowFromDataObject(t.data[t.data.length-1]),n&&n.deleteActual()),a=t.origFuncs.pop.call(e),t.unblock("data-pop")),a}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments),a=n[0]<0?e.length+n[0]:n[0],l=n[1],h=n[2]?n.slice(2):!1,d,f;if(!t.blocked&&s===t.currentVersion){if(t.block("data-splice"),h&&(d=e[a]?t.table.rowManager.getRowFromDataObject(e[a]):!1,d?h.forEach(b=>{t.table.rowManager.addRowActual(b,!0,d,!0)}):(h=h.slice().reverse(),h.forEach(b=>{t.table.rowManager.addRowActual(b,!0,!1,!0)}))),l!==0){var g=e.slice(a,typeof n[1]>"u"?n[1]:a+l);g.forEach((b,v)=>{var w=t.table.rowManager.getRowFromDataObject(b);w&&w.deleteActual(v!==g.length-1)})}(h||l!==0)&&t.table.rowManager.reRenderInPosition(),f=t.origFuncs.splice.apply(e,arguments),t.unblock("data-splice")}return f}})}unwatchData(){if(this.data!==!1)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var t=e.getData();for(var s in t)this.watchKey(e,t,s);this.table.options.dataTree&&this.watchTreeChildren(e)}watchTreeChildren(e){var t=this,s=e.getData()[this.table.options.dataTreeChildField],n={};s&&(n.push=s.push,Object.defineProperty(s,"push",{enumerable:!1,configurable:!0,value:()=>{if(!t.blocked){t.block("tree-push");var a=n.push.apply(s,arguments);this.rebuildTree(e),t.unblock("tree-push")}return a}}),n.unshift=s.unshift,Object.defineProperty(s,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!t.blocked){t.block("tree-unshift");var a=n.unshift.apply(s,arguments);this.rebuildTree(e),t.unblock("tree-unshift")}return a}}),n.shift=s.shift,Object.defineProperty(s,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!t.blocked){t.block("tree-shift");var a=n.shift.call(s);this.rebuildTree(e),t.unblock("tree-shift")}return a}}),n.pop=s.pop,Object.defineProperty(s,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!t.blocked){t.block("tree-pop");var a=n.pop.call(s);this.rebuildTree(e),t.unblock("tree-pop")}return a}}),n.splice=s.splice,Object.defineProperty(s,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!t.blocked){t.block("tree-splice");var a=n.splice.apply(s,arguments);this.rebuildTree(e),t.unblock("tree-splice")}return a}}))}rebuildTree(e){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(e,t,s){var n=this,a=Object.getOwnPropertyDescriptor(t,s),l=t[s],h=this.currentVersion;Object.defineProperty(t,s,{set:d=>{if(l=d,!n.blocked&&h===n.currentVersion){n.block("key");var f={};f[s]=d,e.updateData(f),n.unblock("key")}a.set&&a.set(d)},get:()=>(a.get&&a.get(),l)})}unwatchRow(e){var t=e.getData();for(var s in t)Object.defineProperty(t,s,{value:t[s]})}block(e){this.blocked||(this.blocked=e)}unblock(e){this.blocked===e&&(this.blocked=!1)}}S(ar,"moduleName","reactiveData");class or extends I{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(e){e.row.type==="row"&&(this.deInitializeComponent(e),this.initializeColumn("cell",e,e.column,e.element))}layoutColumnHeader(e){e.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(e),this.initializeColumn("header",e,e,e.element))}columnLayoutUpdated(e){var t=e.prevColumn();this.reinitializeColumn(e),t&&this.reinitializeColumn(t)}columnWidthUpdated(e){e.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(e)?this.table.modules.frozenColumns.leftColumns.forEach(t=>{this.reinitializeColumn(t)}):this.table.modules.frozenColumns.rightColumns.includes(e)&&this.table.modules.frozenColumns.rightColumns.forEach(t=>{this.reinitializeColumn(t)}))}frozenColumnOffset(e){var t=!1;return e.modules.frozen&&(t=e.modules.frozen.marginValue,e.modules.frozen.position==="left"?t+=e.getWidth()-3:t&&(t-=3)),t!==!1?t+"px":!1}reinitializeColumn(e){var t=this.frozenColumnOffset(e);e.cells.forEach(s=>{s.modules.resize&&s.modules.resize.handleEl&&(t&&(s.modules.resize.handleEl.style[e.modules.frozen.position]=t,s.modules.resize.handleEl.style["z-index"]=11),s.element.after(s.modules.resize.handleEl))}),e.modules.resize&&e.modules.resize.handleEl&&(t&&(e.modules.resize.handleEl.style[e.modules.frozen.position]=t),e.element.after(e.modules.resize.handleEl))}initializeColumn(e,t,s,n){var a=this,l=!1,h=s.definition.resizable,d={},f=s.getLastColumn();if(e==="header"&&(l=s.definition.formatter=="textarea"||s.definition.variableHeight,d={variableHeight:l}),(h===!0||h==e)&&this._checkResizability(f)){var g=document.createElement("span");g.className="tabulator-col-resize-handle",g.addEventListener("click",function(v){v.stopPropagation()});var b=function(v){a.startColumn=s,a.initialNextColumn=a.nextColumn=f.nextColumn(),a._mouseDown(v,f,g)};g.addEventListener("mousedown",b),g.addEventListener("touchstart",b,{passive:!0}),g.addEventListener("dblclick",v=>{var w=f.getWidth();v.stopPropagation(),f.reinitializeWidth(!0),w!==f.getWidth()&&(a.dispatch("column-resized",f),a.dispatchExternal("columnResized",f.getComponent()))}),s.modules.frozen&&(g.style.position="sticky",g.style[s.modules.frozen.position]=this.frozenColumnOffset(s)),d.handleEl=g,n.parentNode&&s.visible&&n.after(g)}t.modules.resize=d}deInitializeColumn(e){this.deInitializeComponent(e),e.cells.forEach(t=>{this.deInitializeComponent(t)})}deInitializeComponent(e){var t;e.modules.resize&&(t=e.modules.resize.handleEl,t&&t.parentElement&&t.parentElement.removeChild(t))}resizeHandle(e,t){e.modules.resize&&e.modules.resize.handleEl&&(e.modules.resize.handleEl.style.height=t)}resize(e,t){var s=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,n=s-this.startX,a=s-this.latestX,l,h;if(this.latestX=s,this.table.rtl&&(n=-n,a=-a),l=t.width==t.minWidth||t.width==t.maxWidth,t.setWidth(this.startWidth+n),h=t.width==t.minWidth||t.width==t.maxWidth,a<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(l&&h)){let d=this.nextColumn.getWidth();a>0&&d<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-a)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights()}calcGuidePosition(e,t,s){var n=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,a=s.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,l=this.table.element.getBoundingClientRect().x,h=t.element.getBoundingClientRect().left-l,d=n-this.startX,f=Math.max(a+d,h+t.minWidth);return t.maxWidth&&(f=Math.min(f,h+t.maxWidth)),f}_checkResizability(e){return e.definition.resizable}_mouseDown(e,t,s){var n=this,a;this.dispatchExternal("columnResizing",t.getComponent()),n.table.options.resizableColumnGuide&&(a=document.createElement("span"),a.classList.add("tabulator-col-resize-guide"),n.table.element.appendChild(a),setTimeout(()=>{a.style.left=n.calcGuidePosition(e,t,s)+"px"})),n.table.element.classList.add("tabulator-block-select");function l(d){n.table.options.resizableColumnGuide?a.style.left=n.calcGuidePosition(d,t,s)+"px":n.resize(d,t)}function h(d){n.table.options.resizableColumnGuide&&(n.resize(d,t),a.remove()),n.startColumn.modules.edit&&(n.startColumn.modules.edit.blocked=!1),n.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights(),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("mousemove",l),s.removeEventListener("touchmove",l),s.removeEventListener("touchend",h),n.table.element.classList.remove("tabulator-block-select"),n.startWidth!==t.getWidth()&&(n.table.columnManager.verticalAlignHeaders(),n.dispatch("column-resized",t),n.dispatchExternal("columnResized",t.getComponent()))}e.stopPropagation(),n.startColumn.modules.edit&&(n.startColumn.modules.edit.blocked=!0),n.startX=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,n.latestX=n.startX,n.startWidth=t.getWidth(),document.body.addEventListener("mousemove",l),document.body.addEventListener("mouseup",h),s.addEventListener("touchmove",l,{passive:!0}),s.addEventListener("touchend",h)}}S(or,"moduleName","resizeColumns");class lr extends I{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var t=this,s=e.getElement(),n=document.createElement("div");n.className="tabulator-row-resize-handle";var a=document.createElement("div");a.className="tabulator-row-resize-handle prev",n.addEventListener("click",function(d){d.stopPropagation()});var l=function(d){t.startRow=e,t._mouseDown(d,e,n)};n.addEventListener("mousedown",l),n.addEventListener("touchstart",l,{passive:!0}),a.addEventListener("click",function(d){d.stopPropagation()});var h=function(d){var f=t.table.rowManager.prevDisplayRow(e);f&&(t.startRow=f,t._mouseDown(d,f,a))};a.addEventListener("mousedown",h),a.addEventListener("touchstart",h,{passive:!0}),s.appendChild(n),s.appendChild(a)}resize(e,t){t.setHeight(this.startHeight+((typeof e.screenY>"u"?e.touches[0].screenY:e.screenY)-this.startY))}calcGuidePosition(e,t,s){var n=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,a=s.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,l=this.table.element.getBoundingClientRect().y,h=t.element.getBoundingClientRect().top-l,d=n-this.startY;return Math.max(a+d,h)}_mouseDown(e,t,s){var n=this,a;n.dispatchExternal("rowResizing",t.getComponent()),n.table.options.resizableRowGuide&&(a=document.createElement("span"),a.classList.add("tabulator-row-resize-guide"),n.table.element.appendChild(a),setTimeout(()=>{a.style.top=n.calcGuidePosition(e,t,s)+"px"})),n.table.element.classList.add("tabulator-block-select");function l(d){n.table.options.resizableRowGuide?a.style.top=n.calcGuidePosition(d,t,s)+"px":n.resize(d,t)}function h(d){n.table.options.resizableRowGuide&&(n.resize(d,t),a.remove()),document.body.removeEventListener("mouseup",l),document.body.removeEventListener("mousemove",l),s.removeEventListener("touchmove",l),s.removeEventListener("touchend",h),n.table.element.classList.remove("tabulator-block-select"),n.dispatchExternal("rowResized",t.getComponent())}e.stopPropagation(),n.startY=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,n.startHeight=t.getHeight(),document.body.addEventListener("mousemove",l),document.body.addEventListener("mouseup",h),s.addEventListener("touchmove",l,{passive:!0}),s.addEventListener("touchend",h)}}S(lr,"moduleName","resizeRows");class hr extends I{constructor(e){super(e),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e=this.table,t;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&e.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(s=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var n=Math.floor(s[0].contentRect.height),a=Math.floor(s[0].contentRect.width);(this.tableHeight!=n||this.tableWidth!=a)&&(this.tableHeight=n,this.tableWidth=a,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(e.element),t=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(t.getPropertyValue("max-height")||t.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(s=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var n=Math.floor(s[0].contentRect.height),a=Math.floor(s[0].contentRect.width);(this.containerHeight!=n||this.containerWidth!=a)&&(this.containerHeight=n,this.containerWidth=a,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell))&&(e.columnManager.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{this.visible=e[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(e){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(e))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}S(hr,"moduleName","resizeTable");function Rl(c,e,t){var s=document.createElement("div"),n=c.getRow()._row.modules.responsiveLayout;s.classList.add("tabulator-responsive-collapse-toggle"),s.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,c.getElement().classList.add("tabulator-row-handle");function a(l){var h=n.element;n.open=l,h&&(n.open?(s.classList.add("open"),h.style.display=""):(s.classList.remove("open"),h.style.display="none"))}return s.addEventListener("click",function(l){l.stopImmediatePropagation(),a(!n.open),c.getTable().rowManager.adjustTableSize()}),a(n.open),s}var yl={format:{formatters:{responsiveCollapse:Rl}}};class fs extends I{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((t,s)=>{t.modules.responsive&&t.modules.responsive.order&&t.modules.responsive.visible&&(t.modules.responsive.index=s,e.push(t),!t.visible&&this.mode==="collapse"&&this.hiddenColumns.push(t))}),e=e.reverse(),e=e.sort((t,s)=>{var n=s.modules.responsive.order-t.modules.responsive.order;return n||s.modules.responsive.index-t.modules.responsive.index}),this.columns=e,this.mode==="collapse"&&this.generateCollapsedContent();for(let t of this.table.columnManager.columnsByIndex)if(t.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=t;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var t=e.getDefinition();e.modules.responsive={order:typeof t.responsive>"u"?1:t.responsive,visible:t.visible!==!1}}initializeRow(e){var t;e.type!=="calc"&&(t=document.createElement("div"),t.classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:t,open:this.collapseStartOpen},this.collapseStartOpen||(t.style.display="none"))}layoutRow(e){var t=e.getElement();e.modules.responsiveLayout&&(t.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,t){!t&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initializeResponsivity())}hideColumn(e){var t=this.hiddenColumns.length;e.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!t&&this.collapseHandleColumn.show())}showColumn(e){var t;e.show(!1,!0),e.setWidth(e.getWidth()),this.mode==="collapse"&&(t=this.hiddenColumns.indexOf(e),t>-1&&this.hiddenColumns.splice(t,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=!0;e;){let t=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),s=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-t;if(s<0){let n=this.columns[this.index];n?(this.hideColumn(n),this.index++):e=!1}else{let n=this.columns[this.index-1];n&&s>0&&s>=n.getWidth()?(this.showColumn(n),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this.table.rowManager.getDisplayRows();e.forEach(t=>{this.generateCollapsedRowContent(t)})}generateCollapsedRowContent(e){var t,s;if(e.modules.responsiveLayout){for(t=e.modules.responsiveLayout.element;t.firstChild;)t.removeChild(t.firstChild);s=this.collapseFormatter(this.generateCollapsedRowData(e)),s&&t.appendChild(s),e.calcHeight(!0)}}generateCollapsedRowData(e){var t=e.getData(),s=[],n;return this.hiddenColumns.forEach(a=>{var l=a.getFieldValue(t);if(a.definition.title&&a.field)if(a.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let d=function(f){f()};var h=d;n={value:!1,data:{},getValue:function(){return l},getData:function(){return t},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return a.getComponent()},getTable:()=>this.table},s.push({field:a.field,title:a.definition.title,value:a.modules.format.formatter.call(this.table.modules.format,n,a.modules.format.params,d)})}else s.push({field:a.field,title:a.definition.title,value:l})}),s}formatCollapsedData(e){var t=document.createElement("table");return e.forEach(s=>{var n=document.createElement("tr"),a=document.createElement("td"),l=document.createElement("td"),h,d=document.createElement("strong");a.appendChild(d),this.modules.localize.bind("columns|"+s.field,function(f){d.innerHTML=f||s.title}),s.value instanceof Node?(h=document.createElement("div"),h.appendChild(s.value),l.appendChild(h)):l.innerHTML=s.value,n.appendChild(a),n.appendChild(l),t.appendChild(n)}),Object.keys(e).length?t:""}}S(fs,"moduleName","responsiveLayout"),S(fs,"moduleExtensions",yl);function Tl(c,e,t){var s=document.createElement("input"),n=!1;if(s.type="checkbox",s.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(s.addEventListener("click",l=>{l.stopPropagation()}),typeof c.getRow=="function"){var a=c.getRow();a instanceof ui?(s.addEventListener("change",l=>{this.table.options.selectableRowsRangeMode==="click"&&n?n=!1:a.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&s.addEventListener("click",l=>{n=!0,this.table.modules.selectRow.handleComplexRowClick(a._row,l)}),s.checked=a.isSelected&&a.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(a,s)):s=""}else s.addEventListener("change",l=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(e.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(s);return s}var Al={format:{formatters:{rowSelection:Tl}}};class ms extends I{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(t,s){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(e,t){return e==="selected"?this.selectedRows:t}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){var t=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],t&&e!==!0&&this._rowSelectionChanged()}initializeRow(e){var t=this,s=t.checkRowSelectability(e),n=e.getElement(),a=function(){setTimeout(function(){t.selecting=!1},50),document.body.removeEventListener("mouseup",a)};e.modules.select={selected:!1},n.classList.toggle("tabulator-selectable",s),n.classList.toggle("tabulator-unselectable",!s),t.checkRowSelectability(e)&&t.table.options.selectableRows&&t.table.options.selectableRows!="highlight"&&(t.table.options.selectableRowsRangeMode==="click"?n.addEventListener("click",this.handleComplexRowClick.bind(this,e)):(n.addEventListener("click",function(l){(!t.table.modExists("edit")||!t.table.modules.edit.getCurrentCell())&&t.table._clearSelection(),t.selecting||t.toggleRow(e)}),n.addEventListener("mousedown",function(l){if(l.shiftKey)return t.table._clearSelection(),t.selecting=!0,t.selectPrev=[],document.body.addEventListener("mouseup",a),document.body.addEventListener("keyup",a),t.toggleRow(e),!1}),n.addEventListener("mouseenter",function(l){t.selecting&&(t.table._clearSelection(),t.toggleRow(e),t.selectPrev[1]==e&&t.toggleRow(t.selectPrev[0]))}),n.addEventListener("mouseout",function(l){t.selecting&&(t.table._clearSelection(),t.selectPrev.unshift(e))})))}handleComplexRowClick(e,t){if(t.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||e;var s=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),n=this.table.rowManager.getDisplayRowIndex(e),a=s<=n?s:n,l=s>=n?s:n,h=this.table.rowManager.getDisplayRows().slice(0),d=h.splice(a,l-a+1);t.ctrlKey||t.metaKey?(d.forEach(f=>{f!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(e)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(f):this.toggleRow(f))}),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&d.length>this.table.options.selectableRows&&(d=d.slice(0,this.table.options.selectableRows)),this.selectRows(d)),this.table._clearSelection()}else t.ctrlKey||t.metaKey?(this.toggleRow(e),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.selectRows(e),this.lastClickedRow=e)}checkRowSelectability(e){return e&&e.type==="row"?this.table.options.selectableRowsCheck.call(this.table,e.getComponent()):!1}toggleRow(e){this.checkRowSelectability(e)&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var t=[],s,n;switch(typeof e){case"undefined":s=this.table.rowManager.rows;break;case"number":s=this.table.rowManager.findRow(e);break;case"string":s=this.table.rowManager.findRow(e),s||(s=this.table.rowManager.getRows(e));break;default:s=e;break}Array.isArray(s)?s.length&&(s.forEach(a=>{n=this._selectRow(a,!0,!0),n&&t.push(n)}),this._rowSelectionChanged(!1,t)):s&&this._selectRow(s,!1,!0)}_selectRow(e,t,s){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!s&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var n=this.table.rowManager.findRow(e);if(n){if(this.selectedRows.indexOf(n)==-1)return n.getElement().classList.add("tabulator-selected"),n.modules.select||(n.modules.select={}),n.modules.select.selected=!0,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!0),this.selectedRows.push(n),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(n,!0),this.dispatchExternal("rowSelected",n.getComponent()),this._rowSelectionChanged(t,n),n}else t||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return this.selectedRows.indexOf(e)!==-1}deselectRows(e,t){var s=[],n,a;switch(typeof e){case"undefined":n=Object.assign([],this.selectedRows);break;case"number":n=this.table.rowManager.findRow(e);break;case"string":n=this.table.rowManager.findRow(e),n||(n=this.table.rowManager.getRows(e));break;default:n=e;break}Array.isArray(n)?n.length&&(n.forEach(l=>{a=this._deselectRow(l,!0,!0),a&&s.push(a)}),this._rowSelectionChanged(t,[],s)):n&&this._deselectRow(n,t,!0)}_deselectRow(e,t){var s=this,n=s.table.rowManager.findRow(e),a,l;if(n){if(a=s.selectedRows.findIndex(function(h){return h==n}),a>-1)return l=n.getElement(),l&&l.classList.remove("tabulator-selected"),n.modules.select||(n.modules.select={}),n.modules.select.selected=!1,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!1),s.selectedRows.splice(a,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(n,!1),this.dispatchExternal("rowDeselected",n.getComponent()),s._rowSelectionChanged(t,void 0,n),n}else t||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getComponent())}),e}_rowSelectionChanged(e,t=[],s=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||(Array.isArray(t)||(t=[t]),t=t.map(n=>n.getComponent()),Array.isArray(s)||(s=[s]),s=s.map(n=>n.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),t,s))}registerRowSelectCheckbox(e,t){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=t}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,t){var s=this.table.modules.dataTree.getChildren(e,!0,!0);if(t)for(let n of s)this._selectRow(n,!0);else for(let n of s)this._deselectRow(n,!0)}}S(ms,"moduleName","selectRow"),S(ms,"moduleExtensions",Al);class Ll{constructor(e){return this._range=e,new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._range.table.componentFunctionBinder.handle("range",t._range,s)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(e=>e.getComponent())}getColumns(){return this._range.getColumns().map(e=>e.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(e,t){this._range.destroyedGuard("setBounds")&&this._range.setBounds(e&&e._cell,t&&t._cell)}setStartBound(e){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}setEndBound(e){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}}class Sl extends le{constructor(e,t,s,n){super(e),this.rangeManager=t,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=e,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(s,n)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(e,t){this._updateMinMax(),e&&this.setBounds(e,t||e)}setStart(e,t){(this.start.row!==e||this.start.col!==t)&&(this.start.row=e,this.start.col=t,this.initializing.start=!0,this._updateMinMax())}setEnd(e,t){(this.end.row!==e||this.end.col!==t)&&(this.end.row=e,this.end.col=t,this.initializing.end=!0,this._updateMinMax())}setBounds(e,t,s){e&&this.setStartBound(e),this.setEndBound(t||e),this.rangeManager.layoutElement(s)}setStartBound(e){var t,s;e.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,e.getPosition()-1):(t=e.row.position-1,s=e.column.getPosition()-1,e.column===this.rangeManager.rowHeader?this.setStart(t,1):this.setStart(t,s))}setEndBound(e){var t=this._getTableRows().length,s,n,a;e.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(t-1,e.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,e.getPosition()-1)):(s=e.row.position-1,n=e.column.getPosition()-1,a=e.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(s,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&a?this.setEnd(s,0):this.rangeManager.selecting==="column"?this.setEnd(t-1,n):this.setEnd(s,n))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}layout(){var e=this.table.rowManager.renderer.vDomTop,t=this.table.rowManager.renderer.vDomBottom,s=this.table.columnManager.renderer.leftCol,n=this.table.columnManager.renderer.rightCol,a,l,h,d,f,g,b,v,w,y;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(n+=1),e==null&&(e=0),t==null&&(t=1/0),s==null&&(s=0),n==null&&(n=1/0),this.overlaps(s,e,n,t)&&(a=Math.max(this.top,e),l=Math.min(this.bottom,t),h=Math.max(this.left,s),d=Math.min(this.right,n),f=this.rangeManager.getCell(a,h),g=this.rangeManager.getCell(l,d),b=f.getElement(),v=g.getElement(),w=f.row.getElement(),y=g.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=w.offsetWidth-b.offsetLeft-b.offsetWidth+"px",this.element.style.width=b.offsetLeft+b.offsetWidth-v.offsetLeft+"px"):(this.element.style.left=w.offsetLeft+b.offsetLeft+"px",this.element.style.width=v.offsetLeft+v.offsetWidth-b.offsetLeft+"px"),this.element.style.top=w.offsetTop+"px",this.element.style.height=y.offsetTop+y.offsetHeight-w.offsetTop+"px")}atTopLeft(e){return e.row.position-1===this.top&&e.column.getPosition()-1===this.left}atBottomRight(e){return e.row.position-1===this.bottom&&e.column.getPosition()-1===this.right}occupies(e){return this.occupiesRow(e.row)&&this.occupiesColumn(e.column)}occupiesRow(e){return this.top<=e.position-1&&e.position-1<=this.bottom}occupiesColumn(e){return this.left<=e.getPosition()-1&&e.getPosition()-1<=this.right}overlaps(e,t,s,n){return!(this.left>s||e>this.right||this.top>n||t>this.bottom)}getData(){var e=[],t=this.getRows(),s=this.getColumns();return t.forEach(n=>{var a=n.getData(),l={};s.forEach(h=>{l[h.field]=a[h.field]}),e.push(l)}),e}getCells(e,t){var s=[],n=this.getRows(),a=this.getColumns();return e?s=n.map(l=>{var h=[];return l.getCells().forEach(d=>{a.includes(d.column)&&h.push(t?d.getComponent():d)}),h}):n.forEach(l=>{l.getCells().forEach(h=>{a.includes(h.column)&&s.push(t?h.getComponent():h)})}),s}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var e=this.getCells(),t=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),e.forEach(s=>{s.setValue(t)}),this.table.restoreRedraw()}getBounds(e){var t=this.getCells(!1,e),s={start:null,end:null};return t.length?(s.start=t[0],s.end=t[t.length-1]):console.warn("No bounds defined on range"),s}getComponent(){return this.component||(this.component=new Ll(this)),this.component}destroy(e){this.destroyed=!0,this.element.remove(),e&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(e){return this.destroyed&&console.warn("You cannot call the "+e+" function on a destroyed range"),!this.destroyed}}var xl={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},Ml={rangeJumpLeft:function(c){this.dispatch("keybinding-nav-range",c,"left",!0,!1)},rangeJumpRight:function(c){this.dispatch("keybinding-nav-range",c,"right",!0,!1)},rangeJumpUp:function(c){this.dispatch("keybinding-nav-range",c,"up",!0,!1)},rangeJumpDown:function(c){this.dispatch("keybinding-nav-range",c,"down",!0,!1)},rangeExpandLeft:function(c){this.dispatch("keybinding-nav-range",c,"left",!1,!0)},rangeExpandRight:function(c){this.dispatch("keybinding-nav-range",c,"right",!1,!0)},rangeExpandUp:function(c){this.dispatch("keybinding-nav-range",c,"up",!1,!0)},rangeExpandDown:function(c){this.dispatch("keybinding-nav-range",c,"down",!1,!0)},rangeExpandJumpLeft:function(c){this.dispatch("keybinding-nav-range",c,"left",!0,!0)},rangeExpandJumpRight:function(c){this.dispatch("keybinding-nav-range",c,"right",!0,!0)},rangeExpandJumpUp:function(c){this.dispatch("keybinding-nav-range",c,"up",!0,!0)},rangeExpandJumpDown:function(c){this.dispatch("keybinding-nav-range",c,"down",!0,!0)}},Fl={range:function(c){var e=[],t=this.table.modules.selectRange.activeRange,s=!1,n,a,l,h,d;return d=c.length,t&&(n=t.getBounds(),a=n.start,n.start===n.end&&(s=!0),a&&(e=this.table.rowManager.activeRows.slice(),l=e.indexOf(a.row),s?h=c.length:h=e.indexOf(n.end.row)-l+1,l>-1&&(this.table.blockRedraw(),e=e.slice(l,l+h),e.forEach((f,g)=>{f.updateData(c[g%d])}),this.table.restoreRedraw()))),e}},Dl={range:function(c){var e=[],t=[],s=this.table.modules.selectRange.activeRange,n=!1,a,l,h,d,f;return s&&(a=s.getBounds(),l=a.start,a.start===a.end&&(n=!0),l&&(c=c.split(`
`),c.forEach(function(g){e.push(g.split("	"))}),e.length&&(d=this.table.columnManager.getVisibleColumnsByIndex(),f=d.indexOf(l.column),f>-1)))?(n?h=e[0].length:h=d.indexOf(a.end.column)-f+1,d=d.slice(f,f+h),e.forEach(g=>{var b={},v=g.length;d.forEach(function(w,y){b[w.field]=g[y%v]}),t.push(b)}),t):!1}},Bl={range:function(){var c=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&c.unshift(this.columnManager.rowHeader),c}},Ul={range:function(){return this.modules.selectRange.selectedRows()}},Pl={keybindings:{bindings:xl,actions:Ml},clipboard:{pasteActions:Fl,pasteParsers:Dl},export:{columnLookups:Bl,rowLookups:Ul}};class hi extends I{constructor(e){super(e),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableOption("selectableRangeAutoFocus",!0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(e=>e.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(e=>e.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(e){this.columnSelection&&e.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),e.modules.edit}updateHeaderColumn(){var e;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(e=this.table.modules.frozenColumns.getFrozenColumns(),(e.length>1||e.length===1&&e[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(e=>e.getComponent())}getRangesData(){return this.ranges.map(e=>e.getData())}addRangeFromComponent(e,t){return e=e?e._cell:null,t=t?t._cell:null,this.addRange(e,t)}cellGetRanges(e){var t=[];return e.column===this.rowHeader?t=this.ranges.filter(s=>s.occupiesRow(e.row)):t=this.ranges.filter(s=>s.occupies(e)),t.map(s=>s.getComponent())}rowGetRanges(e){var t=this.ranges.filter(s=>s.occupiesRow(e));return t.map(s=>s.getComponent())}colGetRanges(e){var t=this.ranges.filter(s=>s.occupiesColumn(e));return t.map(s=>s.getComponent())}_handleMouseUp(e){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(e){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(e.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),e.preventDefault()}(e.key==="Backspace"||e.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(e){var t;this.restoreFocus();try{document.selection?(t=document.body.createTextRange(),t.moveToElementText(e.getElement()),t.select()):window.getSelection&&(t=document.createRange(),t.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(t))}catch{}}restoreFocus(e){return this.table.rowManager.element.focus(),!0}handleColumnResized(e){var t;this.selecting!=="column"&&this.selecting!=="all"||(t=this.ranges.some(s=>s.occupiesColumn(e)),t&&this.ranges.forEach(s=>{var n=s.getColumns(!0);n.forEach(a=>{a!==e&&a.setWidth(e.width)})}))}handleColumnMoving(e,t){this.resetRanges().setBounds(t),this.overlay.style.visibility="hidden"}handleColumnMoved(e,t,s){this.activeRange.setBounds(e),this.layoutElement()}handleColumnMouseDown(e,t){e.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(t)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(t)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,t))}handleColumnMouseMove(e,t){t===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,t,!0)}renderCell(e){var t=e.getElement(),s=this.ranges.findIndex(n=>n.occupies(e));t.classList.toggle("tabulator-range-selected",s!==-1),t.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(e)&&this.ranges[0].atBottomRight(e)),t.dataset.range=s}handleCellMouseDown(e,t){e.button===2&&(this.activeRange.occupies(t)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(t.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,t))}handleCellMouseMove(e,t){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,t,!0)}handleCellClick(e,t){this.initializeFocus(t)}handleEditingCell(e){this.activeRange&&this.activeRange.setBounds(e)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(e,t){this.navigate(!1,!1,e),t.preventDefault()}keyNavigateRange(e,t,s,n){this.navigate(s,n,t),e.preventDefault()}navigate(e,t,s){var n=!1,a,l,h,d,f,g,b,v,w,y,R;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(x=>x===this.activeRange?(x.setEnd(x.start.row,x.start.col),!0):(x.destroy(),!1))),a=this.activeRange,h={top:a.top,bottom:a.bottom,left:a.left,right:a.right},l=t?a.end:a.start,d=l.row,f=l.col,e)switch(s){case"left":f=this.findJumpCellLeft(a.start.row,l.col);break;case"right":f=this.findJumpCellRight(a.start.row,l.col);break;case"up":d=this.findJumpCellUp(l.row,a.start.col);break;case"down":d=this.findJumpCellDown(l.row,a.start.col);break}else{if(t&&(this.selecting==="row"&&(s==="left"||s==="right")||this.selecting==="column"&&(s==="up"||s==="down")))return;switch(s){case"left":f=Math.max(f-1,0);break;case"right":f=Math.min(f+1,this.getTableColumns().length-1);break;case"up":d=Math.max(d-1,0);break;case"down":d=Math.min(d+1,this.getTableRows().length-1);break}}if(this.rowHeader&&f===0&&(f=1),t||a.setStart(d,f),a.setEnd(d,f),t||(this.selecting="cell"),n=h.top!==a.top||h.bottom!==a.bottom||h.left!==a.left||h.right!==a.right,n)return g=this.getRowByRangePos(a.end.row),b=this.getColumnByRangePos(a.end.col),v=g.getElement().getBoundingClientRect(),y=b.getElement().getBoundingClientRect(),w=this.table.rowManager.getElement().getBoundingClientRect(),R=this.table.columnManager.getElement().getBoundingClientRect(),v.top>=w.top&&v.bottom<=w.bottom||(g.getElement().parentNode&&b.getElement().parentNode?this.autoScroll(a,g.getElement(),b.getElement()):g.getComponent().scrollTo(void 0,!1)),y.left>=R.left+this.getRowHeaderWidth()&&y.right<=R.right||(g.getElement().parentNode&&b.getElement().parentNode?this.autoScroll(a,g.getElement(),b.getElement()):b.getComponent().scrollTo(void 0,!1)),this.layoutElement(),!0}rangeRemoved(e){this.ranges=this.ranges.filter(t=>t!==e),this.activeRange===e&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(e,t,s,n,a){return s&&(t=t.reverse()),this.findJumpItem(n,a,t,function(l){return l.getData()[e.getField()]})}findJumpCol(e,t,s,n,a){return s&&(t=t.reverse()),this.findJumpItem(n,a,t,function(l){return e.getData()[l.getField()]})}findJumpItem(e,t,s,n){var a;for(let l of s){let h=n(l);if(e){if(a=l,h)break}else if(t){if(a=l,h)break}else if(h)a=l;else break}return a}findJumpCellLeft(e,t){var s=this.getRowByRangePos(e),n=this.getTableColumns(),a=this.isEmpty(s.getData()[n[t].getField()]),l=n[t-1]?this.isEmpty(s.getData()[n[t-1].getField()]):!1,h=this.rowHeader?n.slice(1,t):n.slice(0,t),d=this.findJumpCol(s,h,!0,a,l);return d?d.getPosition()-1:t}findJumpCellRight(e,t){var s=this.getRowByRangePos(e),n=this.getTableColumns(),a=this.isEmpty(s.getData()[n[t].getField()]),l=n[t+1]?this.isEmpty(s.getData()[n[t+1].getField()]):!1,h=this.findJumpCol(s,n.slice(t+1,n.length),!1,a,l);return h?h.getPosition()-1:t}findJumpCellUp(e,t){var s=this.getColumnByRangePos(t),n=this.getTableRows(),a=this.isEmpty(n[e].getData()[s.getField()]),l=n[e-1]?this.isEmpty(n[e-1].getData()[s.getField()]):!1,h=this.findJumpRow(s,n.slice(0,e),!0,a,l);return h?h.position-1:e}findJumpCellDown(e,t){var s=this.getColumnByRangePos(t),n=this.getTableRows(),a=this.isEmpty(n[e].getData()[s.getField()]),l=n[e+1]?this.isEmpty(n[e+1].getData()[s.getField()]):!1,h=this.findJumpRow(s,n.slice(e+1,n.length),!1,a,l);return h?h.position-1:e}newSelection(e,t){var s;if(t.type==="column"){if(!this.columnSelection)return;if(t===this.rowHeader){s=this.resetRanges(),this.selecting="all";var n,a=this.getCell(-1,-1);this.rowHeader?n=this.getCell(0,1):n=this.getCell(0,0),s.setBounds(n,a);return}else this.selecting="column"}else t.column===this.rowHeader?this.selecting="row":this.selecting="cell";e.shiftKey?this.activeRange.setBounds(!1,t):e.ctrlKey?this.addRange().setBounds(t):this.resetRanges().setBounds(t)}autoScroll(e,t,s){var n=this.table.rowManager.element,a,l,h,d;typeof t>"u"&&(t=this.getRowByRangePos(e.end.row).getElement()),typeof s>"u"&&(s=this.getColumnByRangePos(e.end.col).getElement()),a={left:s.offsetLeft,right:s.offsetLeft+s.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight},l={left:n.scrollLeft+this.getRowHeaderWidth(),right:Math.ceil(n.scrollLeft+n.clientWidth),top:n.scrollTop,bottom:n.scrollTop+n.offsetHeight-this.table.rowManager.scrollbarWidth},h=l.left<a.left&&a.left<l.right&&l.left<a.right&&a.right<l.right,d=l.top<a.top&&a.top<l.bottom&&l.top<a.bottom&&a.bottom<l.bottom,h||(a.left<l.left?n.scrollLeft=a.left-this.getRowHeaderWidth():a.right>l.right&&(n.scrollLeft=Math.min(a.right-n.clientWidth,a.left-this.getRowHeaderWidth()))),d||(a.top<l.top?n.scrollTop=a.top:a.bottom>l.bottom&&(n.scrollTop=a.bottom-n.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(e){e&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(e){var t;e?t=this.table.rowManager.getVisibleRows(!0):t=this.table.rowManager.getRows(),t.forEach(s=>{s.type==="row"&&(this.layoutRow(s),s.cells.forEach(n=>this.renderCell(n)))}),this.getTableColumns().forEach(s=>{this.layoutColumn(s)}),this.layoutRanges()}layoutRow(e){var t=e.getElement(),s=!1,n=this.ranges.some(a=>a.occupiesRow(e));this.selecting==="row"?s=n:this.selecting==="all"&&(s=!0),t.classList.toggle("tabulator-range-selected",s),t.classList.toggle("tabulator-range-highlight",n)}layoutColumn(e){var t=e.getElement(),s=!1,n=this.ranges.some(a=>a.occupiesColumn(e));this.selecting==="column"?s=n:this.selecting==="all"&&(s=!0),t.classList.toggle("tabulator-range-selected",s),t.classList.toggle("tabulator-range-highlight",n)}layoutRanges(){var e,t,s;this.table.initialized&&(e=this.getActiveCell(),e&&(t=e.getElement(),s=e.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=s.offsetWidth-t.offsetLeft-t.offsetWidth+"px":this.activeRangeCellElement.style.left=s.offsetLeft+t.offsetLeft+"px",this.activeRangeCellElement.style.top=s.offsetTop+"px",this.activeRangeCellElement.style.width=t.offsetWidth+"px",this.activeRangeCellElement.style.height=s.offsetHeight+"px",this.ranges.forEach(n=>n.layout()),this.overlay.style.visibility="visible"))}getCell(e,t){var s;return t<0&&(t=this.getTableColumns().length+t,t<0)?null:(e<0&&(e=this.getTableRows().length+e),s=this.table.rowManager.getRowFromPosition(e+1),s?s.getCells(!1,!0).filter(n=>n.column.visible)[t]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(e){return this.getTableRows()[e]}getColumnByRangePos(e){return this.getTableColumns()[e]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(e,t){var s;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),s=new Sl(this.table,this,e,t),this.activeRange=s,this.ranges.push(s),this.rangeContainer.appendChild(s.element),s}resetRanges(){var e,t,s;return this.ranges.forEach(n=>n.destroy()),this.ranges=[],e=this.addRange(),this.table.rowManager.activeRows.length&&(s=this.table.rowManager.activeRows[0].cells.filter(n=>n.column.visible),t=s[this.rowHeader?1:0],t&&(e.setBounds(t),this.options("selectableRangeAutoFocus")&&this.initializeFocus(t))),e}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(e){return e?this.activeRange.getRows().map(t=>t.getComponent()):this.activeRange.getRows()}selectedColumns(e){return e?this.activeRange.getColumns().map(t=>t.getComponent()):this.activeRange.getColumns()}getRowHeaderWidth(){return this.rowHeader?this.rowHeader.getElement().offsetWidth:0}isEmpty(e){return e==null||e===""}}S(hi,"moduleName","selectRange"),S(hi,"moduleInitOrder",1),S(hi,"moduleExtensions",Pl);function kl(c,e,t,s,n,a,l){var h=l.alignEmptyValues,d=l.decimalSeparator,f=l.thousandSeparator,g=0;if(c=String(c),e=String(e),f&&(c=c.split(f).join(""),e=e.split(f).join("")),d&&(c=c.split(d).join("."),e=e.split(d).join(".")),c=parseFloat(c),e=parseFloat(e),isNaN(c))g=isNaN(e)?0:-1;else if(isNaN(e))g=1;else return c-e;return(h==="top"&&a==="desc"||h==="bottom"&&a==="asc")&&(g*=-1),g}function Ol(c,e,t,s,n,a,l){var h=l.alignEmptyValues,d=0,f;if(!c)d=e?-1:0;else if(!e)d=1;else{switch(typeof l.locale){case"boolean":l.locale&&(f=this.langLocale());break;case"string":f=l.locale;break}return String(c).toLowerCase().localeCompare(String(e).toLowerCase(),f)}return(h==="top"&&a==="desc"||h==="bottom"&&a==="asc")&&(d*=-1),d}function ys(c,e,t,s,n,a,l){var h=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),d=l.format||"dd/MM/yyyy HH:mm:ss",f=l.alignEmptyValues,g=0;if(typeof h<"u"){if(h.isDateTime(c)||(d==="iso"?c=h.fromISO(String(c)):c=h.fromFormat(String(c),d)),h.isDateTime(e)||(d==="iso"?e=h.fromISO(String(e)):e=h.fromFormat(String(e),d)),!c.isValid)g=e.isValid?-1:0;else if(!e.isValid)g=1;else return c-e;return(f==="top"&&a==="desc"||f==="bottom"&&a==="asc")&&(g*=-1),g}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function Il(c,e,t,s,n,a,l){return l.format||(l.format="dd/MM/yyyy"),ys.call(this,c,e,t,s,n,a,l)}function Nl(c,e,t,s,n,a,l){return l.format||(l.format="HH:mm"),ys.call(this,c,e,t,s,n,a,l)}function zl(c,e,t,s,n,a,l){var h=c===!0||c==="true"||c==="True"||c===1?1:0,d=e===!0||e==="true"||e==="True"||e===1?1:0;return h-d}function Hl(c,e,t,s,n,a,l){var h=l.type||"length",d=l.alignEmptyValues,f=0,g=this.table,b;l.valueMap&&(typeof l.valueMap=="string"?b=function(w){return w.map(y=>Y.retrieveNestedData(g.options.nestedFieldSeparator,l.valueMap,y))}:b=l.valueMap);function v(w){var y;switch(b&&(w=b(w)),h){case"length":y=w.length;break;case"sum":y=w.reduce(function(R,x){return R+x});break;case"max":y=Math.max.apply(null,w);break;case"min":y=Math.min.apply(null,w);break;case"avg":y=w.reduce(function(R,x){return R+x})/w.length;break;case"string":y=w.join("");break}return y}if(!Array.isArray(c))f=Array.isArray(e)?-1:0;else if(!Array.isArray(e))f=1;else return h==="string"?String(v(c)).toLowerCase().localeCompare(String(v(e)).toLowerCase()):v(e)-v(c);return(d==="top"&&a==="desc"||d==="bottom"&&a==="asc")&&(f*=-1),f}function Kl(c,e,t,s,n,a,l){var h=typeof c>"u"?0:1,d=typeof e>"u"?0:1;return h-d}function Gl(c,e,t,s,n,a,l){var h,d,f,g,b=0,v,w=/(\d+)|(\D+)/g,y=/\d/,R=l.alignEmptyValues,x=0;if(!c&&c!==0)x=!e&&e!==0?0:-1;else if(!e&&e!==0)x=1;else{if(isFinite(c)&&isFinite(e))return c-e;if(h=String(c).toLowerCase(),d=String(e).toLowerCase(),h===d)return 0;if(!(y.test(h)&&y.test(d)))return h>d?1:-1;for(h=h.match(w),d=d.match(w),v=h.length>d.length?d.length:h.length;b<v;)if(f=h[b],g=d[b++],f!==g)return isFinite(f)&&isFinite(g)?(f.charAt(0)==="0"&&(f="."+f),g.charAt(0)==="0"&&(g="."+g),f-g):f>g?1:-1;return h.length>d.length}return(R==="top"&&a==="desc"||R==="bottom"&&a==="asc")&&(x*=-1),x}var Vl={number:kl,string:Ol,date:Il,time:Nl,datetime:ys,boolean:zl,array:Hl,exists:Kl,alphanum:Gl};const st=class st extends I{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,t,s,n){var a=this.getSort();return a.forEach(l=>{delete l.column}),n.sort=a,n}userSetSort(e,t){this.setSort(e,t),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var t=!1,s,n;switch(typeof e.definition.sorter){case"string":st.sorters[e.definition.sorter]?t=st.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":t=e.definition.sorter;break}if(e.modules.sort={sorter:t,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},e.definition.headerSort!==!1){switch(s=e.getElement(),s.classList.add("tabulator-sortable"),n=document.createElement("div"),n.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":n.classList.add("tabulator-col-sorter-element");break;case"header":s.classList.add("tabulator-col-sorter-element");break;default:s.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":n.appendChild(this.table.options.headerSortElement);break;default:n.innerHTML=this.table.options.headerSortElement}e.titleHolderElement.appendChild(n),e.modules.sort.element=n,this.setColumnHeaderSortIcon(e,"none"),this.table.options.headerSortClickElement==="icon"&&n.addEventListener("mousedown",a=>{a.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?n:s).addEventListener("click",a=>{var l="",h=[],d=!1;if(e.modules.sort){if(e.modules.sort.tristate)e.modules.sort.dir=="none"?l=e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?l=e.modules.sort.dir=="asc"?"desc":"asc":l="none";else switch(e.modules.sort.dir){case"asc":l="desc";break;case"desc":l="asc";break;default:l=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(a.shiftKey||a.ctrlKey)?(h=this.getSort(),d=h.findIndex(f=>f.field===e.getField()),d>-1?(h[d].dir=l,d=h.splice(d,1)[0],l!="none"&&h.push(d)):l!="none"&&h.push({column:e,dir:l}),this.setSort(h)):l=="none"?this.clear():this.setSort(e,l),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=this,t=[];return e.sortList.forEach(function(s){s.column&&t.push({column:s.column.getComponent(),field:s.column.getField(),dir:s.dir})}),t}setSort(e,t){var s=this,n=[];Array.isArray(e)||(e=[{column:e,dir:t}]),e.forEach(function(a){var l;l=s.table.columnManager.findColumn(a.column),l?(a.column=l,n.push(a),s.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",a.column)}),s.sortList=n,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var t=this.table.rowManager.activeRows[0],s="string",n,a;if(t&&(t=t.getData(),n=e.getField(),n))switch(a=e.getFieldValue(t),typeof a){case"undefined":s="string";break;case"boolean":s="boolean";break;default:!isNaN(a)&&a!==""?s="number":a.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(s="alphanum");break}return st.sorters[s]}sort(e,t){var s=this,n=this.table.options.sortOrderReverse?s.sortList.slice().reverse():s.sortList,a=[],l=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",s.getSort()),t||s.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(n.forEach(function(h,d){var f;h.column&&(f=h.column.modules.sort,f&&(f.sorter||(f.sorter=s.findSorter(h.column)),h.params=typeof f.params=="function"?f.params(h.column.getComponent(),h.dir):f.params,a.push(h)),t||s.setColumnHeader(h.column,h.dir))}),a.length&&s._sortItems(e,a)):t||n.forEach(function(h,d){s.setColumnHeader(h.column,h.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(h=>{l.push(h.getComponent())}),this.dispatchExternal("dataSorted",s.getSort(),l)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(e=>{e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(e,"none"))})}setColumnHeader(e,t){e.modules.sort.dir=t,e.getElement().setAttribute("aria-sort",t==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(e,t)}setColumnHeaderSortIcon(e,t){var s=e.modules.sort.element,n;if(e.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;s.firstChild;)s.removeChild(s.firstChild);n=this.table.options.headerSortElement.call(this.table,e.getComponent(),t),typeof n=="object"?s.appendChild(n):s.innerHTML=n}}_sortItems(e,t){var s=t.length-1;e.sort((n,a)=>{for(var l,h=s;h>=0;h--){let d=t[h];if(l=this._sortRow(n,a,d.column,d.dir,d.params),l!==0)break}return l})}_sortRow(e,t,s,n,a){var l,h,d=n=="asc"?e:t,f=n=="asc"?t:e;return e=s.getFieldValue(d.getData()),t=s.getFieldValue(f.getData()),e=typeof e<"u"?e:"",t=typeof t<"u"?t:"",l=d.getComponent(),h=f.getComponent(),s.modules.sort.sorter.call(this,e,t,l,h,s.getComponent(),n,a)}};S(st,"moduleName","sort"),S(st,"sorters",Vl);let gs=st;class Wl{constructor(e,t){this.columnCount=e,this.rowCount=t,this.columnString=[],this.columns=[],this.rows=[]}genColumns(e){var t=Math.max(this.columnCount,Math.max(...e.map(s=>s.length)));this.columnString=[],this.columns=[];for(let s=1;s<=t;s++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(e){var t=Math.max(this.rowCount,e.length);this.rows=[];for(let s=1;s<=t;s++)this.rows.push(s);return this.rows}incrementChar(e){let t=this.columnString[e];t?t!=="Z"?this.columnString[e]=String.fromCharCode(this.columnString[e].charCodeAt(0)+1):(this.columnString[e]="A",e?this.incrementChar(e-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(e){this.rowCount=e}setColumnCount(e){this.columnCount=e}}class ur{constructor(e){return this._sheet=e,new Proxy(this,{get:function(t,s,n){return typeof t[s]<"u"?t[s]:t._sheet.table.componentFunctionBinder.handle("sheet",t._sheet,s)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(e){return this._sheet.setData(e)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(e){return this._sheet.setTitle(e)}setRows(e){return this._sheet.setRows(e)}setColumns(e){return this._sheet.setColumns(e)}}class Kn extends le{constructor(e,t){super(e.table),this.spreadsheetManager=e,this.definition=t,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new Wl(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(e=>{var t=Object.assign({},this.columnDefinition);t.field=e,t.title=e,this.columnDefs.push(t)})}initializeRows(){var e;this.grid.setRowCount(this.rowCount),e=this.grid.genRows(this.data),this.rowDefs=[],e.forEach((t,s)=>{var n={_id:t},a=this.data[s];a&&a.forEach((l,h)=>{var d=this.columnFields[h];d&&(n[d]=l)}),this.rowDefs.push(n)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var e=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),e&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new ur(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(e){var t=[],s,n,a;return this.rowDefs.forEach(l=>{var h=[];this.columnFields.forEach(d=>{h.push(l[d])}),t.push(h)}),!e&&!this.options("spreadsheetOutputFull")&&(s=t.map(l=>l.findLastIndex(h=>typeof h<"u")+1),n=Math.max(...s),a=s.findLastIndex(l=>l>0)+1,t=t.slice(0,a),t=t.map(l=>l.slice(0,n))),t}setData(e){this.data=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(e){this.title=e,this.element.innerText=e,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(e){this.rowCount=e,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(e){this.columnCount=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}}class dr extends I{constructor(e){super(e),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var e=this.options("spreadsheetSheetTabsElement");e&&!(e instanceof HTMLElement)&&(e=document.querySelector(e),e||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),e?e.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(e,t,s){return console.log("data",e,t,s),Array.isArray(e)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",e),!e.length||Array.isArray(e[0])?this.loadData(e):this.loadSheets(e)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e),!1}loadData(e){var t={data:e};this.loadSheet(this.newSheet(t))}destroySheets(){this.sheets.forEach(e=>{e.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(e){Array.isArray(e)||(e=[]),this.destroySheets(),e.forEach(t=>{this.newSheet(t)}),this.loadSheet(this.sheets[0])}loadSheet(e){this.activeSheet!==e&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=e,e.load())}newSheet(e={}){var t;return e.rows||(e.rows=this.options("spreadsheetRows")),e.columns||(e.columns=this.options("spreadsheetColumns")),t=new Kn(this,e),this.sheets.push(t),this.element&&this.element.appendChild(t.element),t}removeSheet(e){var t=this.sheets.indexOf(e),s;this.sheets.length>1?t>-1&&(this.sheets.splice(t,1),e.destroy(),this.activeSheet===e&&(s=this.sheets[t-1]||this.sheets[0],s?this.loadSheet(s):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(e){return e?e instanceof Kn?e:e instanceof ur?e._sheet:this.sheets.find(t=>t.key===e)||!1:this.activeSheet}setSheets(e){return this.loadSheets(e),this.getSheets()}addSheet(e){return this.newSheet(e).getComponent()}getSheetDefinitions(){return this.sheets.map(e=>e.getDefinition())}getSheets(){return this.sheets.map(e=>e.getComponent())}getSheet(e){var t=this.lookupSheet(e);return t?t.getComponent():!1}setSheetData(e,t){e&&!t&&(t=e,e=!1);var s=this.lookupSheet(e);return s?s.setData(t):!1}getSheetData(e){var t=this.lookupSheet(e);return t?t.getData():!1}clearSheet(e){var t=this.lookupSheet(e);return t?t.clear():!1}removeSheetFunc(e){var t=this.lookupSheet(e);t&&this.removeSheet(t)}activeSheetFunc(e){var t=this.lookupSheet(e);return t?this.loadSheet(t):!1}}S(dr,"moduleName","spreadsheet");class cr extends I{constructor(e){super(e),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(e){e.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),e.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(e,t,s){var n=e==="tooltip"?s.column.definition.tooltip:s.definition.headerTooltip;n&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,t,s,n),this.table.options.tooltipDelay))}mouseoutCheck(e,t,s){this.popupInstance||this.clearPopup()}clearPopup(e,t,s){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(e,t,s){var n,a,l;function h(d){a=d}typeof s=="function"&&(s=s(e,t.getComponent(),h)),s instanceof HTMLElement?n=s:(n=document.createElement("div"),s===!0&&(t instanceof Gt?s=t.value:t.definition.field?this.langBind("columns|"+t.definition.field,d=>{n.innerHTML=s=d||t.definition.title}):s=t.definition.title),n.innerHTML=s),(s||s===0||s===!1)&&(n.classList.add("tabulator-tooltip"),n.addEventListener("mousemove",d=>d.preventDefault()),this.popupInstance=this.popup(n),typeof a=="function"&&this.popupInstance.renderCallback(a),l=this.popupInstance.containerEventCoords(e),this.popupInstance.show(l.x+15,l.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",t.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",t.getComponent()))}}S(cr,"moduleName","tooltip");var jl={integer:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&Math.floor(e)===e)},float:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&e%1!==0)},numeric:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:!isNaN(e)},string:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:isNaN(e)},alphanumeric:function(c,e,t){if(e===""||e===null||typeof e>"u")return!0;var s=new RegExp(/^[a-z0-9]+$/i);return s.test(e)},max:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)<=t},min:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)>=t},starts:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().startsWith(String(t).toLowerCase())},ends:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().endsWith(String(t).toLowerCase())},minLength:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:String(e).length>=t},maxLength:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:String(e).length<=t},in:function(c,e,t){return e===""||e===null||typeof e>"u"?!0:(typeof t=="string"&&(t=t.split("|")),t.indexOf(e)>-1)},regex:function(c,e,t){if(e===""||e===null||typeof e>"u")return!0;var s=new RegExp(t);return s.test(e)},unique:function(c,e,t){if(e===""||e===null||typeof e>"u")return!0;var s=!0,n=c.getData(),a=c.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(l){var h=l.getData();h!==n&&e==a.getFieldValue(h)&&(s=!1)}),s},required:function(c,e,t){return e!==""&&e!==null&&typeof e<"u"}};const Ht=class Ht extends I{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(e,t,s){var n=this.table.options.validationMode!=="manual"?this.validate(e.column.modules.validate,e,t):!0;return n!==!0&&setTimeout(()=>{e.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",e.getComponent(),t,n)}),n}editorClear(e,t){t&&e.column.modules.validate&&this.cellValidate(e),e.getElement().classList.remove("tabulator-validation-fail")}editedClear(e){e.modules.validate&&(e.modules.validate.invalid=!1)}cellIsValid(e){return e.modules.validate&&e.modules.validate.invalid||!0}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var t=[];return e.cells.forEach(s=>{this.cellValidate(s)!==!0&&t.push(s.getComponent())}),t.length?t:!0}rowValidate(e){var t=[];return e.cells.forEach(s=>{this.cellValidate(s)!==!0&&t.push(s.getComponent())}),t.length?t:!0}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(t=>{this.clearValidation(t._getSelf())})}userValidate(e){var t=[];return this.table.rowManager.rows.forEach(s=>{s=s.getComponent();var n=s.validate();n!==!0&&(t=t.concat(n))}),t.length?t:!0}initializeColumnCheck(e){typeof e.definition.validator<"u"&&this.initializeColumn(e)}initializeColumn(e){var t=this,s=[],n;e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(a=>{n=t._extractValidator(a),n&&s.push(n)}):(n=this._extractValidator(e.definition.validator),n&&s.push(n)),e.modules.validate=s.length?s:!1)}_extractValidator(e){var t,s,n;switch(typeof e){case"string":return n=e.indexOf(":"),n>-1?(t=e.substring(0,n),s=e.substring(n+1)):t=e,this._buildValidator(t,s);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,t){var s=typeof e=="function"?e:Ht.validators[e];return s?{type:typeof e=="function"?"function":e,func:s,params:t}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,t,s){var n=this,a=[],l=this.invalidCells.indexOf(t);return e&&e.forEach(h=>{h.func.call(n,t.getComponent(),s,h.params)||a.push({type:h.type,parameters:h.params})}),t.modules.validate||(t.modules.validate={}),a.length?(t.modules.validate.invalid=a,this.table.options.validationMode!=="manual"&&t.getElement().classList.add("tabulator-validation-fail"),l==-1&&this.invalidCells.push(t)):(t.modules.validate.invalid=!1,t.getElement().classList.remove("tabulator-validation-fail"),l>-1&&this.invalidCells.splice(l,1)),a.length?a:!0}getInvalidCells(){var e=[];return this.invalidCells.forEach(t=>{e.push(t.getComponent())}),e}clearValidation(e){var t;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,t=this.invalidCells.indexOf(e),t>-1&&this.invalidCells.splice(t,1))}};S(Ht,"moduleName","validate"),S(Ht,"validators",jl);let bs=Ht;var qi=Object.freeze({__proto__:null,AccessorModule:Xi,AjaxModule:$i,ClipboardModule:es,ColumnCalcsModule:ts,DataTreeModule:Xn,DownloadModule:is,EditModule:ss,ExportModule:ns,FilterModule:rs,FormatModule:as,FrozenColumnsModule:Jn,FrozenRowsModule:Qn,GroupRowsModule:$n,HistoryModule:os,HtmlTableImportModule:er,ImportModule:ls,InteractionModule:tr,KeybindingsModule:hs,MenuModule:ir,MoveColumnsModule:sr,MoveRowsModule:us,MutatorModule:ds,PageModule:cs,PersistenceModule:ps,PopupModule:nr,PrintModule:rr,ReactiveDataModule:ar,ResizeColumnsModule:or,ResizeRowsModule:lr,ResizeTableModule:hr,ResponsiveLayoutModule:fs,SelectRangeModule:hi,SelectRowModule:ms,SortModule:gs,SpreadsheetModule:dr,TooltipModule:cr,ValidateModule:bs}),Zl={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{},dependencies:{}};class pr{constructor(e,t,s={}){this.table=e,this.msgType=t,this.registeredDefaults=Object.assign({},s)}register(e,t){this.registeredDefaults[e]=t}generate(e,t={}){var s=Object.assign({},this.registeredDefaults),n=this.table.options.debugInvalidOptions||t.debugInvalidOptions===!0;Object.assign(s,e);for(let a in t)s.hasOwnProperty(a)||(n&&console.warn("Invalid "+this.msgType+" option:",a),s[a]=t.key);for(let a in s)a in t?s[a]=t[a]:Array.isArray(s[a])?s[a]=Object.assign([],s[a]):typeof s[a]=="object"&&s[a]!==null?s[a]=Object.assign({},s[a]):typeof s[a]>"u"&&delete s[a];return s}}class ci extends le{constructor(e){super(e),this.elementVertical=e.rowManager.element,this.elementHorizontal=e.columnManager.element,this.tableElement=e.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(e){}renderRows(){}renderColumns(){}rerenderRows(e){e&&e()}rerenderColumns(e,t){}renderRowCells(e){}rerenderRowCells(e,t){}scrollColumns(e,t){}scrollRows(e,t){}resize(){}scrollToRow(e){}scrollToRowNearestTop(e){}visibleRows(e){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(e,t){var s=e.getElement();t%2?(s.classList.add("tabulator-row-even"),s.classList.remove("tabulator-row-odd")):(s.classList.add("tabulator-row-odd"),s.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(e){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(e,t,s){var n=this.rows().indexOf(e),a=e.getElement(),l=0;return new Promise((h,d)=>{if(n>-1){if(typeof s>"u"&&(s=this.table.options.scrollToRowIfVisible),!s&&Y.elVisible(a)&&(l=Y.elOffset(a).top-Y.elOffset(this.elementVertical).top,l>0&&l<this.elementVertical.clientHeight-a.offsetHeight))return h(),!1;switch(typeof t>"u"&&(t=this.table.options.scrollToRowPosition),t==="nearest"&&(t=this.scrollToRowNearestTop(e)?"top":"bottom"),this.scrollToRow(e),t){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(a.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-a.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-a.offsetTop)+a.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+a.offsetHeight;break;case"top":this.elementVertical.scrollTop=a.offsetTop;break}h()}else console.warn("Scroll Error - Row not visible"),d("Scroll Error - Row not visible")})}}class Yl extends ci{constructor(e){super(e)}renderRowCells(e,t){const s=document.createDocumentFragment();e.cells.forEach(n=>{s.appendChild(n.getElement())}),e.element.appendChild(s),t||e.cells.forEach(n=>{n.cellRendered()})}reinitializeColumnWidths(e){e.forEach(function(t){t.reinitializeWidth()})}}class ql extends ci{constructor(e){super(e),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(e,t){this.dataChange()}scrollColumns(e,t){this.scrollLeft!=e&&(this.scrollLeft=e,this.scroll(e-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var e=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(t=>{if(t.visible){var s=t.getWidth();s>e&&(e=s)}}),this.windowBuffer=e*2}rerenderColumns(e,t){var s={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},n=0;e&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(a=>{var l={},h;a.visible&&(a.modules.frozen||(h=a.getWidth(),l.leftPos=n,l.rightPos=n+h,l.width=h,this.isFitData&&(l.fitDataCheck=a.modules.vdomHoz?a.modules.vdomHoz.fitDataCheck:!0),n+h>this.vDomScrollPosLeft&&n<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=n),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=h),this.columns.push(a),a.modules.vdomHoz=l,n+=h))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,t||(!e||this.reinitChanged(s))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(e){if(this.initialized)this.initializeRow(e);else{const t=document.createDocumentFragment();e.cells.forEach(s=>{t.appendChild(s.getElement())}),e.element.appendChild(t),e.cells.forEach(s=>{s.cellRendered()})}}rerenderRowCells(e,t){this.reinitializeRow(e,t)}reinitializeColumnWidths(e){for(let t=this.leftCol;t<=this.rightCol;t++){let s=this.columns[t];s&&s.reinitializeWidth()}}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var e=!1,t,s;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(n=>{!n.definition.width&&n.visible&&(e=!0)}),e&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,t=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],t)){s=t.getElement(),t.generateCells(),this.tableElement.appendChild(s);for(let n=0;n<t.cells.length;n++){let a=t.cells[n];s.appendChild(a.getElement()),a.column.reinitializeWidth()}s.parentNode.removeChild(s),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(e){var t=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol?!0:(e.cols.forEach((s,n)=>{s!==this.columns[n]&&(t=!1)}),!t)}reinitializeRows(){var e=this.getVisibleRows(),t=this.table.rowManager.getRows().filter(s=>!e.includes(s));e.forEach(s=>{this.reinitializeRow(s,!0)}),t.forEach(s=>{s.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,Math.abs(e)>this.windowBuffer/2?this.rerenderColumns():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(e,t,s){for(let n=e;n<t;n++){let a=this.columns[n];a.modules.vdomHoz.leftPos+=s,a.modules.vdomHoz.rightPos+=s}}addColRight(){for(var e=!1,t=!0;t;){let s=this.columns[this.rightCol+1];s&&s.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var a=n.getCell(s);n.getElement().insertBefore(a.getElement(),n.getCell(this.columns[this.rightCol]).getElement().nextSibling),a.cellRendered()}}),this.fitDataColActualWidthCheck(s),this.rightCol++,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=s.getWidth()):t=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var e=!1,t=!0;t;){let s=this.columns[this.leftCol-1];if(s)if(s.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){e=!0,this.getVisibleRows().forEach(a=>{if(a.type!=="group"){var l=a.getCell(s);a.getElement().insertBefore(l.getElement(),a.getCell(this.columns[this.leftCol]).getElement()),l.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(a=>{a.type!=="group"&&(a.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=s.getWidth();let n=this.fitDataColActualWidthCheck(s);n&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+n,this.vDomPadRight-=n)}else t=!1;else t=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var e=!1,t=!0;t;){let s=this.columns[this.rightCol];s&&s.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var a=n.getCell(s);try{n.getElement().removeChild(a.getElement())}catch(l){console.warn("Could not removeColRight",l.message)}}}),this.vDomPadRight+=s.getWidth(),this.rightCol--,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.rightCol=this.rightCol)})):t=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var e=!1,t=!0;t;){let s=this.columns[this.leftCol];s&&s.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var a=n.getCell(s);try{n.getElement().removeChild(a.getElement())}catch(l){console.warn("Could not removeColLeft",l.message)}}}),this.vDomPadLeft+=s.getWidth(),this.leftCol++,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.leftCol=this.leftCol)})):t=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(e){var t,s;return e.modules.vdomHoz.fitDataCheck&&(e.reinitializeWidth(),t=e.getWidth(),s=t-e.modules.vdomHoz.width,s&&(e.modules.vdomHoz.rightPos+=s,e.modules.vdomHoz.width=t,this.colPositionAdjust(this.columns.indexOf(e)+1,this.columns.length,s)),e.modules.vdomHoz.fitDataCheck=!1),s}initializeRow(e){if(e.type!=="group"){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(t=>{this.appendCell(e,t)});for(let t=this.leftCol;t<=this.rightCol;t++)this.appendCell(e,this.columns[t]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(t=>{this.appendCell(e,t)})}}appendCell(e,t){if(t&&t.visible){let s=e.getCell(t);e.getElement().appendChild(s.getElement()),s.cellRendered()}}reinitializeRow(e,t){if(e.type!=="group"&&(t||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var s=e.getElement();s.firstChild;)s.removeChild(s.firstChild);this.initializeRow(e)}}}class Xl extends le{constructor(e){super(e),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new pr(this.table,"column definition",qn),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(e){this.table.rtl?this.headersElement.style.marginLeft=e+"px":this.headersElement.style.marginRight=e+"px"}initializeRenderer(){var e,t={virtual:ql,basic:Yl};typeof this.table.options.renderHorizontal=="string"?e=t[this.table.options.renderHorizontal]:e=this.table.options.renderHorizontal,e?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e.setAttribute("role","row"),e}createHeaderContentsElement(){var e=document.createElement("div");return e.classList.add("tabulator-header-contents"),e.setAttribute("role","rowgroup"),e}createHeaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-header"),e.setAttribute("role","rowgroup"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(e){this.contentsElement.scrollLeft=e,this.scrollLeft=e,this.renderer.scrollColumns(e)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",e=>{var t;e.deltaX&&(t=this.contentsElement.scrollLeft+e.deltaX,this.table.rowManager.scrollHorizontal(t),this.table.columnManager.scrollHorizontal(t))})}generateColumnsFromRowData(e){var t=[],s={},n=this.table.options.autoColumns==="full"?e:[e[0]],a=this.table.options.autoColumnsDefinitions;if(e&&e.length){if(n.forEach(l=>{Object.keys(l).forEach((h,d)=>{let f=l[h],g;s[h]?s[h]!==!0&&typeof f<"u"&&(s[h].sorter=this.calculateSorterFromValue(f),s[h]=!0):(g={field:h,title:h,sorter:this.calculateSorterFromValue(f)},t.splice(d,0,g),s[h]=typeof f>"u"?g:!0)})}),a)switch(typeof a){case"function":this.table.options.columns=a.call(this.table,t);break;case"object":Array.isArray(a)?t.forEach(l=>{var h=a.find(d=>d.field===l.field);h&&Object.assign(l,h)}):t.forEach(l=>{a[l.field]&&Object.assign(l,a[l.field])}),this.table.options.columns=t;break}else this.table.options.columns=t;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(e){var t;switch(typeof e){case"undefined":t="string";break;case"boolean":t="boolean";break;case"number":t="number";break;case"object":Array.isArray(e)?t="array":t="string";break;default:!isNaN(e)&&e!==""?t="number":e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?t="alphanum":t="string";break}return t}setColumns(e,t){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new nt(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),e.forEach((s,n)=>{this._addColumn(s)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(e,t,s){var n=new nt(e,this),a=n.getElement(),l=s&&this.findColumnIndex(s);if(t&&this.rowHeader&&(!s||s===this.rowHeader)&&(t=!1,s=this.rowHeader,l=0),s&&l>-1){var h=s.getTopColumn(),d=this.columns.indexOf(h),f=h.getElement();t?(this.columns.splice(d,0,n),f.parentNode.insertBefore(a,f)):(this.columns.splice(d+1,0,n),f.parentNode.insertBefore(a,f.nextSibling))}else t?(this.columns.unshift(n),this.headersElement.insertBefore(n.getElement(),this.headersElement.firstChild)):(this.columns.push(n),this.headersElement.appendChild(n.getElement()));return n.columnRendered(),n}registerColumnField(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)}registerColumnPosition(e){this.columnsByIndex.push(e)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(e){e.reRegisterPosition()})}verticalAlignHeaders(){var e=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(t=>{t.clearVerticalAlign()}),this.columns.forEach(t=>{var s=t.getHeight();s>e&&(e=s)}),this.headersElement.style.height=e+"px",this.columns.forEach(t=>{t.verticalAlign(this.table.options.columnHeaderVertAlign,e)}),this.table.rowManager.adjustTableSize())}findColumn(e){var t;if(typeof e=="object"){if(e instanceof nt)return e;if(e instanceof Yn)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return t=[],this.columns.forEach(n=>{t.push(n),t=t.concat(n.getColumns(!0))}),t.find(n=>n.element===e)||!1}else return this.columnsByField[e]||!1;return!1}getColumnByField(e){return this.columnsByField[e]}getColumnsByFieldRoot(e){var t=[];return Object.keys(this.columnsByField).forEach(s=>{var n=this.table.options.nestedFieldSeparator?s.split(this.table.options.nestedFieldSeparator)[0]:s;n===e&&t.push(this.columnsByField[s])}),t}getColumnByIndex(e){return this.columnsByIndex[e]}getFirstVisibleColumn(){var e=this.columnsByIndex.findIndex(t=>t.visible);return e>-1?this.columnsByIndex[e]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(e=>e.visible)}getColumns(){return this.columns}findColumnIndex(e){return this.columnsByIndex.findIndex(t=>e===t)}getRealColumns(){return this.columnsByIndex}traverse(e){this.columnsByIndex.forEach((t,s)=>{e(t,s)})}getDefinitions(e){var t=[];return this.columnsByIndex.forEach(s=>{(!e||e&&s.visible)&&t.push(s.getDefinition())}),t}getDefinitionTree(){var e=[];return this.columns.forEach(t=>{e.push(t.getDefinition(!0))}),e}getComponents(e){var t=[],s=e?this.columns:this.columnsByIndex;return s.forEach(n=>{t.push(n.getComponent())}),t}getWidth(){var e=0;return this.columnsByIndex.forEach(t=>{t.visible&&(e+=t.getWidth())}),e}moveColumn(e,t,s){t.element.parentNode.insertBefore(e.element,t.element),s&&t.element.parentNode.insertBefore(t.element,e.element),this.moveColumnActual(e,t,s),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(e,t,s){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,t,s):this._moveColumnInArray(this.columns,e,t,s),this._moveColumnInArray(this.columnsByIndex,e,t,s,!0),this.rerenderColumns(!0),this.dispatch("column-moved",e,t,s),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(e,t,s,n,a){var l=e.indexOf(t),h,d=[];l>-1&&(e.splice(l,1),h=e.indexOf(s),h>-1?n&&(h=h+1):h=l,e.splice(h,0,t),a&&(d=this.chain("column-moving-rows",[t,s,n],null,[])||[],d=d.concat(this.table.rowManager.rows),d.forEach(function(f){if(f.cells.length){var g=f.cells.splice(l,1)[0];f.cells.splice(h,0,g)}})))}scrollToColumn(e,t,s){var n=0,a=e.getLeftOffset(),l=0,h=e.getElement();return new Promise((d,f)=>{if(typeof t>"u"&&(t=this.table.options.scrollToColumnPosition),typeof s>"u"&&(s=this.table.options.scrollToColumnIfVisible),e.visible){switch(t){case"middle":case"center":l=-this.element.clientWidth/2;break;case"right":l=h.clientWidth-this.headersElement.clientWidth;break}if(!s&&a>0&&a+h.offsetWidth<this.element.clientWidth)return!1;n=a+l,n=Math.max(Math.min(n,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(n),this.scrollHorizontal(n),d()}else console.warn("Scroll Error - Column not visible"),f("Scroll Error - Column not visible")})}generateCells(e){var t=[];return this.columnsByIndex.forEach(s=>{t.push(s.generateCell(e))}),t}getFlexBaseWidth(){var e=this.table.element.clientWidth,t=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(s){var n,a,l;s.visible&&(n=s.definition.width||0,a=parseInt(s.minWidth),typeof n=="string"?n.indexOf("%")>-1?l=e/100*parseInt(n):l=parseInt(n):l=n,t+=l>a?l:a)}),t}addColumn(e,t,s){return new Promise((n,a)=>{var l=this._addColumn(e,t,s);this._reIndexColumns(),this.dispatch("column-add",e,t,s),this.layoutMode()!="fitColumns"&&l.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),n(l)})}deregisterColumn(e){var t=e.getField(),s;t&&delete this.columnsByField[t],s=this.columnsByIndex.indexOf(e),s>-1&&this.columnsByIndex.splice(s,1),s=this.columns.indexOf(e),s>-1&&this.columns.splice(s,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(e,t){this.redrawBlock?(e===!1||e===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=e):this.renderer.rerenderColumns(e,t)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(e){Y.elVisible(this.element)&&this.verticalAlignHeaders(),e&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",e)||this.layoutRefresh(e),this.dispatch("table-redraw",e),this.table.footerManager.redraw()}}class Jl extends ci{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.scrollTop=0,e.scrollLeft=0,e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility=""}renderRows(){var e=this.tableElement,t=!0,s=document.createDocumentFragment(),n=this.rows();n.forEach((a,l)=>{this.styleRow(a,l),a.initialize(!1,!0),a.type!=="group"&&(t=!1),s.appendChild(a.getElement())}),e.appendChild(s),n.forEach(a=>{a.rendered(),a.heightInitialized||a.calcHeight(!0)}),n.forEach(a=>{a.heightInitialized||a.setCellHeight()}),t?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}rerenderRows(e){this.clearRows(),e&&e(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(e){var t=Y.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-t)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-t))}scrollToRow(e){var t=e.getElement();this.elementVertical.scrollTop=Y.elOffset(t).top-Y.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(e){return this.rows()}}class Ql extends ci{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(e){for(var t=this.elementVertical.scrollTop,s=!1,n=!1,a=this.table.rowManager.scrollLeft,l=this.rows(),h=this.vDomTop;h<=this.vDomBottom;h++)if(l[h]){var d=t-l[h].getElement().offsetTop;if(n===!1||Math.abs(d)<n)n=d,s=h;else break}l.forEach(f=>{f.deinitializeHeight()}),e&&e(),this.rows().length?this._virtualRenderFill(s===!1?this.rows.length-1:s,!0,n||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(a)}scrollColumns(e){this.table.rowManager.scrollHorizontal(e)}scrollRows(e,t){var s=e-this.vDomScrollPosTop,n=e-this.vDomScrollPosBottom,a=this.vDomWindowBuffer*2,l=this.rows();if(this.scrollTop=e,-s>a||n>a){var h=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*l.length)),this.scrollColumns(h)}else t?(s<0&&this._addTopRow(l,-s),n<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(l,-n):this.vDomScrollPosBottom=this.scrollTop)):(n>=0&&this._addBottomRow(l,n),s>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(l,s):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(e){var t=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-t)>Math.abs(this.vDomBottom-t))}scrollToRow(e){var t=this.rows().indexOf(e);t>-1&&this._virtualRenderFill(t,!0)}visibleRows(e){var t=this.elementVertical.scrollTop,s=this.elementVertical.clientHeight+t,n=!1,a=0,l=0,h=this.rows();if(e)a=this.vDomTop,l=this.vDomBottom;else for(var d=this.vDomTop;d<=this.vDomBottom;d++)if(h[d])if(n)if(s-h[d].getElement().offsetTop>=0)l=d;else break;else if(t-h[d].getElement().offsetTop>=0)a=d;else if(n=!0,s-h[d].getElement().offsetTop>=0)l=d;else break;return h.slice(a,l+1)}_virtualRenderFill(e,t,s){var n=this.tableElement,a=this.elementVertical,l=0,h=0,d=0,f=0,g=0,b=0,v=this.rows(),w=v.length,y=0,R,x,A=[],z=0,H=0,X=this.table.rowManager.fixedHeight,W=this.elementVertical.clientHeight,re=this.table.options.rowHeight,Me=!0;if(e=e||0,s=s||0,!e)this.clear();else{for(;n.firstChild;)n.removeChild(n.firstChild);f=(w-e+1)*this.vDomRowHeight,f<W&&(e-=Math.ceil((W-f)/this.vDomRowHeight),e<0&&(e=0)),l=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e),e-=l}if(w&&Y.elVisible(this.elementVertical)){for(this.vDomTop=e,this.vDomBottom=e-1,X||this.table.options.maxHeight?(re&&(H=W/re+this.vDomWindowBuffer/re),H=Math.max(this.vDomWindowMinTotalRows,Math.ceil(H))):H=w;(H==w||h<=W+this.vDomWindowBuffer||z<this.vDomWindowMinTotalRows)&&this.vDomBottom<w-1;){for(A=[],x=document.createDocumentFragment(),b=0;b<H&&this.vDomBottom<w-1;)y=this.vDomBottom+1,R=v[y],this.styleRow(R,y),R.initialize(!1,!0),!R.heightInitialized&&!this.table.options.rowHeight&&R.clearCellHeight(),x.appendChild(R.getElement()),A.push(R),this.vDomBottom++,b++;if(!A.length)break;n.appendChild(x),A.forEach(se=>{se.rendered(),se.heightInitialized||se.calcHeight(!0)}),A.forEach(se=>{se.heightInitialized||se.setCellHeight()}),A.forEach(se=>{d=se.getHeight(),z<l?g+=d:h+=d,d>this.vDomWindowBuffer&&(this.vDomWindowBuffer=d*2),z++}),Me=this.table.rowManager.adjustTableSize(),W=this.elementVertical.clientHeight,Me&&(X||this.table.options.maxHeight)&&(re=h/z,H=Math.max(this.vDomWindowMinTotalRows,Math.ceil(W/re+this.vDomWindowBuffer/re)))}e?(this.vDomTopPad=t?this.vDomRowHeight*this.vDomTop+s:this.scrollTop-g,this.vDomBottomPad=this.vDomBottom==w-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-h-g,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((h+g)/z),this.vDomBottomPad=this.vDomRowHeight*(w-this.vDomBottom-1),this.vDomScrollHeight=g+h+this.vDomBottomPad-W),n.style.paddingTop=this.vDomTopPad+"px",n.style.paddingBottom=this.vDomBottomPad+"px",t&&(this.scrollTop=this.vDomTopPad+g+s-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-W:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-W),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&t&&(this.scrollTop+=this.elementVertical.offsetHeight-W),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,a.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(e,t){for(var s=this.tableElement,n=[],a=0,l=this.vDomTop-1,h=0,d=!0;d;)if(this.vDomTop){let f=e[l],g,b;f&&h<this.vDomMaxRenderChain?(g=f.getHeight()||this.vDomRowHeight,b=f.initialized,t>=g?(this.styleRow(f,l),s.insertBefore(f.getElement(),s.firstChild),(!f.initialized||!f.heightInitialized)&&n.push(f),f.initialize(),b||(g=f.getElement().offsetHeight,g>this.vDomWindowBuffer&&(this.vDomWindowBuffer=g*2)),t-=g,a+=g,this.vDomTop--,l--,h++):d=!1):d=!1}else d=!1;for(let f of n)f.clearCellHeight();this._quickNormalizeRowHeight(n),a&&(this.vDomTopPad-=a,this.vDomTopPad<0&&(this.vDomTopPad=l*this.vDomRowHeight),l<1&&(this.vDomTopPad=0),s.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=a)}_removeTopRow(e,t){for(var s=[],n=0,a=0,l=!0;l;){let h=e[this.vDomTop],d;h&&a<this.vDomMaxRenderChain?(d=h.getHeight()||this.vDomRowHeight,t>=d?(this.vDomTop++,t-=d,n+=d,s.push(h),a++):l=!1):l=!1}for(let h of s){let d=h.getElement();d.parentNode&&d.parentNode.removeChild(d)}n&&(this.vDomTopPad+=n,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?n:n+this.vDomWindowBuffer)}_addBottomRow(e,t){for(var s=this.tableElement,n=[],a=0,l=this.vDomBottom+1,h=0,d=!0;d;){let f=e[l],g,b;f&&h<this.vDomMaxRenderChain?(g=f.getHeight()||this.vDomRowHeight,b=f.initialized,t>=g?(this.styleRow(f,l),s.appendChild(f.getElement()),(!f.initialized||!f.heightInitialized)&&n.push(f),f.initialize(),b||(g=f.getElement().offsetHeight,g>this.vDomWindowBuffer&&(this.vDomWindowBuffer=g*2)),t-=g,a+=g,this.vDomBottom++,l++,h++):d=!1):d=!1}for(let f of n)f.clearCellHeight();this._quickNormalizeRowHeight(n),a&&(this.vDomBottomPad-=a,(this.vDomBottomPad<0||l==e.length-1)&&(this.vDomBottomPad=0),s.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=a)}_removeBottomRow(e,t){for(var s=[],n=0,a=0,l=!0;l;){let h=e[this.vDomBottom],d;h&&a<this.vDomMaxRenderChain?(d=h.getHeight()||this.vDomRowHeight,t>=d?(this.vDomBottom--,t-=d,n+=d,s.push(h),a++):l=!1):l=!1}for(let h of s){let d=h.getElement();d.parentNode&&d.parentNode.removeChild(d)}n&&(this.vDomBottomPad+=n,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=n)}_quickNormalizeRowHeight(e){for(let t of e)t.calcHeight();for(let t of e)t.setCellHeight()}}class $l extends le{constructor(e){super(e),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var e=document.createElement("div");return e.classList.add("tabulator-tableholder"),e.setAttribute("tabindex",0),e}createTableElement(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e.setAttribute("role","rowgroup"),e}initializePlaceholder(){var e=this.table.options.placeholder;if(typeof e=="function"&&(e=e.call(this.table)),e=this.chain("placeholder",[e],e,e)||e,e){let t=document.createElement("div");if(t.classList.add("tabulator-placeholder"),typeof e=="string"){let s=document.createElement("div");s.classList.add("tabulator-placeholder-contents"),s.innerHTML=e,t.appendChild(s),this.placeholderContents=s}else typeof HTMLElement<"u"&&e instanceof HTMLElement?(t.appendChild(e),this.placeholderContents=e):(console.warn("Invalid placeholder provided, must be string or HTML Element",e),this.el=null);this.placeholder=t}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var e=this.element.scrollLeft,t=this.scrollLeft>e,s=this.element.scrollTop,n=this.scrollTop>s;this.scrollLeft!=e&&(this.scrollLeft=e,this.dispatch("scroll-horizontal",e,t),this.dispatchExternal("scrollHorizontal",e,t),this._positionPlaceholder()),this.scrollTop!=s&&(this.scrollTop=s,this.renderer.scrollRows(s,n),this.dispatch("scroll-vertical",s,n),this.dispatchExternal("scrollVertical",s,n))})}findRow(e){if(typeof e=="object"){if(e instanceof he)return e;if(e instanceof ui)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return this.rows.find(s=>s.getElement()===e)||!1;if(e===null)return!1}else return typeof e>"u"?!1:this.rows.find(s=>s.data[this.table.options.index]==e)||!1;return!1}getRowFromDataObject(e){var t=this.rows.find(s=>s.data===e);return t||!1}getRowFromPosition(e){return this.getDisplayRows().find(t=>t.type==="row"&&t.getPosition()===e&&t.isDisplayed())}scrollToRow(e,t,s){return this.renderer.scrollToRowPosition(e,t,s)}setData(e,t,s){return new Promise((n,a)=>{t&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(e,!0):this.reRenderInPosition(()=>{this._setDataActual(e)}):(this.table.options.autoColumns&&s&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(e),this.resetScroll(),this._setDataActual(e)),n()})}_setDataActual(e,t){this.dispatchExternal("dataProcessing",e),this._wipeElements(),Array.isArray(e)?(this.dispatch("data-processing",e),e.forEach((s,n)=>{if(s&&typeof s=="object"){var a=new he(s,this);this.rows.push(a)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",s)}),this.refreshActiveData(!1,!1,t),this.dispatch("data-processed",e),this.dispatchExternal("dataProcessed",e)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(e=>{e.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(e,t){var s=this.rows.indexOf(e),n=this.activeRows.indexOf(e);n>-1&&this.activeRows.splice(n,1),s>-1&&this.rows.splice(s,1),this.setActiveRows(this.activeRows),this.displayRowIterator(a=>{var l=a.indexOf(e);l>-1&&a.splice(l,1)}),t||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",e.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(e,t,s,n){var a=this.addRowActual(e,t,s,n);return a}addRows(e,t,s,n){var a=[];return new Promise((l,h)=>{t=this.findAddRowPos(t),Array.isArray(e)||(e=[e]),(typeof s>"u"&&t||typeof s<"u"&&!t)&&e.reverse(),e.forEach((d,f)=>{var g=this.addRow(d,t,s,!0);a.push(g),this.dispatch("row-added",g,d,t,s)}),this.refreshActiveData(n?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),l(a)})}findAddRowPos(e){return typeof e>"u"&&(e=this.table.options.addRowPos),e==="pos"&&(e=!0),e==="bottom"&&(e=!1),e}addRowActual(e,t,s,n){var a=e instanceof he?e:new he(e||{},this),l=this.findAddRowPos(t),h=-1,d,f;return s||(f=this.chain("row-adding-position",[a,l],null,{index:s,top:l}),s=f.index,l=f.top),typeof s<"u"&&(s=this.findRow(s)),s=this.chain("row-adding-index",[a,s,l],null,s),s&&(h=this.rows.indexOf(s)),s&&h>-1?(d=this.activeRows.indexOf(s),this.displayRowIterator(function(g){var b=g.indexOf(s);b>-1&&g.splice(l?b:b+1,0,a)}),d>-1&&this.activeRows.splice(l?d:d+1,0,a),this.rows.splice(l?h:h+1,0,a)):l?(this.displayRowIterator(function(g){g.unshift(a)}),this.activeRows.unshift(a),this.rows.unshift(a)):(this.displayRowIterator(function(g){g.push(a)}),this.activeRows.push(a),this.rows.push(a)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",a.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),n||this.reRenderInPosition(),a}moveRow(e,t,s){this.dispatch("row-move",e,t,s),this.moveRowActual(e,t,s),this.regenerateRowPositions(),this.dispatch("row-moved",e,t,s),this.dispatchExternal("rowMoved",e.getComponent())}moveRowActual(e,t,s){this.moveRowInArray(this.rows,e,t,s),this.moveRowInArray(this.activeRows,e,t,s),this.displayRowIterator(n=>{this.moveRowInArray(n,e,t,s)}),this.dispatch("row-moving",e,t,s)}moveRowInArray(e,t,s,n){var a,l,h,d;if(t!==s&&(a=e.indexOf(t),a>-1&&(e.splice(a,1),l=e.indexOf(s),l>-1?n?e.splice(l+1,0,t):e.splice(l,0,t):e.splice(a,0,t)),e===this.getDisplayRows())){h=a<l?a:l,d=l>a?l:a+1;for(let f=h;f<=d;f++)e[f]&&this.styleRow(e[f],f)}}clearData(){this.setData([])}getRowIndex(e){return this.findRowIndex(e,this.rows)}getDisplayRowIndex(e){var t=this.getDisplayRows().indexOf(e);return t>-1?t:!1}nextDisplayRow(e,t){var s=this.getDisplayRowIndex(e),n=!1;return s!==!1&&s<this.displayRowsCount-1&&(n=this.getDisplayRows()[s+1]),n&&(!(n instanceof he)||n.type!="row")?this.nextDisplayRow(n,t):n}prevDisplayRow(e,t){var s=this.getDisplayRowIndex(e),n=!1;return s&&(n=this.getDisplayRows()[s-1]),t&&n&&(!(n instanceof he)||n.type!="row")?this.prevDisplayRow(n,t):n}findRowIndex(e,t){var s;return e=this.findRow(e),e&&(s=t.indexOf(e),s>-1)?s:!1}getData(e,t){var s=[],n=this.getRows(e);return n.forEach(function(a){a.type=="row"&&s.push(a.getData(t||"data"))}),s}getComponents(e){var t=[],s=this.getRows(e);return s.forEach(function(n){t.push(n.getComponent())}),t}getDataCount(e){var t=this.getRows(e);return t.length}scrollHorizontal(e){this.scrollLeft=e,this.element.scrollLeft=e,this.dispatch("scroll-horizontal",e)}registerDataPipelineHandler(e,t){typeof t<"u"?(this.dataPipeline.push({handler:e,priority:t}),this.dataPipeline.sort((s,n)=>s.priority-n.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(e,t){typeof t<"u"?(this.displayPipeline.push({handler:e,priority:t}),this.displayPipeline.sort((s,n)=>s.priority-n.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(e,t,s){var n=this.table,a="",l=0,h=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof e=="function")if(l=this.dataPipeline.findIndex(d=>d.handler===e),l>-1)a="dataPipeline",t&&(l==this.dataPipeline.length-1?a="display":l++);else if(l=this.displayPipeline.findIndex(d=>d.handler===e),l>-1)a="displayPipeline",t&&(l==this.displayPipeline.length-1?a="end":l++);else{console.error("Unable to refresh data, invalid handler provided",e);return}else a=e||"all",l=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===a&&l<this.redrawBlockRestoreConfig.index||h.indexOf(a)<h.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:e,skipStage:t,renderInPosition:s,stage:a,index:l});return}else Y.elVisible(this.element)?s?this.reRenderInPosition(this.refreshPipelines.bind(this,e,a,l,s)):(this.refreshPipelines(e,a,l,s),e||this.table.columnManager.renderer.renderColumns(),this.renderTable(),n.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(e,a,l,s),this.dispatch("data-refreshed")}}refreshPipelines(e,t,s,n){switch(this.dispatch("data-refreshing"),(!e||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),t){case"all":case"dataPipeline":for(let a=s;a<this.dataPipeline.length;a++){let l=this.dataPipeline[a].handler(this.activeRowsPipeline[a].slice(0));this.activeRowsPipeline[a+1]=l||this.activeRowsPipeline[a].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":s=0,this.resetDisplayRows();case"displayPipeline":for(let a=s;a<this.displayPipeline.length;a++){let l=this.displayPipeline[a].handler((a?this.getDisplayRows(a-1):this.activeRows).slice(0),n);this.setDisplayRows(l||this.getDisplayRows(a-1).slice(0),a)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var e=this.getDisplayRows(),t=1;e.forEach(s=>{s.type==="row"&&(s.setPosition(t),t++)})}setActiveRows(e){this.activeRows=this.activeRows=Object.assign([],e),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(e,t){this.displayRows[t]=e,t==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(e){return typeof e>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]}getVisibleRows(e,t){var s=Object.assign([],this.renderer.visibleRows(!t));return e&&(s=this.chain("rows-visible",[t],s,s)),s}displayRowIterator(e){this.activeRowsPipeline.forEach(e),this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(e){var t=[];switch(e){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!1,!0);break;default:t=this.chain("rows-retrieve",e,null,this.rows)||this.rows}return t}reRenderInPosition(e){this.redrawBlock?e?e():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(e),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var e=0;this.element.scrollHeight>this.element.clientHeight&&(e=this.element.offsetWidth-this.element.clientWidth),e!==this.scrollbarWidth&&(this.scrollbarWidth=e,this.dispatch("scrollbar-vertical",e))}initializeRenderer(){var e,t={virtual:Ql,basic:Jl};typeof this.table.options.renderVertical=="string"?e=t[this.table.options.renderVertical]:e=this.table.options.renderVertical,e?(this.renderMode=this.table.options.renderVertical,this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(e,t){var s=e.getElement();t%2?(s.classList.add("tabulator-row-even"),s.classList.remove("tabulator-row-odd")):(s.classList.add("tabulator-row-odd"),s.classList.remove("tabulator-row-even"))}normalizeHeight(e){this.activeRows.forEach(function(t){t.normalizeHeight(e)})}adjustTableSize(){let e=this.element.clientHeight,t,s=!1;if(this.renderer.verticalFillMode==="fill"){let n=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){t=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";const a="calc(100% - "+n+"px)";this.element.style.minHeight=t||"calc(100% - "+n+"px)",this.element.style.height=a,this.element.style.maxHeight=a}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-n+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&e!=this.element.clientHeight&&(s=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),s}reinitialize(){this.rows.forEach(function(e){e.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(e){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))}}class eh extends le{constructor(e){super(e),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e}createContainerElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer-contents"),this.element.appendChild(e),e}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(e){this.activate(),this.containerElement.appendChild(e),this.table.rowManager.adjustTableSize()}prepend(e){this.activate(),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(e){e.parentNode.removeChild(e),this.deactivate()}deactivate(e){(!this.element.firstChild||e)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}}class th extends le{constructor(e){super(e),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var e={};this.listeners.forEach(t=>{e[t]={handler:null,components:[]}}),this.listeners=e}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(e=>{this.pseudoTrackers[e].subscriber=this.pseudoMouseEnter.bind(this,e),this.subscribe(e+"-mouseover",this.pseudoTrackers[e].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(e,t,s){this.pseudoTrackers[e].target!==s&&(this.pseudoTrackers[e].target&&this.dispatch(e+"-mouseleave",t,this.pseudoTrackers[e].target),this.pseudoMouseLeave(e,t),this.pseudoTrackers[e].target=s,this.dispatch(e+"-mouseenter",t,s))}pseudoMouseLeave(e,t){var s=Object.keys(this.pseudoTrackers),n={row:["cell"],cell:["row"]};s=s.filter(a=>{var l=n[e];return a!==e&&(!l||l&&!l.includes(a))}),s.forEach(a=>{var l=this.pseudoTrackers[a].target;this.pseudoTrackers[a].target&&(this.dispatch(a+"-mouseleave",t,l),this.pseudoTrackers[a].target=null)})}bindSubscriptionWatchers(){var e=Object.keys(this.listeners),t=Object.values(this.componentMap);for(let s of t)for(let n of e){let a=s+"-"+n;this.subscriptionChange(a,this.subscriptionChanged.bind(this,s,n))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(e,t,s){var n=this.listeners[t].components,a=n.indexOf(e),l=!1;s?a===-1&&(n.push(e),l=!0):this.subscribed(e+"-"+t)||a>-1&&(n.splice(a,1),l=!0),(t==="mouseenter"||t==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),l&&this.updateEventListeners()}updateEventListeners(){for(let e in this.listeners){let t=this.listeners[e];t.components.length?t.handler||(t.handler=this.track.bind(this,e),this.el.addEventListener(e,t.handler)):t.handler&&(this.el.removeEventListener(e,t.handler),t.handler=null)}}track(e,t){var s=t.composedPath&&t.composedPath()||t.path,n=this.findTargets(s);n=this.bindComponents(e,n),this.triggerEvents(e,t,n),this.pseudoTracking&&(e=="mouseover"||e=="mouseleave")&&!Object.keys(n).length&&this.pseudoMouseLeave("none",t)}findTargets(e){var t={};let s=Object.keys(this.componentMap);for(let n of e){let a=n.classList?[...n.classList]:[];if(a.filter(d=>this.abortClasses.includes(d)).length)break;let h=a.filter(d=>s.includes(d));for(let d of h)t[this.componentMap[d]]||(t[this.componentMap[d]]=n)}return t.group&&t.group===t.row&&delete t.row,t}bindComponents(e,t){var s=Object.keys(t).reverse(),n=this.listeners[e],a={},l={},h={};for(let d of s){let f,g=t[d],b=this.previousTargets[d];if(b&&b.target===g)f=b.component;else switch(d){case"row":case"group":(n.components.includes("row")||n.components.includes("cell")||n.components.includes("group"))&&(f=this.table.rowManager.getVisibleRows(!0).find(w=>w.getElement()===g),t.row&&t.row.parentNode&&t.row.parentNode.closest(".tabulator-row")&&(t[d]=!1));break;case"column":n.components.includes("column")&&(f=this.table.columnManager.findColumn(g));break;case"cell":n.components.includes("cell")&&(a.row instanceof he?f=a.row.findCell(g):t.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}f&&(a[d]=f,h[d]={target:g,component:f})}return this.previousTargets=h,Object.keys(t).forEach(d=>{let f=a[d];l[d]=f}),l}triggerEvents(e,t,s){var n=this.listeners[e];for(let a in s)s[a]&&n.components.includes(a)&&this.dispatch(a+"-"+e,t,s[a])}clearWatchers(){for(let e in this.listeners){let t=this.listeners[e];t.handler&&(this.el.removeEventListener(e,t.handler),t.handler=null)}}}class ih{constructor(e){this.table=e,this.bindings={}}bind(e,t,s){this.bindings[e]||(this.bindings[e]={}),this.bindings[e][t]?console.warn("Unable to bind component handler, a matching function name is already bound",e,t,s):this.bindings[e][t]=s}handle(e,t,s){if(this.bindings[e]&&this.bindings[e][s]&&typeof this.bindings[e][s].bind=="function")return this.bindings[e][s].bind(null,t);s!=="then"&&typeof s=="string"&&!s.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+e+" component does not have a "+s+" function, have you checked that you have the correct Tabulator module installed?")}}class sh extends le{constructor(e){super(e),this.requestOrder=0,this.loading=!1}initialize(){}load(e,t,s,n,a,l){var h=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",e),e&&(e.indexOf("{")==0||e.indexOf("[")==0)&&(e=JSON.parse(e)),this.confirm("data-loading",[e,t,s,a])){this.loading=!0,a||this.alertLoader(),t=this.chain("data-params",[e,s,a],t||{},t||{}),t=this.mapParams(t,this.table.options.dataSendParams);var d=this.chain("data-load",[e,t,s,a],!1,Promise.resolve([]));return d.then(f=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(f)&&typeof f=="object"&&(f=this.mapParams(f,this.objectInvert(this.table.options.dataReceiveParams)));var g=this.chain("data-loaded",[f],null,f);h==this.requestOrder?(this.clearAlert(),g!==!1&&(this.dispatchExternal("dataLoaded",g),this.table.rowManager.setData(g,n,typeof l>"u"?!n:l))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(f=>{console.error("Data Load Error: ",f),this.dispatchExternal("dataLoadError",f),a||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",e),e||(e=[]),this.table.rowManager.setData(e,n,typeof l>"u"?!n:l),Promise.resolve()}mapParams(e,t){var s={};for(let n in e)s[t.hasOwnProperty(n)?t[n]:n]=e[n];return s}objectInvert(e){var t={};for(let s in e)t[e[s]]=s;return t}blockActiveLoad(){this.requestOrder++}alertLoader(){var e=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;e&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}}class nh{constructor(e,t,s){this.table=e,this.events={},this.optionsList=t||{},this.subscriptionNotifiers={},this.dispatch=s?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=s}subscriptionChange(e,t){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(t),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t),this._notifySubscriptionChange(e,!0)}unsubscribe(e,t){var s;if(this.events[e])if(t)if(s=this.events[e].findIndex(n=>n===t),s>-1)this.events[e].splice(s,1);else{console.warn("Cannot remove event, no matching event found:",e,t);return}else delete this.events[e];else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_notifySubscriptionChange(e,t){var s=this.subscriptionNotifiers[e];s&&s.forEach(n=>{n(t)})}_dispatch(){var e=Array.from(arguments),t=e.shift(),s;return this.events[t]&&this.events[t].forEach((n,a)=>{let l=n.apply(this.table,e);a||(s=l)}),s}_debugDispatch(){var e=Array.from(arguments),t=e[0];return e[0]="ExternalEvent:"+e[0],(this.debug===!0||this.debug.includes(t))&&console.log(...e),this._dispatch(...arguments)}}class rh{constructor(e){this.events={},this.subscriptionNotifiers={},this.dispatch=e?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=e?this._debugChain.bind(this):this._chain.bind(this),this.confirm=e?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=e}subscriptionChange(e,t){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(t),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,t,s=1e4){this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,priority:s}),this.events[e].sort((n,a)=>n.priority-a.priority),this._notifySubscriptionChange(e,!0)}unsubscribe(e,t){var s;if(this.events[e]){if(t)if(s=this.events[e].findIndex(n=>n.callback===t),s>-1)this.events[e].splice(s,1);else{console.warn("Cannot remove event, no matching event found:",e,t);return}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_chain(e,t,s,n){var a=s;return Array.isArray(t)||(t=[t]),this.subscribed(e)?(this.events[e].forEach((l,h)=>{a=l.callback.apply(this,t.concat([a]))}),a):typeof n=="function"?n():n}_confirm(e,t){var s=!1;return Array.isArray(t)||(t=[t]),this.subscribed(e)&&this.events[e].forEach((n,a)=>{n.callback.apply(this,t)&&(s=!0)}),s}_notifySubscriptionChange(e,t){var s=this.subscriptionNotifiers[e];s&&s.forEach(n=>{n(t)})}_dispatch(){var e=Array.from(arguments),t=e.shift();this.events[t]&&this.events[t].forEach(s=>{s.callback.apply(this,e)})}_debugDispatch(){var e=Array.from(arguments),t=e[0];return e[0]="InternalEvent:"+t,(this.debug===!0||this.debug.includes(t))&&console.log(...e),this._dispatch(...arguments)}_debugChain(){var e=Array.from(arguments),t=e[0];return e[0]="InternalEvent:"+t,(this.debug===!0||this.debug.includes(t))&&console.log(...e),this._chain(...arguments)}_debugConfirm(){var e=Array.from(arguments),t=e[0];return e[0]="InternalEvent:"+t,(this.debug===!0||this.debug.includes(t))&&console.log(...e),this._confirm(...arguments)}}class ah extends le{constructor(e){super(e)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(e,t,s){var n="";return typeof this.options(e)<"u"?(n="Deprecated Setup Option - Use of the %c"+e+"%c option is now deprecated",t?(n=n+", Please use the %c"+t+"%c option instead",this._warnUser(n,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),s&&(this.table.options[t]=this.table.options[e])):this._warnUser(n,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(e,t){return typeof this.options(e)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+e+" %c option is now deprecated, "+t,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(e){this._warnUser(e)}}class oh extends le{constructor(e){super(e),this.deps={},this.props={}}initialize(){this.deps=Object.assign({},this.options("dependencies"))}lookup(e,t,s){if(Array.isArray(e)){for(const a of e){var n=this.lookup(a,t,!0);if(n)break}if(n)return n;this.error(e)}else return t?this.lookupProp(e,t,s):this.lookupKey(e,s)}lookupProp(e,t,s){var n;if(this.props[e]&&this.props[e][t])return this.props[e][t];if(n=this.lookupKey(e,s),n)return this.props[e]||(this.props[e]={}),this.props[e][t]=n[t]||n,this.props[e][t]}lookupKey(e,t){var s;return this.deps[e]?s=this.deps[e]:window[e]?(this.deps[e]=window[e],s=this.deps[e]):t||this.error(e),s}error(e){console.error("Unable to find dependency",e,"Please check documentation and ensure you have imported the required library into your project")}}function lh(c,e){e&&this.table.columnManager.renderer.reinitializeColumnWidths(c),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Gn(c,e){c.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function hh(c,e){var t=0,s=this.table.rowManager.element.clientWidth,n=0,a=!1;c.forEach((l,h)=>{l.widthFixed||l.reinitializeWidth(),(this.table.options.responsiveLayout?l.modules.responsive.visible:l.visible)&&(a=l),l.visible&&(t+=l.getWidth())}),a?(n=s-t+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),n>0?a.setWidth(n):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function uh(c,e){var t=this.table.rowManager.element.getBoundingClientRect().width,s=0,n=0,a=0,l=0,h=[],d=[],f=0,g=0,b=0;function v(y){var R;return typeof y=="string"?y.indexOf("%")>-1?R=t/100*parseInt(y):R=parseInt(y):R=y,R}function w(y,R,x,A){var z=[],H=0,X=0,W=0,re=a,Me=0,se=0,Ye=[];function Et(U){return x*(U.column.definition.widthGrow||1)}function ae(U){return v(U.width)-x*(U.column.definition.widthShrink||0)}return y.forEach(function(U,Ls){var ve=A?ae(U):Et(U);U.column.minWidth>=ve?z.push(U):U.column.maxWidth&&U.column.maxWidth<ve?(U.width=U.column.maxWidth,R-=U.column.maxWidth,re-=A?U.column.definition.widthShrink||1:U.column.definition.widthGrow||1,re&&(x=Math.floor(R/re))):(Ye.push(U),se+=A?U.column.definition.widthShrink||1:U.column.definition.widthGrow||1)}),z.length?(z.forEach(function(U){H+=A?U.width-U.column.minWidth:U.column.minWidth,U.width=U.column.minWidth}),X=R-H,W=se?Math.floor(X/se):X,Me=w(Ye,X,W,A)):(Me=se?R-Math.floor(R/se)*se:R,Ye.forEach(function(U){U.width=A?ae(U):Et(U)})),Me}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),c.forEach(function(y){var R,x,A;y.visible&&(R=y.definition.width,x=parseInt(y.minWidth),R?(A=v(R),s+=A>x?A:x,y.definition.widthShrink&&(d.push({column:y,width:A>x?A:x}),f+=y.definition.widthShrink)):(h.push({column:y,width:0}),a+=y.definition.widthGrow||1))}),n=t-s,l=Math.floor(n/a),b=w(h,n,l,!1),h.length&&b>0&&(h[h.length-1].width+=b),h.forEach(function(y){n-=y.width}),g=Math.abs(b)+n,g>0&&f&&(b=w(d,g,Math.floor(g/f),!0)),b&&d.length&&(d[d.length-1].width-=b),h.forEach(function(y){y.column.setWidth(y.width)}),d.forEach(function(y){y.column.setWidth(y.width)})}var dh={fitData:lh,fitDataFill:Gn,fitDataTable:Gn,fitDataStretch:hh,fitColumns:uh};const vt=class vt extends I{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;vt.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){e.definition.widthGrow&&(e.definition.widthGrow=Number(e.definition.widthGrow)),e.definition.widthShrink&&(e.definition.widthShrink=Number(e.definition.widthShrink))}getMode(){return this.mode}layout(e){var t=this.table.columnManager.columnsByIndex.find(s=>s.definition.variableHeight||s.definition.formatter==="textarea");this.dispatch("layout-refreshing"),vt.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,e),t&&this.table.rowManager.normalizeHeight(!0),this.dispatch("layout-refreshed")}};S(vt,"moduleName","layout"),S(vt,"modes",dh);let vs=vt;var ch={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}};const Kt=class Kt extends I{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Y.deepClone(Kt.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}installLang(e,t){this.langList[e]?this._setLangProp(this.langList[e],t):this.langList[e]=t}_setLangProp(e,t){for(let s in t)e[s]&&typeof e[s]=="object"?this._setLangProp(e[s],t[s]):e[s]=t[s]}setLocale(e){e=e||"default";function t(s,n){for(var a in s)typeof s[a]=="object"?(n[a]||(n[a]={}),t(s[a],n[a])):n[a]=s[a]}if(e===!0&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let s=e.split("-")[0];this.langList[s]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,s),e=s):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=Y.deepClone(this.langList.default||{}),e!="default"&&t(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,t){var s=t?e+"|"+t:e,n=s.split("|"),a=this._getLangElement(n,this.locale);return a||""}_getLangElement(e,t){var s=this.lang;return e.forEach(function(n){var a;s&&(a=s[n],typeof a<"u"?s=a:s=!1)}),s}bind(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t),t(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(t=>{t(this.getText(e),this.lang)})}};S(Kt,"moduleName","localize"),S(Kt,"langs",ch);let Cs=Kt;class fr extends I{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var t=[],s;return s=this.table.constructor.registry.lookupTable(e),s.forEach(n=>{this.table!==n&&t.push(n)}),t}send(e,t,s,n){var a=this.getConnections(e);a.forEach(l=>{l.tableComms(this.table.element,t,s,n)}),!a.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,t,s,n){if(this.table.modExists(t))return this.table.modules[t].commsReceived(e,s,n);console.warn("Inter-table Comms Error - no such module:",t)}}S(fr,"moduleName","comms");var ph=Object.freeze({__proto__:null,CommsModule:fr,LayoutModule:vs,LocalizeModule:Cs});const ge=class ge{static findTable(e){var t=ge.registry.lookupTable(e,!0);return Array.isArray(t)&&!t.length?!1:t}};S(ge,"registry",{tables:[],register(e){ge.registry.tables.push(e)},deregister(e){var t=ge.registry.tables.indexOf(e);t>-1&&ge.registry.tables.splice(t,1)},lookupTable(e,t){var s=[],n,a;if(typeof e=="string"){if(n=document.querySelectorAll(e),n.length)for(var l=0;l<n.length;l++)a=ge.registry.matchElement(n[l]),a&&s.push(a)}else typeof HTMLElement<"u"&&e instanceof HTMLElement||e instanceof ge?(a=ge.registry.matchElement(e),a&&s.push(a)):Array.isArray(e)?e.forEach(function(h){s=s.concat(ge.registry.lookupTable(h))}):t||console.warn("Table Connection Error - Invalid Selector",e);return s},matchElement(e){return ge.registry.tables.find(function(t){return e instanceof ge?t===e:t.element===e})}});let Es=ge;const Z=class Z extends Es{constructor(){super()}static initializeModuleBinder(e){Z.modulesRegistered||(Z.modulesRegistered=!0,Z._registerModules(ph,!0),e&&Z._registerModules(e))}static _extendModule(e,t,s){if(Z.moduleBindings[e]){var n=Z.moduleBindings[e][t];if(n)if(typeof s=="object")for(let a in s)n[a]=s[a];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",t)}else console.warn("Module Error - module does not exist:",e)}static _registerModules(e,t){var s=Object.values(e);t&&s.forEach(n=>{n.prototype.moduleCore=!0}),Z._registerModule(s)}static _registerModule(e){Array.isArray(e)||(e=[e]),e.forEach(t=>{Z._registerModuleBinding(t),Z._registerModuleExtensions(t)})}static _registerModuleBinding(e){e.moduleName?Z.moduleBindings[e.moduleName]=e:console.error("Unable to bind module, no moduleName defined",e.moduleName)}static _registerModuleExtensions(e){var t=e.moduleExtensions;if(e.moduleExtensions)for(let s in t){let n=t[s];if(Z.moduleBindings[s])for(let a in n)Z._extendModule(s,a,n[a]);else{Z.moduleExtensions[s]||(Z.moduleExtensions[s]={});for(let a in n)Z.moduleExtensions[s][a]||(Z.moduleExtensions[s][a]={}),Object.assign(Z.moduleExtensions[s][a],n[a])}}Z._extendModuleFromQueue(e)}static _extendModuleFromQueue(e){var t=Z.moduleExtensions[e.moduleName];if(t)for(let s in t)Z._extendModule(e.moduleName,s,t[s])}_bindModules(){var e=[],t=[],s=[];this.modules={};for(var n in Z.moduleBindings){let a=Z.moduleBindings[n],l=new a(this);this.modules[n]=l,a.prototype.moduleCore?this.modulesCore.push(l):a.moduleInitOrder?a.moduleInitOrder<0?e.push(l):t.push(l):s.push(l)}e.sort((a,l)=>a.moduleInitOrder>l.moduleInitOrder?1:-1),t.sort((a,l)=>a.moduleInitOrder>l.moduleInitOrder?1:-1),this.modulesRegular=e.concat(s.concat(t))}};S(Z,"moduleBindings",{}),S(Z,"moduleExtensions",{}),S(Z,"modulesRegistered",!1),S(Z,"defaultModules",!1);let ws=Z;class fh extends le{constructor(e){super(e),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert"),e}_createMsgElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert-msg"),e.setAttribute("role","alert"),e}_typeClass(){return"tabulator-alert-state-"+this.type}alert(e,t="msg"){if(e){for(this.clear(),this.dispatch("alert-show",t),this.type=t;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof e=="function"&&(e=e()),e instanceof HTMLElement?this.msgElement.appendChild(e):this.msgElement.innerHTML=e,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}}const Oe=class Oe extends ws{static extendModule(){Oe.initializeModuleBinder(),Oe._extendModule(...arguments)}static registerModule(){Oe.initializeModuleBinder(),Oe._registerModule(...arguments)}constructor(e,t,s){super(),Oe.initializeModuleBinder(s),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new ih(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new ah(this),this.optionsList=new pr(this,"table constructor"),this.dependencyRegistry=new oh(this),this.initialized=!1,this.destroyed=!1,this.initializeElement(e)&&(this.initializeCoreSystems(t),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement?(this.element=e,!0):typeof e=="string"?(this.element=document.querySelector(e),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initializeCoreSystems(e){this.columnManager=new Xl(this),this.rowManager=new $l(this),this.footerManager=new eh(this),this.dataLoader=new sh(this),this.alertManager=new fh(this),this._bindModules(),this.options=this.optionsList.generate(Oe.defaultOptions,e),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new nh(this,this.options,this.options.debugEventsExternal),this.eventBus=new rh(this.options.debugEventsInternal),this.interactionMonitor=new th(this),this.dataLoader.initialize(),this.footerManager.initialize(),this.dependencyRegistry.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(e.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e=this.element,t=this.options,s;if(e.tagName==="TABLE"){this.originalElement=this.element,s=document.createElement("div");var n=e.attributes;for(var a in n)typeof n[a]=="object"&&s.setAttribute(n[a].name,n[a].value);e.parentNode.replaceChild(s,e),this.element=e=s}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);t.height&&(t.height=isNaN(t.height)?t.height:t.height+"px",e.style.height=t.height),t.minHeight!==!1&&(t.minHeight=isNaN(t.minHeight)?t.minHeight:t.minHeight+"px",e.style.minHeight=t.minHeight),t.maxHeight!==!1&&(t.maxHeight=isNaN(t.maxHeight)?t.maxHeight:t.maxHeight+"px",e.style.maxHeight=t.maxHeight)}_initializeTable(){var e=this.element,t=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(s=>{s.initialize()}),e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),t.footerElement&&this.footerManager.activate(),t.autoColumns&&t.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(s=>{s.initialize()}),this.columnManager.setColumns(t.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var e=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):e.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0,4))}initGuard(e,t){var s,n;return this.options.debugInitialization&&!this.initialized&&(e||(s=new Error().stack.split(`
`),n=s[0]=="Error"?s[2]:s[1],n[0]==" "?e=n.trim().split(" ")[1].split(".")[1]:e=n.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+e+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(t?" "+t:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(e,t,s){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(e,t,s,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,t,s){return this.initGuard(),this.dataLoader.load(e,t,s,!0,!0)}updateData(e){var t=0;return this.initGuard(),new Promise((s,n)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(a=>{var l=this.rowManager.findRow(a[this.options.index]);l?(t++,l.updateData(a).then(()=>{t--,t||s()}).catch(h=>{n("Update Error - Unable to update row",a,h)})):n("Update Error - Unable to find row",a)}):(console.warn("Update Error - No data provided"),n("Update Error - No data provided"))})}addData(e,t,s){return this.initGuard(),new Promise((n,a)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,t,s).then(l=>{var h=[];l.forEach(function(d){h.push(d.getComponent())}),n(h)}):(console.warn("Update Error - No data provided"),a("Update Error - No data provided"))})}updateOrAddData(e){var t=[],s=0;return this.initGuard(),new Promise((n,a)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(l=>{var h=this.rowManager.findRow(l[this.options.index]);s++,h?h.updateData(l).then(()=>{s--,t.push(h.getComponent()),s||n(t)}):this.rowManager.addRows(l).then(d=>{s--,t.push(d[0].getComponent()),s||n(t)})}):(console.warn("Update Error - No data provided"),a("Update Error - No data provided"))})}getRow(e){var t=this.rowManager.findRow(e);return t?t.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e){var t=this.rowManager.getRowFromPosition(e);return t?t.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var t=[];this.initGuard(),Array.isArray(e)||(e=[e]);for(let s of e){let n=this.rowManager.findRow(s,!0);if(n)t.push(n);else return console.error("Delete Error - No matching row found:",s),Promise.reject("Delete Error - No matching row found")}return t.sort((s,n)=>this.rowManager.rows.indexOf(s)>this.rowManager.rows.indexOf(n)?1:-1),t.forEach(s=>{s.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,t,s){return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),this.rowManager.addRows(e,t,s,!0).then(n=>n[0].getComponent())}updateOrAddRow(e,t){var s=this.rowManager.findRow(e);return this.initGuard(),typeof t=="string"&&(t=JSON.parse(t)),s?s.updateData(t).then(()=>s.getComponent()):this.rowManager.addRows(t).then(n=>n[0].getComponent())}updateRow(e,t){var s=this.rowManager.findRow(e);return this.initGuard(),typeof t=="string"&&(t=JSON.parse(t)),s?s.updateData(t).then(()=>Promise.resolve(s.getComponent())):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,t,s){var n=this.rowManager.findRow(e);return n?this.rowManager.scrollToRow(n,t,s):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,t,s){var n=this.rowManager.findRow(e);this.initGuard(),n?n.moveToRow(t,s):console.warn("Move Error - No matching row found:",e)}getRows(e){return this.rowManager.getComponents(e)}getRowPosition(e){var t=this.rowManager.findRow(e);return t?t.getPosition():(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(e)}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var t=this.columnManager.findColumn(e);return t?t.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var t=this.columnManager.findColumn(e);if(this.initGuard(),t)t.show();else return console.warn("Column Show Error - No matching column found:",e),!1}hideColumn(e){var t=this.columnManager.findColumn(e);if(this.initGuard(),t)t.hide();else return console.warn("Column Hide Error - No matching column found:",e),!1}toggleColumn(e){var t=this.columnManager.findColumn(e);if(this.initGuard(),t)t.visible?t.hide():t.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1}addColumn(e,t,s){var n=this.columnManager.findColumn(s);return this.initGuard(),this.columnManager.addColumn(e,t,n).then(a=>a.getComponent())}deleteColumn(e){var t=this.columnManager.findColumn(e);return this.initGuard(),t?t.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,t){var s=this.columnManager.findColumn(e);return this.initGuard(),s?s.updateDefinition(t):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,t,s){var n=this.columnManager.findColumn(e),a=this.columnManager.findColumn(t);this.initGuard(),n?a?this.columnManager.moveColumn(n,a,s):console.warn("Move Error - No matching column found:",a):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,t,s){return new Promise((n,a)=>{var l=this.columnManager.findColumn(e);return l?this.columnManager.scrollToColumn(l,t,s):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initGuard(),this.columnManager.redraw(e),this.rowManager.redraw(e)}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(e,t){this.externalEvents.subscribe(e,t)}off(e,t){this.externalEvents.unsubscribe(e,t)}dispatchEvent(){var e=Array.from(arguments);e.shift(),this.externalEvents.dispatch(...arguments)}alert(e,t){this.initGuard(),this.alertManager.alert(e,t)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(e,t){return this.modules[e]?!0:(t&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var t=this.modules[e];return t||console.error("Tabulator module not installed: "+e),t}};S(Oe,"defaultOptions",Zl);let _s=Oe;var kt=_s;class mh extends kt{static extendModule(){kt.initializeModuleBinder(qi),kt._extendModule(...arguments)}static registerModule(){kt.initializeModuleBinder(qi),kt._registerModule(...arguments)}constructor(e,t,s){super(e,t,qi)}}var gh=mh;const bh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",mr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",vh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABHNCSVQICAgIfAhkiAAABz9JREFUWEeVV3toXFUa/84592bmzjuPxpqYrRVsWAStjcWKYmmtFMVVsbSLu8qi0ob9Z//SUncVQ0FUrH+oKFTUKiIuW7e6Wgz4qFFh3W1ta+2yVrFiJklN85pH5r7vOcfv3MmkmclMMh74cuee+33f73zvEwJNrn9v3d6Ws6Fbc4IVEmA61p45d+PggclmxMlSTIObtvcyO7iPE3KPlKKbUWYznQWBHzAphMEImZDA32ICDmz573vfNNJVF0TCAP3w2lO7BYOBeDIF8ZgRiRgG0BYdCCEgpQQRAHjWLNi25RVzRSKJfNLYunbvpoEB/FK9FoF8fMO2y5yA/0PX9d9e1N0V0xkD4fkg/QAJn1wAYRSIjoC6FgL7nMPkzz9bvuedJb6+/ZavDn63EKYK5PB1d2zFY76bzrSx1o52XdoOcNOuPdiid2ZEgcQNyE3PBPnpKc4ZvfvOL//1ToVxHuTTvrs7Csz8oavr4nQcXRPkZ/HUfJHCRhsELdZSCbA8F8bHxkxIyN7fHTk8pvhpRaioma8l0qloLBoFbyqHPkf3oO9rCShdtFeOUQDeTB4wepDIZDRh0jcqukOQQ+tv+6Nk5KaL2jIRXigBCFFFVNNAb01AS0cb0EwyfOqt6TAetbxKvqO1LQKUbTi0/vadSj/5qm9XbJiMTfZ0dcWiaBifNSsHCJ9aygARNWCykAfTNCFwXGAY8FgqBZ2JFDBMhKCYR7B5pwBLxsEBAcPj55zVvLtdy0J2HdEjGLcIeBNTyIylNrdYPAYuYTA8OgI9WzfCNX+4A5KrLgFz7Dyc/ecHcPbQIPS0d0AUA7/wcHy2APHODtAoE1meXcfu6lmzLRZN3JTSmM4tXxkXEmEasEwCRnMz0PvA7+Gqv9wP0bYMEIxJJJOCldf1gbFyBXz/yefQlsxgenNMFHVAlJcEqM6gFMjA4d4Z9A/cGI/ohqoFEBdI1UDRcoCkE9B777Z56xb+uPTWzRBf3QM5s4TxaamSV/qUXqWfIugGA1Gl65VdpdyFRDUCtuvCivVXhVXeaK3csA6cwEXLy3Khu5GUvlAv6tcCwWPlViEwNTGr5pZKS47vWiLRSH+4rwoxmKuEannsDHg4IbiBKSG/thx0CxZT5RThSbCFRDAu54+fWhLk/Mn/QURiPGo8ofQpvajqJBWSfm65gR+CLFgCUzUd0SH//Y8w8sXRukCTp7+F8f+cgFYjFva3hasM4nucsM+oAH4s71qe2lRtpEIKhNgudCcT8OlDe+HM24fDLqCWwGL98cPP4KM/PwwXJ9PAMLO4aVXJK31Fr+T5xDtG3rr65i5TkpG+7m4qsC2obju/MF1VZZvojp9KJWzrNqRWdkJpYhILUofVOAZSWgsEU5MYzwvFGHZnTPcT50a54RvdYdq8unbL0d+k0us7qA68MLvQaswOjhWMp1WFiWCO50FEb4EoxRGA8yQoloDIalezdBKmhS+HC8Wj95/6aIOmNLqS7Rs1zQOdKzpiQRE7r+pdlYUZyQvYMLF1qF6VwD4m0CpPWTzHhyPsAj9aT6MajE7k0NnwlPoQ2ki1Ve/4ge8VMXg0Gkdh3K4hyXEi2gG2Dyd8Yt4u4lEySj7veOByXmr/28735kH6j7/kY6q9OG7O2szQ0L+q8quLq6l31MhweJ2zTJsL+cyOHTvCgTQfrZYIf37adpklONCYEQL9WqIxHUqeBQXHJjEfXlEAVSD3HRsax972fLZkozXRcDDVzool39WJ8XAjZgnnNX3mT2c+mV4EojaiLjyR82zsnn5odu1UXOpdAcz6HhJmgw5PVwCqLFEvCl0C2zdiW7ZK2XDVTMm678imDjVsWZYg4on+4x8XysLlvxcqaG432dW5r4B3nCJeCBQQQa8tR1oijtXtgukFQWtGPLsQQP1eBHLP4JtFbJ6PZx3XVi7A3hy2kUaErRwIxvAnvOWBJvbuGBrCS0L1WgQSftbiz9mcuwXfxVYfR0tkQ2LJKOQ9B2eKcNak4YVaAPVeF6T/+PsWlsljWc8PrQmHVp3YqH1VfIoPGHl009CQ0zSIYuyxWva7XJRm8JQ0EambaQRvJeq7G/Di9Ze3vVwPoKEl6sOtPwy6ONUeGQ24TQxsNdiTqqo+7FERGA3QCo3+9YqDB3F+11913VVhXbNt46uekLmZMNPURUHdA8qkoXVqH2MxlXl41+v11Zd3lwRR/wZISvaMSFmODd7mVUGqWz3gVTDLfRWDPZUe1QhoSRAltPPk9W/6PBifxNZOMdNUAjCclhNeAL4gY7tOb/x7I+WV/WVBCAwIPPnuMYE3T5Vpqq8hjQnpUJ3uVt+XA2l8oVogiS4iL125+f+rNNbbiZfL80LKLJff9p8+csVyAOr7spYoJqwHCS3swawknofuGgXqUyYfagYglG+WUfHtv3LzCXTWWrylnez/5khfs7JNWVJRRkF70Ea78Nm0Fc0epIpv/9Vb9vxawV8ATDJxeOTpX78AAAAASUVORK5CYII=",Ch={"BK_STRUCTURE:85":{name:"REFUGE DE L'AIGLE (FFCAM)",structure:"BK_STRUCTURE:85",availability:{"2025-08-01":16,"2025-08-02":0,"2025-08-03":10,"2025-08-04":2,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":7,"2025-08-10":8,"2025-08-11":12,"2025-08-12":10,"2025-08-13":20,"2025-08-14":18,"2025-08-15":11,"2025-08-16":12,"2025-08-17":16,"2025-08-18":18,"2025-08-19":20,"2025-08-20":18,"2025-08-21":20,"2025-08-22":20,"2025-08-23":18,"2025-08-24":20,"2025-08-25":20,"2025-08-26":16,"2025-08-27":20,"2025-08-28":20,"2025-08-29":20,"2025-08-30":20,"2025-08-31":20,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:58":{name:"REFUGE DES AIGUILLES D'ARVES (FFCAM)",structure:"BK_STRUCTURE:58",availability:{"2025-08-01":11,"2025-08-02":1,"2025-08-03":24,"2025-08-04":35,"2025-08-05":20,"2025-08-06":0,"2025-08-07":5,"2025-08-08":29,"2025-08-09":8,"2025-08-10":11,"2025-08-11":0,"2025-08-12":2,"2025-08-13":0,"2025-08-14":32,"2025-08-15":21,"2025-08-16":39,"2025-08-17":32,"2025-08-18":29,"2025-08-19":22,"2025-08-20":32,"2025-08-21":28,"2025-08-22":29,"2025-08-23":0,"2025-08-24":34,"2025-08-25":39,"2025-08-26":39,"2025-08-27":26,"2025-08-28":20,"2025-08-29":39,"2025-08-30":0,"2025-08-31":35,"2025-09-01":28,"2025-09-02":39,"2025-09-03":34,"2025-09-04":35,"2025-09-05":39,"2025-09-06":14,"2025-09-07":39,"2025-09-08":38,"2025-09-09":39,"2025-09-10":26,"2025-09-11":39,"2025-09-12":39,"2025-09-13":14,"2025-09-14":39,"2025-09-15":39,"2025-09-16":39,"2025-09-17":39,"2025-09-18":39,"2025-09-19":24,"2025-09-20":24,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:22":{name:"REFUGE ALBERT 1ER (FFCAM)",structure:"BK_STRUCTURE:22",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":-6,"2025-08-04":-17,"2025-08-05":0,"2025-08-06":0,"2025-08-07":13,"2025-08-08":-1,"2025-08-09":-3,"2025-08-10":-5,"2025-08-11":-1,"2025-08-12":0,"2025-08-13":12,"2025-08-14":7,"2025-08-15":20,"2025-08-16":0,"2025-08-17":57,"2025-08-18":3,"2025-08-19":29,"2025-08-20":39,"2025-08-21":6,"2025-08-22":57,"2025-08-23":5,"2025-08-24":89,"2025-08-25":35,"2025-08-26":53,"2025-08-27":4,"2025-08-28":43,"2025-08-29":86,"2025-08-30":1,"2025-08-31":77,"2025-09-01":87,"2025-09-02":68,"2025-09-03":87,"2025-09-04":64,"2025-09-05":86,"2025-09-06":45,"2025-09-07":103,"2025-09-08":59,"2025-09-09":99,"2025-09-10":111,"2025-09-11":44,"2025-09-12":102,"2025-09-13":34,"2025-09-14":107,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:74":{name:"REFUGE DE L'ALPE DE VILLAR D'ARÈNE (FFCAM)",structure:"BK_STRUCTURE:74",availability:{"2025-08-01":13,"2025-08-02":11,"2025-08-03":23,"2025-08-04":1,"2025-08-05":7,"2025-08-06":3,"2025-08-07":12,"2025-08-08":12,"2025-08-09":9,"2025-08-10":0,"2025-08-11":11,"2025-08-12":17,"2025-08-13":30,"2025-08-14":0,"2025-08-15":10,"2025-08-16":37,"2025-08-17":30,"2025-08-18":22,"2025-08-19":13,"2025-08-20":7,"2025-08-21":29,"2025-08-22":36,"2025-08-23":0,"2025-08-24":37,"2025-08-25":31,"2025-08-26":0,"2025-08-27":39,"2025-08-28":40,"2025-08-29":50,"2025-08-30":47,"2025-08-31":41,"2025-09-01":53,"2025-09-02":53,"2025-09-03":43,"2025-09-04":60,"2025-09-05":58,"2025-09-06":0,"2025-09-07":17,"2025-09-08":51,"2025-09-09":59,"2025-09-10":52,"2025-09-11":60,"2025-09-12":49,"2025-09-13":0,"2025-09-14":70,"2025-09-15":40,"2025-09-16":39,"2025-09-17":38,"2025-09-18":40,"2025-09-19":37,"2025-09-20":40,"2025-09-21":40,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:54":{name:"REFUGE D'AMBIN (FFCAM)",structure:"BK_STRUCTURE:54",availability:{"2025-08-01":12,"2025-08-02":17,"2025-08-03":1,"2025-08-04":16,"2025-08-05":0,"2025-08-06":7,"2025-08-07":0,"2025-08-08":11,"2025-08-09":4,"2025-08-10":8,"2025-08-11":0,"2025-08-12":1,"2025-08-13":1,"2025-08-14":1,"2025-08-15":12,"2025-08-16":18,"2025-08-17":17,"2025-08-18":11,"2025-08-19":12,"2025-08-20":1,"2025-08-21":11,"2025-08-22":17,"2025-08-23":14,"2025-08-24":16,"2025-08-25":19,"2025-08-26":19,"2025-08-27":17,"2025-08-28":20,"2025-08-29":20,"2025-08-30":12,"2025-08-31":20,"2025-09-01":20,"2025-09-02":20,"2025-09-03":20,"2025-09-04":20,"2025-09-05":20,"2025-09-06":20,"2025-09-07":20,"2025-09-08":20,"2025-09-09":20,"2025-09-10":20,"2025-09-11":20,"2025-09-12":20,"2025-09-13":20,"2025-09-14":20,"2025-09-15":20,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:124":{name:"REFUGE D'ARRÉMOULIT (FFCAM)",structure:"BK_STRUCTURE:124",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:53":{name:"REFUGE D'AVEROLE (FFCAM)",structure:"BK_STRUCTURE:53",availability:{"2025-08-01":51,"2025-08-02":55,"2025-08-03":43,"2025-08-04":47,"2025-08-05":51,"2025-08-06":11,"2025-08-07":36,"2025-08-08":33,"2025-08-09":-1,"2025-08-10":41,"2025-08-11":43,"2025-08-12":46,"2025-08-13":33,"2025-08-14":54,"2025-08-15":31,"2025-08-16":47,"2025-08-17":59,"2025-08-18":53,"2025-08-19":54,"2025-08-20":63,"2025-08-21":61,"2025-08-22":63,"2025-08-23":55,"2025-08-24":62,"2025-08-25":63,"2025-08-26":53,"2025-08-27":62,"2025-08-28":54,"2025-08-29":55,"2025-08-30":60,"2025-08-31":64,"2025-09-01":45,"2025-09-02":50,"2025-09-03":42,"2025-09-04":0,"2025-09-05":44,"2025-09-06":39,"2025-09-07":50,"2025-09-08":46,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":50,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:68":{name:"REFUGE DES BANS (FFCAM)",structure:"BK_STRUCTURE:68",availability:{"2025-08-01":0,"2025-08-02":2,"2025-08-03":5,"2025-08-04":1,"2025-08-05":1,"2025-08-06":2,"2025-08-07":0,"2025-08-08":3,"2025-08-09":0,"2025-08-10":2,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":2,"2025-08-16":3,"2025-08-17":7,"2025-08-18":3,"2025-08-19":5,"2025-08-20":1,"2025-08-21":1,"2025-08-22":14,"2025-08-23":0,"2025-08-24":12,"2025-08-25":13,"2025-08-26":16,"2025-08-27":9,"2025-08-28":16,"2025-08-29":16,"2025-08-30":16,"2025-08-31":16,"2025-09-01":16,"2025-09-02":16,"2025-09-03":16,"2025-09-04":12,"2025-09-05":16,"2025-09-06":16,"2025-09-07":16,"2025-09-08":15,"2025-09-09":15,"2025-09-10":16,"2025-09-11":12,"2025-09-12":16,"2025-09-13":16,"2025-09-14":16,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:107":{name:"REFUGE DE BAYSSELLANCE (FFCAM)",structure:"BK_STRUCTURE:107",availability:{"2025-08-01":0,"2025-08-02":4,"2025-08-03":7,"2025-08-04":0,"2025-08-05":4,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":1,"2025-08-10":0,"2025-08-11":6,"2025-08-12":0,"2025-08-13":1,"2025-08-14":0,"2025-08-15":1,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":1,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":8,"2025-09-01":17,"2025-09-02":10,"2025-09-03":9,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":26,"2025-09-08":21,"2025-09-09":10,"2025-09-10":4,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":16,"2025-09-15":38,"2025-09-16":33,"2025-09-17":13,"2025-09-18":0,"2025-09-19":3,"2025-09-20":0,"2025-09-21":40,"2025-09-22":39,"2025-09-23":38,"2025-09-24":38,"2025-09-25":45,"2025-09-26":22,"2025-09-27":0,"2025-09-28":49,"2025-09-29":52,"2025-09-30":56}},"BK_STRUCTURE:125":{name:"REFUGE DES BÉSINES (FFCAM)",structure:"BK_STRUCTURE:125",availability:{"2025-08-01":8,"2025-08-02":3,"2025-08-03":7,"2025-08-04":2,"2025-08-05":2,"2025-08-06":1,"2025-08-07":1,"2025-08-08":2,"2025-08-09":0,"2025-08-10":0,"2025-08-11":2,"2025-08-12":0,"2025-08-13":1,"2025-08-14":0,"2025-08-15":0,"2025-08-16":1,"2025-08-17":23,"2025-08-18":15,"2025-08-19":3,"2025-08-20":0,"2025-08-21":29,"2025-08-22":51,"2025-08-23":32,"2025-08-24":37,"2025-08-25":24,"2025-08-26":9,"2025-08-27":24,"2025-08-28":45,"2025-08-29":47,"2025-08-30":42,"2025-08-31":49,"2025-09-01":34,"2025-09-02":30,"2025-09-03":9,"2025-09-04":26,"2025-09-05":30,"2025-09-06":36,"2025-09-07":27,"2025-09-08":41,"2025-09-09":34,"2025-09-10":0,"2025-09-11":37,"2025-09-12":35,"2025-09-13":2,"2025-09-14":40,"2025-09-15":16,"2025-09-16":34,"2025-09-17":39,"2025-09-18":37,"2025-09-19":28,"2025-09-20":33,"2025-09-21":46,"2025-09-22":46,"2025-09-23":43,"2025-09-24":46,"2025-09-25":43,"2025-09-26":42,"2025-09-27":24,"2025-09-28":44,"2025-09-29":45,"2025-09-30":43}},"BK_STRUCTURE:46":{name:"CHALET DE BONNEVAL SUR ARC (FFCAM)",structure:"BK_STRUCTURE:46",availability:{"2025-08-01":14,"2025-08-02":1,"2025-08-03":9,"2025-08-04":0,"2025-08-05":0,"2025-08-06":11,"2025-08-07":11,"2025-08-08":3,"2025-08-09":1,"2025-08-10":14,"2025-08-11":15,"2025-08-12":11,"2025-08-13":13,"2025-08-14":0,"2025-08-15":3,"2025-08-16":11,"2025-08-17":15,"2025-08-18":12,"2025-08-19":13,"2025-08-20":15,"2025-08-21":12,"2025-08-22":10,"2025-08-23":15,"2025-08-24":15,"2025-08-25":14,"2025-08-26":15,"2025-08-27":12,"2025-08-28":15,"2025-08-29":15,"2025-08-30":15,"2025-08-31":1,"2025-09-01":14,"2025-09-02":15,"2025-09-03":15,"2025-09-04":14,"2025-09-05":9,"2025-09-06":15,"2025-09-07":15,"2025-09-08":13,"2025-09-09":15,"2025-09-10":5,"2025-09-11":15,"2025-09-12":15,"2025-09-13":15,"2025-09-14":15,"2025-09-15":12,"2025-09-16":14,"2025-09-17":14,"2025-09-18":14,"2025-09-19":15,"2025-09-20":15,"2025-09-21":15,"2025-09-22":15,"2025-09-23":15,"2025-09-24":15,"2025-09-25":15,"2025-09-26":15,"2025-09-27":15,"2025-09-28":15,"2025-09-29":15,"2025-09-30":15}},"BK_STRUCTURE:112":{name:"REFUGE DE LA BRÈCHE DE ROLAND - LES SARRADETS (FFCAM)",structure:"BK_STRUCTURE:112",availability:{"2025-08-01":-1,"2025-08-02":0,"2025-08-03":0,"2025-08-04":4,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":1,"2025-08-09":12,"2025-08-10":0,"2025-08-11":2,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":-1,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":2,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":-1,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":1,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":9,"2025-09-29":27,"2025-09-30":31}},"BK_STRUCTURE:113":{name:"REFUGE DE CAMPANA DE CLOUTOU (FFCAM)",structure:"BK_STRUCTURE:113",availability:{"2025-08-01":1,"2025-08-02":0,"2025-08-03":3,"2025-08-04":0,"2025-08-05":-1,"2025-08-06":0,"2025-08-07":9,"2025-08-08":4,"2025-08-09":36,"2025-08-10":2,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":2,"2025-08-17":1,"2025-08-18":-1,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":10,"2025-08-25":0,"2025-08-26":1,"2025-08-27":0,"2025-08-28":2,"2025-08-29":14,"2025-08-30":0,"2025-08-31":28,"2025-09-01":13,"2025-09-02":1,"2025-09-03":25,"2025-09-04":0,"2025-09-05":10,"2025-09-06":1,"2025-09-07":28,"2025-09-08":23,"2025-09-09":0,"2025-09-10":1,"2025-09-11":0,"2025-09-12":14,"2025-09-13":0,"2025-09-14":31,"2025-09-15":27,"2025-09-16":17,"2025-09-17":9,"2025-09-18":18,"2025-09-19":15,"2025-09-20":0,"2025-09-21":27,"2025-09-22":24,"2025-09-23":32,"2025-09-24":32,"2025-09-25":36,"2025-09-26":32,"2025-09-27":0,"2025-09-28":27,"2025-09-29":36,"2025-09-30":36}},"BK_STRUCTURE:48":{name:"REFUGE DU CARRO (FFCAM)",structure:"BK_STRUCTURE:48",availability:{"2025-08-01":49,"2025-08-02":18,"2025-08-03":41,"2025-08-04":26,"2025-08-05":2,"2025-08-06":6,"2025-08-07":7,"2025-08-08":17,"2025-08-09":6,"2025-08-10":33,"2025-08-11":18,"2025-08-12":5,"2025-08-13":23,"2025-08-14":10,"2025-08-15":22,"2025-08-16":30,"2025-08-17":49,"2025-08-18":32,"2025-08-19":34,"2025-08-20":31,"2025-08-21":21,"2025-08-22":39,"2025-08-23":49,"2025-08-24":56,"2025-08-25":53,"2025-08-26":50,"2025-08-27":52,"2025-08-28":61,"2025-08-29":55,"2025-08-30":21,"2025-08-31":60,"2025-09-01":61,"2025-09-02":51,"2025-09-03":58,"2025-09-04":42,"2025-09-05":61,"2025-09-06":43,"2025-09-07":61,"2025-09-08":44,"2025-09-09":61,"2025-09-10":61,"2025-09-11":61,"2025-09-12":57,"2025-09-13":52,"2025-09-14":59,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:63":{name:"REFUGE DE CHABOURNÉOU (FFCAM)",structure:"BK_STRUCTURE:63",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":-1,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":8,"2025-08-18":0,"2025-08-19":1,"2025-08-20":0,"2025-08-21":1,"2025-08-22":10,"2025-08-23":18,"2025-08-24":23,"2025-08-25":14,"2025-08-26":32,"2025-08-27":33,"2025-08-28":28,"2025-08-29":30,"2025-08-30":30,"2025-08-31":38,"2025-09-01":36,"2025-09-02":40,"2025-09-03":32,"2025-09-04":32,"2025-09-05":30,"2025-09-06":1,"2025-09-07":36,"2025-09-08":39,"2025-09-09":34,"2025-09-10":36,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:97":{name:"REFUGE DE CHAMBEYRON (FFCAM)",structure:"BK_STRUCTURE:97",availability:{"2025-08-01":8,"2025-08-02":18,"2025-08-03":21,"2025-08-04":0,"2025-08-05":3,"2025-08-06":9,"2025-08-07":7,"2025-08-08":9,"2025-08-09":1,"2025-08-10":1,"2025-08-11":12,"2025-08-12":0,"2025-08-13":1,"2025-08-14":28,"2025-08-15":4,"2025-08-16":30,"2025-08-17":12,"2025-08-18":2,"2025-08-19":1,"2025-08-20":1,"2025-08-21":1,"2025-08-22":13,"2025-08-23":12,"2025-08-24":28,"2025-08-25":37,"2025-08-26":37,"2025-08-27":29,"2025-08-28":35,"2025-08-29":34,"2025-08-30":21,"2025-08-31":38,"2025-09-01":35,"2025-09-02":33,"2025-09-03":26,"2025-09-04":31,"2025-09-05":36,"2025-09-06":31,"2025-09-07":38,"2025-09-08":10,"2025-09-09":17,"2025-09-10":36,"2025-09-11":37,"2025-09-12":29,"2025-09-13":40,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:83":{name:"REFUGE DU CHATELLERET (FFCAM)",structure:"BK_STRUCTURE:83",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:67":{name:"REFUGE DU CLOT - XAVIER BLANC (FFCAM)",structure:"BK_STRUCTURE:67",availability:{"2025-08-01":21,"2025-08-02":8,"2025-08-03":11,"2025-08-04":0,"2025-08-05":2,"2025-08-06":4,"2025-08-07":5,"2025-08-08":4,"2025-08-09":10,"2025-08-10":12,"2025-08-11":0,"2025-08-12":8,"2025-08-13":19,"2025-08-14":20,"2025-08-15":11,"2025-08-16":18,"2025-08-17":11,"2025-08-18":2,"2025-08-19":4,"2025-08-20":15,"2025-08-21":11,"2025-08-22":5,"2025-08-23":18,"2025-08-24":25,"2025-08-25":17,"2025-08-26":28,"2025-08-27":17,"2025-08-28":26,"2025-08-29":14,"2025-08-30":29,"2025-08-31":28,"2025-09-01":23,"2025-09-02":28,"2025-09-03":28,"2025-09-04":30,"2025-09-05":15,"2025-09-06":25,"2025-09-07":30,"2025-09-08":30,"2025-09-09":30,"2025-09-10":26,"2025-09-11":19,"2025-09-12":28,"2025-09-13":19,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:45":{name:"REFUGE DU COL DE LA VANOISE",structure:"BK_STRUCTURE:45",availability:{"2025-08-01":14,"2025-08-02":4,"2025-08-03":0,"2025-08-04":4,"2025-08-05":0,"2025-08-06":0,"2025-08-07":9,"2025-08-08":0,"2025-08-09":6,"2025-08-10":0,"2025-08-11":4,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":6,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":20,"2025-08-25":2,"2025-08-26":6,"2025-08-27":32,"2025-08-28":21,"2025-08-29":49,"2025-08-30":0,"2025-08-31":35,"2025-09-01":37,"2025-09-02":18,"2025-09-03":23,"2025-09-04":3,"2025-09-05":95,"2025-09-06":22,"2025-09-07":70,"2025-09-08":23,"2025-09-09":15,"2025-09-10":33,"2025-09-11":44,"2025-09-12":75,"2025-09-13":41,"2025-09-14":86,"2025-09-15":-1,"2025-09-16":29,"2025-09-17":87,"2025-09-18":63,"2025-09-19":104,"2025-09-20":11,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:34":{name:"REFUGE DES CONSCRITS (FFCAM)",structure:"BK_STRUCTURE:34",availability:{"2025-08-01":59,"2025-08-02":13,"2025-08-03":64,"2025-08-04":54,"2025-08-05":58,"2025-08-06":50,"2025-08-07":35,"2025-08-08":54,"2025-08-09":43,"2025-08-10":63,"2025-08-11":48,"2025-08-12":41,"2025-08-13":52,"2025-08-14":49,"2025-08-15":57,"2025-08-16":49,"2025-08-17":66,"2025-08-18":70,"2025-08-19":68,"2025-08-20":68,"2025-08-21":67,"2025-08-22":65,"2025-08-23":62,"2025-08-24":70,"2025-08-25":66,"2025-08-26":70,"2025-08-27":70,"2025-08-28":70,"2025-08-29":70,"2025-08-30":58,"2025-08-31":70,"2025-09-01":65,"2025-09-02":70,"2025-09-03":70,"2025-09-04":65,"2025-09-05":62,"2025-09-06":59,"2025-09-07":70,"2025-09-08":70,"2025-09-09":70,"2025-09-10":70,"2025-09-11":66,"2025-09-12":57,"2025-09-13":68,"2025-09-14":70,"2025-09-15":70,"2025-09-16":70,"2025-09-17":70,"2025-09-18":70,"2025-09-19":70,"2025-09-20":64,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:4m2wkebwwg2f":{name:"CHALET DES CONTAMINES (FFCAM)",structure:"BK_STRUCTURE:4m2wkebwwg2f",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":1,"2025-08-04":6,"2025-08-05":3,"2025-08-06":11,"2025-08-07":11,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":10,"2025-08-12":0,"2025-08-13":0,"2025-08-14":6,"2025-08-15":0,"2025-08-16":1,"2025-08-17":0,"2025-08-18":2,"2025-08-19":16,"2025-08-20":0,"2025-08-21":10,"2025-08-22":0,"2025-08-23":0,"2025-08-24":11,"2025-08-25":10,"2025-08-26":0,"2025-08-27":0,"2025-08-28":5,"2025-08-29":0,"2025-08-30":3,"2025-08-31":7,"2025-09-01":0,"2025-09-02":6,"2025-09-03":2,"2025-09-04":8,"2025-09-05":0,"2025-09-06":10,"2025-09-07":0,"2025-09-08":0,"2025-09-09":18,"2025-09-10":17,"2025-09-11":0,"2025-09-12":0,"2025-09-13":4,"2025-09-14":16,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":8,"2025-09-21":0,"2025-09-22":20,"2025-09-23":20,"2025-09-24":20,"2025-09-25":20,"2025-09-26":5,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:129":{name:"REFUGE DES CORTALETS (FFCAM)",structure:"BK_STRUCTURE:129",availability:{"2025-08-01":31,"2025-08-02":2,"2025-08-03":11,"2025-08-04":9,"2025-08-05":-1,"2025-08-06":0,"2025-08-07":1,"2025-08-08":9,"2025-08-09":5,"2025-08-10":10,"2025-08-11":3,"2025-08-12":0,"2025-08-13":5,"2025-08-14":0,"2025-08-15":2,"2025-08-16":4,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":8,"2025-08-27":32,"2025-08-28":18,"2025-08-29":9,"2025-08-30":0,"2025-08-31":69,"2025-09-01":41,"2025-09-02":39,"2025-09-03":38,"2025-09-04":50,"2025-09-05":26,"2025-09-06":-4,"2025-09-07":53,"2025-09-08":48,"2025-09-09":47,"2025-09-10":51,"2025-09-11":20,"2025-09-12":33,"2025-09-13":0,"2025-09-14":58,"2025-09-15":62,"2025-09-16":62,"2025-09-17":66,"2025-09-18":7,"2025-09-19":14,"2025-09-20":0,"2025-09-21":61,"2025-09-22":67,"2025-09-23":65,"2025-09-24":52,"2025-09-25":59,"2025-09-26":48,"2025-09-27":-1,"2025-09-28":67,"2025-09-29":70,"2025-09-30":80}},"BK_STRUCTURE:24":{name:"REFUGE DU COUVERCLE (FFCAM)",structure:"BK_STRUCTURE:24",availability:{"2025-08-01":20,"2025-08-02":15,"2025-08-03":15,"2025-08-04":13,"2025-08-05":21,"2025-08-06":18,"2025-08-07":18,"2025-08-08":18,"2025-08-09":0,"2025-08-10":12,"2025-08-11":13,"2025-08-12":19,"2025-08-13":12,"2025-08-14":12,"2025-08-15":10,"2025-08-16":6,"2025-08-17":15,"2025-08-18":19,"2025-08-19":22,"2025-08-20":19,"2025-08-21":24,"2025-08-22":20,"2025-08-23":13,"2025-08-24":18,"2025-08-25":24,"2025-08-26":24,"2025-08-27":24,"2025-08-28":24,"2025-08-29":24,"2025-08-30":18,"2025-08-31":20,"2025-09-01":24,"2025-09-02":24,"2025-09-03":24,"2025-09-04":24,"2025-09-05":21,"2025-09-06":4,"2025-09-07":20,"2025-09-08":24,"2025-09-09":24,"2025-09-10":21,"2025-09-11":17,"2025-09-12":17,"2025-09-13":20,"2025-09-14":20,"2025-09-15":24,"2025-09-16":24,"2025-09-17":24,"2025-09-18":24,"2025-09-19":24,"2025-09-20":16,"2025-09-21":20,"2025-09-22":24,"2025-09-23":24,"2025-09-24":24,"2025-09-25":24,"2025-09-26":21,"2025-09-27":17,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:35":{name:"REFUGE DE LA CROIX DU BONHOMME (FFCAM)",structure:"BK_STRUCTURE:35",availability:{"2025-08-01":2,"2025-08-02":2,"2025-08-03":0,"2025-08-04":0,"2025-08-05":16,"2025-08-06":9,"2025-08-07":-1,"2025-08-08":2,"2025-08-09":9,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":2,"2025-08-15":0,"2025-08-16":0,"2025-08-17":1,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":3,"2025-08-23":1,"2025-08-24":8,"2025-08-25":4,"2025-08-26":0,"2025-08-27":10,"2025-08-28":16,"2025-08-29":0,"2025-08-30":36,"2025-08-31":13,"2025-09-01":13,"2025-09-02":14,"2025-09-03":0,"2025-09-04":17,"2025-09-05":18,"2025-09-06":3,"2025-09-07":15,"2025-09-08":12,"2025-09-09":1,"2025-09-10":26,"2025-09-11":3,"2025-09-12":3,"2025-09-13":31,"2025-09-14":71,"2025-09-15":46,"2025-09-16":26,"2025-09-17":69,"2025-09-18":62,"2025-09-19":51,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:13":{name:"REFUGE DE LA DENT D'OCHE (FFCAM)",structure:"BK_STRUCTURE:13",availability:{"2025-08-01":32,"2025-08-02":23,"2025-08-03":21,"2025-08-04":2,"2025-08-05":0,"2025-08-06":4,"2025-08-07":18,"2025-08-08":28,"2025-08-09":3,"2025-08-10":30,"2025-08-11":4,"2025-08-12":3,"2025-08-13":0,"2025-08-14":28,"2025-08-15":0,"2025-08-16":0,"2025-08-17":41,"2025-08-18":23,"2025-08-19":23,"2025-08-20":40,"2025-08-21":13,"2025-08-22":39,"2025-08-23":3,"2025-08-24":41,"2025-08-25":36,"2025-08-26":45,"2025-08-27":45,"2025-08-28":45,"2025-08-29":29,"2025-08-30":0,"2025-08-31":39,"2025-09-01":43,"2025-09-02":45,"2025-09-03":45,"2025-09-04":45,"2025-09-05":37,"2025-09-06":6,"2025-09-07":45,"2025-09-08":45,"2025-09-09":45,"2025-09-10":45,"2025-09-11":45,"2025-09-12":45,"2025-09-13":6,"2025-09-14":45,"2025-09-15":45,"2025-09-16":45,"2025-09-17":45,"2025-09-18":45,"2025-09-19":45,"2025-09-20":4,"2025-09-21":45,"2025-09-22":45,"2025-09-23":45,"2025-09-24":45,"2025-09-25":45,"2025-09-26":45,"2025-09-27":41,"2025-09-28":45,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:52":{name:"REFUGE DE LA DENT PARRACHÉE",structure:"BK_STRUCTURE:52",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":2,"2025-08-10":0,"2025-08-11":2,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":5,"2025-08-18":20,"2025-08-19":1,"2025-08-20":1,"2025-08-21":12,"2025-08-22":8,"2025-08-23":0,"2025-08-24":23,"2025-08-25":25,"2025-08-26":0,"2025-08-27":25,"2025-08-28":29,"2025-08-29":37,"2025-08-30":8,"2025-08-31":33,"2025-09-01":31,"2025-09-02":16,"2025-09-03":17,"2025-09-04":6,"2025-09-05":24,"2025-09-06":2,"2025-09-07":34,"2025-09-08":3,"2025-09-09":22,"2025-09-10":27,"2025-09-11":34,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:59":{name:"REFUGE DES DRAYÈRES (FFCAM)",structure:"BK_STRUCTURE:59",availability:{"2025-08-01":10,"2025-08-02":8,"2025-08-03":1,"2025-08-04":23,"2025-08-05":0,"2025-08-06":7,"2025-08-07":5,"2025-08-08":2,"2025-08-09":5,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":3,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":1,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":1,"2025-08-30":19,"2025-08-31":29,"2025-09-01":13,"2025-09-02":12,"2025-09-03":2,"2025-09-04":1,"2025-09-05":25,"2025-09-06":0,"2025-09-07":32,"2025-09-08":22,"2025-09-09":13,"2025-09-10":0,"2025-09-11":24,"2025-09-12":8,"2025-09-13":1,"2025-09-14":17,"2025-09-15":27,"2025-09-16":34,"2025-09-17":33,"2025-09-18":35,"2025-09-19":35,"2025-09-20":25,"2025-09-21":33,"2025-09-22":35,"2025-09-23":35,"2025-09-24":35,"2025-09-25":35,"2025-09-26":35,"2025-09-27":35,"2025-09-28":35,"2025-09-29":35,"2025-09-30":35}},"BK_STRUCTURE:82":{name:"REFUGE DES ECRINS (FFCAM)",structure:"BK_STRUCTURE:82",availability:{"2025-08-01":23,"2025-08-02":5,"2025-08-03":31,"2025-08-04":7,"2025-08-05":0,"2025-08-06":1,"2025-08-07":2,"2025-08-08":52,"2025-08-09":1,"2025-08-10":32,"2025-08-11":24,"2025-08-12":42,"2025-08-13":8,"2025-08-14":42,"2025-08-15":33,"2025-08-16":17,"2025-08-17":41,"2025-08-18":51,"2025-08-19":42,"2025-08-20":43,"2025-08-21":55,"2025-08-22":48,"2025-08-23":29,"2025-08-24":61,"2025-08-25":56,"2025-08-26":31,"2025-08-27":31,"2025-08-28":49,"2025-08-29":58,"2025-08-30":25,"2025-08-31":55,"2025-09-01":65,"2025-09-02":65,"2025-09-03":65,"2025-09-04":65,"2025-09-05":62,"2025-09-06":50,"2025-09-07":62,"2025-09-08":65,"2025-09-09":63,"2025-09-10":65,"2025-09-11":65,"2025-09-12":65,"2025-09-13":65,"2025-09-14":63,"2025-09-15":65,"2025-09-16":65,"2025-09-17":65,"2025-09-18":60,"2025-09-19":57,"2025-09-20":60,"2025-09-21":65,"2025-09-22":65,"2025-09-23":65,"2025-09-24":65,"2025-09-25":65,"2025-09-26":65,"2025-09-27":61,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:26":{name:"REFUGE DE L'ENVERS DES AIGUILLES (FFCAM)",structure:"BK_STRUCTURE:26",availability:{"2025-08-01":21,"2025-08-02":18,"2025-08-03":5,"2025-08-04":1,"2025-08-05":12,"2025-08-06":13,"2025-08-07":10,"2025-08-08":15,"2025-08-09":2,"2025-08-10":9,"2025-08-11":1,"2025-08-12":0,"2025-08-13":2,"2025-08-14":11,"2025-08-15":3,"2025-08-16":3,"2025-08-17":21,"2025-08-18":19,"2025-08-19":19,"2025-08-20":19,"2025-08-21":13,"2025-08-22":12,"2025-08-23":9,"2025-08-24":19,"2025-08-25":19,"2025-08-26":23,"2025-08-27":25,"2025-08-28":25,"2025-08-29":25,"2025-08-30":22,"2025-08-31":25,"2025-09-01":35,"2025-09-02":35,"2025-09-03":29,"2025-09-04":29,"2025-09-05":25,"2025-09-06":25,"2025-09-07":35,"2025-09-08":35,"2025-09-09":35,"2025-09-10":33,"2025-09-11":33,"2025-09-12":10,"2025-09-13":10,"2025-09-14":10,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:111":{name:"REFUGE D'ESPINGO (FFCAM)",structure:"BK_STRUCTURE:111",availability:{"2025-08-01":19,"2025-08-02":1,"2025-08-03":6,"2025-08-04":0,"2025-08-05":2,"2025-08-06":2,"2025-08-07":0,"2025-08-08":2,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":2,"2025-08-13":7,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":22,"2025-08-20":32,"2025-08-21":37,"2025-08-22":36,"2025-08-23":25,"2025-08-24":23,"2025-08-25":54,"2025-08-26":24,"2025-08-27":47,"2025-08-28":42,"2025-08-29":39,"2025-08-30":1,"2025-08-31":46,"2025-09-01":42,"2025-09-02":58,"2025-09-03":60,"2025-09-04":56,"2025-09-05":57,"2025-09-06":56,"2025-09-07":55,"2025-09-08":47,"2025-09-09":58,"2025-09-10":49,"2025-09-11":57,"2025-09-12":43,"2025-09-13":13,"2025-09-14":60,"2025-09-15":0,"2025-09-16":56,"2025-09-17":55,"2025-09-18":53,"2025-09-19":60,"2025-09-20":19,"2025-09-21":60,"2025-09-22":0,"2025-09-23":54,"2025-09-24":59,"2025-09-25":12,"2025-09-26":20,"2025-09-27":40,"2025-09-28":60,"2025-09-29":56,"2025-09-30":60}},"BK_STRUCTURE:57":{name:"REFUGE DE L'ETENDARD (FFCAM)",structure:"BK_STRUCTURE:57",availability:{"2025-08-01":30,"2025-08-02":17,"2025-08-03":30,"2025-08-04":38,"2025-08-05":2,"2025-08-06":16,"2025-08-07":25,"2025-08-08":18,"2025-08-09":0,"2025-08-10":35,"2025-08-11":1,"2025-08-12":23,"2025-08-13":15,"2025-08-14":31,"2025-08-15":1,"2025-08-16":7,"2025-08-17":29,"2025-08-18":7,"2025-08-19":40,"2025-08-20":45,"2025-08-21":34,"2025-08-22":40,"2025-08-23":36,"2025-08-24":54,"2025-08-25":49,"2025-08-26":49,"2025-08-27":54,"2025-08-28":0,"2025-08-29":37,"2025-08-30":0,"2025-08-31":54,"2025-09-01":54,"2025-09-02":52,"2025-09-03":52,"2025-09-04":49,"2025-09-05":46,"2025-09-06":0,"2025-09-07":46,"2025-09-08":54,"2025-09-09":54,"2025-09-10":54,"2025-09-11":50,"2025-09-12":54,"2025-09-13":17,"2025-09-14":54,"2025-09-15":54,"2025-09-16":54,"2025-09-17":54,"2025-09-18":54,"2025-09-19":54,"2025-09-20":12,"2025-09-21":54,"2025-09-22":54,"2025-09-23":54,"2025-09-24":54,"2025-09-25":54,"2025-09-26":54,"2025-09-27":13,"2025-09-28":54,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:47":{name:"REFUGE DES EVETTES (FFCAM)",structure:"BK_STRUCTURE:47",availability:{"2025-08-01":10,"2025-08-02":0,"2025-08-03":4,"2025-08-04":9,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":8,"2025-08-09":0,"2025-08-10":0,"2025-08-11":1,"2025-08-12":5,"2025-08-13":1,"2025-08-14":15,"2025-08-15":1,"2025-08-16":1,"2025-08-17":12,"2025-08-18":16,"2025-08-19":0,"2025-08-20":4,"2025-08-21":20,"2025-08-22":19,"2025-08-23":0,"2025-08-24":20,"2025-08-25":10,"2025-08-26":36,"2025-08-27":34,"2025-08-28":27,"2025-08-29":44,"2025-08-30":0,"2025-08-31":46,"2025-09-01":44,"2025-09-02":35,"2025-09-03":38,"2025-09-04":48,"2025-09-05":47,"2025-09-06":-2,"2025-09-07":0,"2025-09-08":40,"2025-09-09":48,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:47ntr9jg1dif":{name:"CHALET ALPIN L'EYCHAUDA (FFCAM)",structure:"BK_STRUCTURE:47ntr9jg1dif",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":3,"2025-08-21":3,"2025-08-22":0,"2025-08-23":10,"2025-08-24":15,"2025-08-25":0,"2025-08-26":13,"2025-08-27":4,"2025-08-28":27,"2025-08-29":31,"2025-08-30":40,"2025-08-31":34,"2025-09-01":34,"2025-09-02":48,"2025-09-03":45,"2025-09-04":34,"2025-09-05":42,"2025-09-06":0,"2025-09-07":34,"2025-09-08":45,"2025-09-09":50,"2025-09-10":48,"2025-09-11":35,"2025-09-12":50,"2025-09-13":50,"2025-09-14":41,"2025-09-15":0,"2025-09-16":0,"2025-09-17":10,"2025-09-18":17,"2025-09-19":17,"2025-09-20":50,"2025-09-21":50,"2025-09-22":49,"2025-09-23":49,"2025-09-24":0,"2025-09-25":0,"2025-09-26":22,"2025-09-27":20,"2025-09-28":20,"2025-09-29":16,"2025-09-30":16}},"BK_STRUCTURE:51":{name:"REFUGE DU FOND D'AUSSOIS",structure:"BK_STRUCTURE:51",availability:{"2025-08-01":9,"2025-08-02":0,"2025-08-03":0,"2025-08-04":-1,"2025-08-05":-1,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":5,"2025-08-10":0,"2025-08-11":4,"2025-08-12":2,"2025-08-13":0,"2025-08-14":1,"2025-08-15":0,"2025-08-16":1,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":1,"2025-08-22":0,"2025-08-23":0,"2025-08-24":17,"2025-08-25":1,"2025-08-26":24,"2025-08-27":19,"2025-08-28":26,"2025-08-29":2,"2025-08-30":0,"2025-08-31":26,"2025-09-01":23,"2025-09-02":35,"2025-09-03":8,"2025-09-04":21,"2025-09-05":30,"2025-09-06":0,"2025-09-07":34,"2025-09-08":34,"2025-09-09":43,"2025-09-10":3,"2025-09-11":0,"2025-09-12":37,"2025-09-13":0,"2025-09-14":20,"2025-09-15":2,"2025-09-16":0,"2025-09-17":1,"2025-09-18":2,"2025-09-19":46,"2025-09-20":27,"2025-09-21":48,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:94":{name:"REFUGE DE GIALORGUES (FFCAM)",structure:"BK_STRUCTURE:94",availability:{"2025-08-01":12,"2025-08-02":0,"2025-08-03":0,"2025-08-04":6,"2025-08-05":12,"2025-08-06":12,"2025-08-07":10,"2025-08-08":6,"2025-08-09":9,"2025-08-10":10,"2025-08-11":5,"2025-08-12":5,"2025-08-13":0,"2025-08-14":8,"2025-08-15":8,"2025-08-16":0,"2025-08-17":0,"2025-08-18":10,"2025-08-19":8,"2025-08-20":12,"2025-08-21":8,"2025-08-22":12,"2025-08-23":12,"2025-08-24":12,"2025-08-25":12,"2025-08-26":12,"2025-08-27":12,"2025-08-28":12,"2025-08-29":12,"2025-08-30":0,"2025-08-31":12,"2025-09-01":12,"2025-09-02":12,"2025-09-03":12,"2025-09-04":7,"2025-09-05":12,"2025-09-06":12,"2025-09-07":12,"2025-09-08":12,"2025-09-09":12,"2025-09-10":12,"2025-09-11":12,"2025-09-12":12,"2025-09-13":12,"2025-09-14":12,"2025-09-15":12,"2025-09-16":12,"2025-09-17":12,"2025-09-18":12,"2025-09-19":12,"2025-09-20":12,"2025-09-21":12,"2025-09-22":12,"2025-09-23":11,"2025-09-24":12,"2025-09-25":12,"2025-09-26":12,"2025-09-27":0,"2025-09-28":12,"2025-09-29":12,"2025-09-30":12}},"BK_STRUCTURE:72":{name:"REFUGE DU GLACIER BLANC (FFCAM)",structure:"BK_STRUCTURE:72",availability:{"2025-08-01":57,"2025-08-02":46,"2025-08-03":75,"2025-08-04":5,"2025-08-05":47,"2025-08-06":28,"2025-08-07":30,"2025-08-08":57,"2025-08-09":45,"2025-08-10":68,"2025-08-11":52,"2025-08-12":49,"2025-08-13":67,"2025-08-14":69,"2025-08-15":42,"2025-08-16":59,"2025-08-17":80,"2025-08-18":72,"2025-08-19":80,"2025-08-20":94,"2025-08-21":84,"2025-08-22":74,"2025-08-23":87,"2025-08-24":100,"2025-08-25":91,"2025-08-26":96,"2025-08-27":95,"2025-08-28":98,"2025-08-29":61,"2025-08-30":82,"2025-08-31":100,"2025-09-01":97,"2025-09-02":100,"2025-09-03":99,"2025-09-04":88,"2025-09-05":86,"2025-09-06":92,"2025-09-07":97,"2025-09-08":96,"2025-09-09":92,"2025-09-10":100,"2025-09-11":96,"2025-09-12":100,"2025-09-13":100,"2025-09-14":98,"2025-09-15":100,"2025-09-16":82,"2025-09-17":100,"2025-09-18":100,"2025-09-19":98,"2025-09-20":100,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:123":{name:"CHALET DE GOURETTE (FFCAM)",structure:"BK_STRUCTURE:123",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:44":{name:"REFUGE DU GRAND BEC (FFCAM)",structure:"BK_STRUCTURE:44",availability:{"2025-08-01":23,"2025-08-02":6,"2025-08-03":12,"2025-08-04":6,"2025-08-05":1,"2025-08-06":2,"2025-08-07":4,"2025-08-08":10,"2025-08-09":0,"2025-08-10":1,"2025-08-11":7,"2025-08-12":1,"2025-08-13":1,"2025-08-14":3,"2025-08-15":0,"2025-08-16":1,"2025-08-17":15,"2025-08-18":0,"2025-08-19":11,"2025-08-20":3,"2025-08-21":24,"2025-08-22":23,"2025-08-23":3,"2025-08-24":24,"2025-08-25":32,"2025-08-26":17,"2025-08-27":21,"2025-08-28":21,"2025-08-29":21,"2025-08-30":26,"2025-08-31":32,"2025-09-01":32,"2025-09-02":32,"2025-09-03":26,"2025-09-04":29,"2025-09-05":31,"2025-09-06":4,"2025-09-07":34,"2025-09-08":31,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:28":{name:"REFUGE DES GRANDS MULETS (FFCAM)",structure:"BK_STRUCTURE:28",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:116":{name:"CHALET LA GRANGE DE HOLLE (FFCAM)",structure:"BK_STRUCTURE:116",availability:{"2025-08-01":3,"2025-08-02":7,"2025-08-03":20,"2025-08-04":2,"2025-08-05":4,"2025-08-06":3,"2025-08-07":21,"2025-08-08":0,"2025-08-09":19,"2025-08-10":14,"2025-08-11":1,"2025-08-12":1,"2025-08-13":10,"2025-08-14":22,"2025-08-15":5,"2025-08-16":25,"2025-08-17":35,"2025-08-18":16,"2025-08-19":0,"2025-08-20":0,"2025-08-21":19,"2025-08-22":8,"2025-08-23":11,"2025-08-24":40,"2025-08-25":28,"2025-08-26":36,"2025-08-27":42,"2025-08-28":35,"2025-08-29":12,"2025-08-30":33,"2025-08-31":38,"2025-09-01":51,"2025-09-02":46,"2025-09-03":47,"2025-09-04":45,"2025-09-05":41,"2025-09-06":22,"2025-09-07":38,"2025-09-08":36,"2025-09-09":45,"2025-09-10":13,"2025-09-11":18,"2025-09-12":28,"2025-09-13":13,"2025-09-14":56,"2025-09-15":41,"2025-09-16":45,"2025-09-17":30,"2025-09-18":48,"2025-09-19":33,"2025-09-20":57,"2025-09-21":57,"2025-09-22":41,"2025-09-23":49,"2025-09-24":58,"2025-09-25":49,"2025-09-26":59,"2025-09-27":35,"2025-09-28":59,"2025-09-29":56,"2025-09-30":59}},"BK_STRUCTURE:15":{name:"CHALET DU GRAYDON (FFCAM)",structure:"BK_STRUCTURE:15",availability:{"2025-08-01":18,"2025-08-02":18,"2025-08-03":13,"2025-08-04":17,"2025-08-05":18,"2025-08-06":18,"2025-08-07":15,"2025-08-08":18,"2025-08-09":18,"2025-08-10":18,"2025-08-11":18,"2025-08-12":18,"2025-08-13":18,"2025-08-14":18,"2025-08-15":18,"2025-08-16":18,"2025-08-17":18,"2025-08-18":0,"2025-08-19":18,"2025-08-20":18,"2025-08-21":18,"2025-08-22":18,"2025-08-23":18,"2025-08-24":18,"2025-08-25":18,"2025-08-26":18,"2025-08-27":18,"2025-08-28":18,"2025-08-29":18,"2025-08-30":18,"2025-08-31":18,"2025-09-01":18,"2025-09-02":18,"2025-09-03":18,"2025-09-04":18,"2025-09-05":18,"2025-09-06":0,"2025-09-07":18,"2025-09-08":18,"2025-09-09":18,"2025-09-10":18,"2025-09-11":18,"2025-09-12":18,"2025-09-13":18,"2025-09-14":18,"2025-09-15":18,"2025-09-16":18,"2025-09-17":18,"2025-09-18":18,"2025-09-19":18,"2025-09-20":18,"2025-09-21":18,"2025-09-22":18,"2025-09-23":18,"2025-09-24":18,"2025-09-25":18,"2025-09-26":18,"2025-09-27":18,"2025-09-28":18,"2025-09-29":18,"2025-09-30":18}},"BK_STRUCTURE:139":{name:"REFUGE DE LA GLÈRE (FFCAM)",structure:"BK_STRUCTURE:139",availability:{"2025-08-01":1,"2025-08-02":0,"2025-08-03":0,"2025-08-04":2,"2025-08-05":2,"2025-08-06":3,"2025-08-07":0,"2025-08-08":6,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":1,"2025-08-18":1,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":18,"2025-08-25":2,"2025-08-26":6,"2025-08-27":1,"2025-08-28":4,"2025-08-29":9,"2025-08-30":1,"2025-08-31":25,"2025-09-01":2,"2025-09-02":12,"2025-09-03":13,"2025-09-04":12,"2025-09-05":0,"2025-09-06":8,"2025-09-07":9,"2025-09-08":10,"2025-09-09":14,"2025-09-10":20,"2025-09-11":5,"2025-09-12":25,"2025-09-13":3,"2025-09-14":29,"2025-09-15":28,"2025-09-16":28,"2025-09-17":30,"2025-09-18":28,"2025-09-19":27,"2025-09-20":10,"2025-09-21":17,"2025-09-22":30,"2025-09-23":30,"2025-09-24":30,"2025-09-25":28,"2025-09-26":27,"2025-09-27":22,"2025-09-28":30,"2025-09-29":30,"2025-09-30":30}},"BK_STRUCTURE:76":{name:"REFUGE DE LA LAVEY (FFCAM)",structure:"BK_STRUCTURE:76",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:100":{name:"CHALET DE LA MALINE - VERDON (FFCAM)",structure:"BK_STRUCTURE:100",availability:{"2025-08-01":20,"2025-08-02":0,"2025-08-03":18,"2025-08-04":16,"2025-08-05":17,"2025-08-06":19,"2025-08-07":20,"2025-08-08":22,"2025-08-09":22,"2025-08-10":22,"2025-08-11":18,"2025-08-12":19,"2025-08-13":18,"2025-08-14":22,"2025-08-15":17,"2025-08-16":22,"2025-08-17":24,"2025-08-18":13,"2025-08-19":24,"2025-08-20":17,"2025-08-21":20,"2025-08-22":10,"2025-08-23":0,"2025-08-24":17,"2025-08-25":16,"2025-08-26":19,"2025-08-27":20,"2025-08-28":20,"2025-08-29":13,"2025-08-30":17,"2025-08-31":22,"2025-09-01":22,"2025-09-02":17,"2025-09-03":19,"2025-09-04":13,"2025-09-05":18,"2025-09-06":19,"2025-09-07":24,"2025-09-08":24,"2025-09-09":24,"2025-09-10":24,"2025-09-11":0,"2025-09-12":10,"2025-09-13":19,"2025-09-14":22,"2025-09-15":19,"2025-09-16":14,"2025-09-17":24,"2025-09-18":18,"2025-09-19":24,"2025-09-20":0,"2025-09-21":24,"2025-09-22":24,"2025-09-23":20,"2025-09-24":7,"2025-09-25":7,"2025-09-26":23,"2025-09-27":24,"2025-09-28":23,"2025-09-29":24,"2025-09-30":7}},"BK_STRUCTURE:56":{name:"REFUGE DE LA PRA (FFCAM)",structure:"BK_STRUCTURE:56",availability:{"2025-08-01":9,"2025-08-02":0,"2025-08-03":6,"2025-08-04":3,"2025-08-05":4,"2025-08-06":12,"2025-08-07":2,"2025-08-08":0,"2025-08-09":0,"2025-08-10":1,"2025-08-11":-3,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":40,"2025-08-18":20,"2025-08-19":16,"2025-08-20":32,"2025-08-21":19,"2025-08-22":25,"2025-08-23":0,"2025-08-24":43,"2025-08-25":35,"2025-08-26":40,"2025-08-27":62,"2025-08-28":56,"2025-08-29":48,"2025-08-30":0,"2025-08-31":64,"2025-09-01":26,"2025-09-02":20,"2025-09-03":22,"2025-09-04":19,"2025-09-05":48,"2025-09-06":0,"2025-09-07":62,"2025-09-08":0,"2025-09-09":0,"2025-09-10":64,"2025-09-11":44,"2025-09-12":56,"2025-09-13":0,"2025-09-14":70,"2025-09-15":68,"2025-09-16":68,"2025-09-17":47,"2025-09-18":37,"2025-09-19":51,"2025-09-20":0,"2025-09-21":70,"2025-09-22":70,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:5":{name:"CHALET DU LANGENBERG (FFCAM)",structure:"BK_STRUCTURE:5",availability:{"2025-08-01":26,"2025-08-02":26,"2025-08-03":26,"2025-08-04":24,"2025-08-05":26,"2025-08-06":26,"2025-08-07":26,"2025-08-08":26,"2025-08-09":26,"2025-08-10":26,"2025-08-11":26,"2025-08-12":26,"2025-08-13":26,"2025-08-14":26,"2025-08-15":24,"2025-08-16":23,"2025-08-17":25,"2025-08-18":26,"2025-08-19":26,"2025-08-20":26,"2025-08-21":26,"2025-08-22":26,"2025-08-23":26,"2025-08-24":26,"2025-08-25":26,"2025-08-26":26,"2025-08-27":26,"2025-08-28":26,"2025-08-29":26,"2025-08-30":0,"2025-08-31":26,"2025-09-01":26,"2025-09-02":26,"2025-09-03":26,"2025-09-04":26,"2025-09-05":26,"2025-09-06":26,"2025-09-07":26,"2025-09-08":26,"2025-09-09":26,"2025-09-10":26,"2025-09-11":26,"2025-09-12":26,"2025-09-13":26,"2025-09-14":26,"2025-09-15":26,"2025-09-16":26,"2025-09-17":26,"2025-09-18":26,"2025-09-19":26,"2025-09-20":26,"2025-09-21":26,"2025-09-22":26,"2025-09-23":26,"2025-09-24":26,"2025-09-25":26,"2025-09-26":26,"2025-09-27":26,"2025-09-28":26,"2025-09-29":26,"2025-09-30":26}},"BK_STRUCTURE:121":{name:"REFUGE DE LARRIBET (FFCAM)",structure:"BK_STRUCTURE:121",availability:{"2025-08-01":0,"2025-08-02":2,"2025-08-03":18,"2025-08-04":10,"2025-08-05":5,"2025-08-06":2,"2025-08-07":5,"2025-08-08":0,"2025-08-09":0,"2025-08-10":7,"2025-08-11":1,"2025-08-12":2,"2025-08-13":0,"2025-08-14":1,"2025-08-15":0,"2025-08-16":7,"2025-08-17":21,"2025-08-18":1,"2025-08-19":0,"2025-08-20":11,"2025-08-21":23,"2025-08-22":25,"2025-08-23":0,"2025-08-24":49,"2025-08-25":13,"2025-08-26":19,"2025-08-27":22,"2025-08-28":50,"2025-08-29":53,"2025-08-30":31,"2025-08-31":48,"2025-09-01":39,"2025-09-02":36,"2025-09-03":41,"2025-09-04":54,"2025-09-05":44,"2025-09-06":36,"2025-09-07":42,"2025-09-08":45,"2025-09-09":47,"2025-09-10":49,"2025-09-11":50,"2025-09-12":54,"2025-09-13":15,"2025-09-14":52,"2025-09-15":51,"2025-09-16":49,"2025-09-17":58,"2025-09-18":51,"2025-09-19":49,"2025-09-20":34,"2025-09-21":60,"2025-09-22":60,"2025-09-23":58,"2025-09-24":58,"2025-09-25":55,"2025-09-26":58,"2025-09-27":45,"2025-09-28":60,"2025-09-29":60,"2025-09-30":60}},"BK_STRUCTURE:47ntqvy8e2a1":{name:"CHALET ALPIN DU TOUR (FFCAM)",structure:"BK_STRUCTURE:47ntqvy8e2a1",availability:{"2025-08-01":1,"2025-08-02":0,"2025-08-03":0,"2025-08-04":9,"2025-08-05":5,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":10,"2025-08-12":1,"2025-08-13":7,"2025-08-14":7,"2025-08-15":1,"2025-08-16":0,"2025-08-17":0,"2025-08-18":17,"2025-08-19":12,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":2,"2025-08-24":0,"2025-08-25":1,"2025-08-26":1,"2025-08-27":2,"2025-08-28":0,"2025-08-29":0,"2025-08-30":2,"2025-08-31":2,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":1,"2025-09-05":1,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":13,"2025-09-15":0,"2025-09-16":20,"2025-09-17":20,"2025-09-18":0,"2025-09-19":10,"2025-09-20":0,"2025-09-21":20,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:65":{name:"REFUGE DES SOUFFLES (FFCAM)",structure:"BK_STRUCTURE:65",availability:{"2025-08-01":1,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":1,"2025-08-06":0,"2025-08-07":1,"2025-08-08":0,"2025-08-09":1,"2025-08-10":1,"2025-08-11":1,"2025-08-12":2,"2025-08-13":0,"2025-08-14":3,"2025-08-15":-1,"2025-08-16":1,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":8,"2025-08-21":2,"2025-08-22":0,"2025-08-23":5,"2025-08-24":10,"2025-08-25":1,"2025-08-26":3,"2025-08-27":2,"2025-08-28":14,"2025-08-29":20,"2025-08-30":0,"2025-08-31":20,"2025-09-01":16,"2025-09-02":19,"2025-09-03":21,"2025-09-04":7,"2025-09-05":6,"2025-09-06":4,"2025-09-07":12,"2025-09-08":13,"2025-09-09":12,"2025-09-10":26,"2025-09-11":21,"2025-09-12":18,"2025-09-13":5,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:25":{name:"REFUGE DE LESCHAUX (FFCAM)",structure:"BK_STRUCTURE:25",availability:{"2025-08-01":12,"2025-08-02":12,"2025-08-03":12,"2025-08-04":12,"2025-08-05":12,"2025-08-06":12,"2025-08-07":9,"2025-08-08":12,"2025-08-09":3,"2025-08-10":8,"2025-08-11":10,"2025-08-12":12,"2025-08-13":10,"2025-08-14":11,"2025-08-15":0,"2025-08-16":0,"2025-08-17":12,"2025-08-18":12,"2025-08-19":12,"2025-08-20":12,"2025-08-21":12,"2025-08-22":10,"2025-08-23":10,"2025-08-24":12,"2025-08-25":12,"2025-08-26":12,"2025-08-27":12,"2025-08-28":12,"2025-08-29":12,"2025-08-30":12,"2025-08-31":12,"2025-09-01":12,"2025-09-02":12,"2025-09-03":12,"2025-09-04":12,"2025-09-05":12,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:87":{name:"CHALET DE LA MADONE DE FENESTRE (FFCAM)",structure:"BK_STRUCTURE:87",availability:{"2025-08-01":21,"2025-08-02":7,"2025-08-03":12,"2025-08-04":0,"2025-08-05":3,"2025-08-06":4,"2025-08-07":16,"2025-08-08":12,"2025-08-09":-2,"2025-08-10":1,"2025-08-11":23,"2025-08-12":0,"2025-08-13":2,"2025-08-14":0,"2025-08-15":2,"2025-08-16":1,"2025-08-17":0,"2025-08-18":0,"2025-08-19":7,"2025-08-20":22,"2025-08-21":2,"2025-08-22":40,"2025-08-23":22,"2025-08-24":17,"2025-08-25":15,"2025-08-26":29,"2025-08-27":32,"2025-08-28":0,"2025-08-29":7,"2025-08-30":13,"2025-08-31":7,"2025-09-01":12,"2025-09-02":26,"2025-09-03":30,"2025-09-04":20,"2025-09-05":18,"2025-09-06":12,"2025-09-07":14,"2025-09-08":21,"2025-09-09":26,"2025-09-10":43,"2025-09-11":14,"2025-09-12":42,"2025-09-13":44,"2025-09-14":48,"2025-09-15":38,"2025-09-16":35,"2025-09-17":47,"2025-09-18":31,"2025-09-19":48,"2025-09-20":38,"2025-09-21":50,"2025-09-22":45,"2025-09-23":48,"2025-09-24":47,"2025-09-25":48,"2025-09-26":50,"2025-09-27":37,"2025-09-28":50,"2025-09-29":50,"2025-09-30":50}},"BK_STRUCTURE:98":{name:"CHALET DE MALJASSET (FFCAM)",structure:"BK_STRUCTURE:98",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":6,"2025-08-04":2,"2025-08-05":0,"2025-08-06":0,"2025-08-07":-1,"2025-08-08":2,"2025-08-09":1,"2025-08-10":2,"2025-08-11":9,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":2,"2025-08-18":2,"2025-08-19":1,"2025-08-20":1,"2025-08-21":0,"2025-08-22":3,"2025-08-23":2,"2025-08-24":12,"2025-08-25":14,"2025-08-26":11,"2025-08-27":15,"2025-08-28":11,"2025-08-29":7,"2025-08-30":4,"2025-08-31":15,"2025-09-01":15,"2025-09-02":11,"2025-09-03":13,"2025-09-04":6,"2025-09-05":4,"2025-09-06":13,"2025-09-07":9,"2025-09-08":11,"2025-09-09":9,"2025-09-10":11,"2025-09-11":17,"2025-09-12":19,"2025-09-13":16,"2025-09-14":4,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:110":{name:"REFUGE DU MAUPAS (FFCAM)",structure:"BK_STRUCTURE:110",availability:{"2025-08-01":1,"2025-08-02":1,"2025-08-03":3,"2025-08-04":0,"2025-08-05":0,"2025-08-06":1,"2025-08-07":2,"2025-08-08":0,"2025-08-09":0,"2025-08-10":2,"2025-08-11":13,"2025-08-12":1,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":5,"2025-08-18":10,"2025-08-19":11,"2025-08-20":10,"2025-08-21":11,"2025-08-22":15,"2025-08-23":13,"2025-08-24":10,"2025-08-25":8,"2025-08-26":3,"2025-08-27":5,"2025-08-28":9,"2025-08-29":15,"2025-08-30":10,"2025-08-31":9,"2025-09-01":15,"2025-09-02":15,"2025-09-03":13,"2025-09-04":15,"2025-09-05":15,"2025-09-06":12,"2025-09-07":12,"2025-09-08":15,"2025-09-09":15,"2025-09-10":15,"2025-09-11":13,"2025-09-12":15,"2025-09-13":7,"2025-09-14":15,"2025-09-15":15,"2025-09-16":15,"2025-09-17":15,"2025-09-18":1,"2025-09-19":15,"2025-09-20":15,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:88":{name:"REFUGE DES MERVEILLES (FFCAM)",structure:"BK_STRUCTURE:88",availability:{"2025-08-01":21,"2025-08-02":9,"2025-08-03":16,"2025-08-04":8,"2025-08-05":0,"2025-08-06":3,"2025-08-07":2,"2025-08-08":6,"2025-08-09":6,"2025-08-10":2,"2025-08-11":3,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":1,"2025-08-16":2,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":7,"2025-08-23":2,"2025-08-24":1,"2025-08-25":4,"2025-08-26":0,"2025-08-27":1,"2025-08-28":0,"2025-08-29":23,"2025-08-30":0,"2025-08-31":47,"2025-09-01":32,"2025-09-02":8,"2025-09-03":16,"2025-09-04":8,"2025-09-05":38,"2025-09-06":5,"2025-09-07":40,"2025-09-08":34,"2025-09-09":17,"2025-09-10":1,"2025-09-11":12,"2025-09-12":4,"2025-09-13":0,"2025-09-14":52,"2025-09-15":46,"2025-09-16":54,"2025-09-17":58,"2025-09-18":57,"2025-09-19":36,"2025-09-20":0,"2025-09-21":62,"2025-09-22":41,"2025-09-23":47,"2025-09-24":65,"2025-09-25":46,"2025-09-26":25,"2025-09-27":0,"2025-09-28":64,"2025-09-29":69,"2025-09-30":68}},"BK_STRUCTURE:38":{name:"REFUGE DU MONT POURRI (FFCAM)",structure:"BK_STRUCTURE:38",availability:{"2025-08-01":6,"2025-08-02":6,"2025-08-03":22,"2025-08-04":0,"2025-08-05":0,"2025-08-06":1,"2025-08-07":0,"2025-08-08":1,"2025-08-09":0,"2025-08-10":8,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":2,"2025-08-15":1,"2025-08-16":7,"2025-08-17":27,"2025-08-18":24,"2025-08-19":5,"2025-08-20":22,"2025-08-21":4,"2025-08-22":34,"2025-08-23":8,"2025-08-24":39,"2025-08-25":32,"2025-08-26":36,"2025-08-27":37,"2025-08-28":0,"2025-08-29":30,"2025-08-30":35,"2025-08-31":39,"2025-09-01":36,"2025-09-02":36,"2025-09-03":39,"2025-09-04":34,"2025-09-05":34,"2025-09-06":39,"2025-09-07":39,"2025-09-08":39,"2025-09-09":39,"2025-09-10":39,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:60":{name:"REFUGE DU MONT THABOR (FFCAM)",structure:"BK_STRUCTURE:60",availability:{"2025-08-01":1,"2025-08-02":2,"2025-08-03":1,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":8,"2025-08-10":1,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":-1,"2025-08-17":-1,"2025-08-18":0,"2025-08-19":1,"2025-08-20":1,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":3,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":2,"2025-08-30":-1,"2025-08-31":1,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":21,"2025-09-08":29,"2025-09-09":0,"2025-09-10":19,"2025-09-11":23,"2025-09-12":1,"2025-09-13":0,"2025-09-14":30,"2025-09-15":39,"2025-09-16":43,"2025-09-17":42,"2025-09-18":44,"2025-09-19":40,"2025-09-20":16,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:90":{name:"REFUGE DE NICE (FFCAM)",structure:"BK_STRUCTURE:90",availability:{"2025-08-01":0,"2025-08-02":8,"2025-08-03":4,"2025-08-04":4,"2025-08-05":0,"2025-08-06":0,"2025-08-07":3,"2025-08-08":4,"2025-08-09":2,"2025-08-10":5,"2025-08-11":0,"2025-08-12":1,"2025-08-13":0,"2025-08-14":0,"2025-08-15":3,"2025-08-16":1,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":1,"2025-08-24":10,"2025-08-25":16,"2025-08-26":0,"2025-08-27":0,"2025-08-28":2,"2025-08-29":8,"2025-08-30":0,"2025-08-31":27,"2025-09-01":10,"2025-09-02":11,"2025-09-03":17,"2025-09-04":29,"2025-09-05":18,"2025-09-06":0,"2025-09-07":0,"2025-09-08":28,"2025-09-09":5,"2025-09-10":24,"2025-09-11":14,"2025-09-12":34,"2025-09-13":8,"2025-09-14":45,"2025-09-15":41,"2025-09-16":50,"2025-09-17":38,"2025-09-18":45,"2025-09-19":39,"2025-09-20":37,"2025-09-21":36,"2025-09-22":42,"2025-09-23":41,"2025-09-24":49,"2025-09-25":47,"2025-09-26":36,"2025-09-27":48,"2025-09-28":49,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:70":{name:"REFUGE DE L'OLAN (FFCAM)",structure:"BK_STRUCTURE:70",availability:{"2025-08-01":15,"2025-08-02":1,"2025-08-03":14,"2025-08-04":10,"2025-08-05":7,"2025-08-06":4,"2025-08-07":3,"2025-08-08":23,"2025-08-09":0,"2025-08-10":17,"2025-08-11":11,"2025-08-12":12,"2025-08-13":28,"2025-08-14":31,"2025-08-15":20,"2025-08-16":25,"2025-08-17":7,"2025-08-18":20,"2025-08-19":23,"2025-08-20":21,"2025-08-21":27,"2025-08-22":30,"2025-08-23":32,"2025-08-24":34,"2025-08-25":31,"2025-08-26":32,"2025-08-27":32,"2025-08-28":40,"2025-08-29":26,"2025-08-30":23,"2025-08-31":36,"2025-09-01":36,"2025-09-02":36,"2025-09-03":36,"2025-09-04":37,"2025-09-05":36,"2025-09-06":35,"2025-09-07":37,"2025-09-08":37,"2025-09-09":40,"2025-09-10":34,"2025-09-11":37,"2025-09-12":36,"2025-09-13":40,"2025-09-14":40,"2025-09-15":40,"2025-09-16":40,"2025-09-17":31,"2025-09-18":36,"2025-09-19":40,"2025-09-20":40,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:117":{name:"REFUGE DES OULETTES DE GAUBE (FFCAM)",structure:"BK_STRUCTURE:117",availability:{"2025-08-01":0,"2025-08-02":1,"2025-08-03":2,"2025-08-04":0,"2025-08-05":7,"2025-08-06":0,"2025-08-07":3,"2025-08-08":0,"2025-08-09":3,"2025-08-10":4,"2025-08-11":6,"2025-08-12":-5,"2025-08-13":1,"2025-08-14":1,"2025-08-15":1,"2025-08-16":0,"2025-08-17":2,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":7,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:17":{name:"REFUGE DU PARMELAN (FFCAM)",structure:"BK_STRUCTURE:17",availability:{"2025-08-01":10,"2025-08-02":5,"2025-08-03":19,"2025-08-04":9,"2025-08-05":0,"2025-08-06":0,"2025-08-07":2,"2025-08-08":25,"2025-08-09":4,"2025-08-10":3,"2025-08-11":0,"2025-08-12":1,"2025-08-13":1,"2025-08-14":27,"2025-08-15":19,"2025-08-16":1,"2025-08-17":28,"2025-08-18":4,"2025-08-19":0,"2025-08-20":31,"2025-08-21":30,"2025-08-22":34,"2025-08-23":25,"2025-08-24":21,"2025-08-25":43,"2025-08-26":45,"2025-08-27":42,"2025-08-28":36,"2025-08-29":17,"2025-08-30":4,"2025-08-31":44,"2025-09-01":43,"2025-09-02":42,"2025-09-03":45,"2025-09-04":45,"2025-09-05":43,"2025-09-06":-3,"2025-09-07":45,"2025-09-08":45,"2025-09-09":45,"2025-09-10":45,"2025-09-11":45,"2025-09-12":15,"2025-09-13":0,"2025-09-14":42,"2025-09-15":45,"2025-09-16":43,"2025-09-17":45,"2025-09-18":45,"2025-09-19":44,"2025-09-20":21,"2025-09-21":45,"2025-09-22":45,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":44,"2025-09-27":7,"2025-09-28":45,"2025-09-29":45,"2025-09-30":45}},"BK_STRUCTURE:84":{name:"REFUGE DU PAVÉ (FFCAM)",structure:"BK_STRUCTURE:84",availability:{"2025-08-01":2,"2025-08-02":5,"2025-08-03":1,"2025-08-04":3,"2025-08-05":5,"2025-08-06":0,"2025-08-07":0,"2025-08-08":2,"2025-08-09":0,"2025-08-10":2,"2025-08-11":8,"2025-08-12":1,"2025-08-13":1,"2025-08-14":22,"2025-08-15":0,"2025-08-16":0,"2025-08-17":14,"2025-08-18":4,"2025-08-19":7,"2025-08-20":13,"2025-08-21":18,"2025-08-22":20,"2025-08-23":11,"2025-08-24":29,"2025-08-25":27,"2025-08-26":24,"2025-08-27":22,"2025-08-28":30,"2025-08-29":28,"2025-08-30":15,"2025-08-31":27,"2025-09-01":30,"2025-09-02":29,"2025-09-03":24,"2025-09-04":3,"2025-09-05":0,"2025-09-06":25,"2025-09-07":30,"2025-09-08":30,"2025-09-09":10,"2025-09-10":30,"2025-09-11":30,"2025-09-12":25,"2025-09-13":30,"2025-09-14":30,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:50":{name:"REFUGE DE PÉCLET-POLSET",structure:"BK_STRUCTURE:50",availability:{"2025-08-01":6,"2025-08-02":1,"2025-08-03":2,"2025-08-04":4,"2025-08-05":2,"2025-08-06":4,"2025-08-07":1,"2025-08-08":1,"2025-08-09":6,"2025-08-10":4,"2025-08-11":6,"2025-08-12":1,"2025-08-13":1,"2025-08-14":0,"2025-08-15":0,"2025-08-16":-2,"2025-08-17":3,"2025-08-18":10,"2025-08-19":4,"2025-08-20":3,"2025-08-21":0,"2025-08-22":55,"2025-08-23":26,"2025-08-24":39,"2025-08-25":33,"2025-08-26":4,"2025-08-27":27,"2025-08-28":34,"2025-08-29":29,"2025-08-30":10,"2025-08-31":74,"2025-09-01":66,"2025-09-02":51,"2025-09-03":69,"2025-09-04":30,"2025-09-05":37,"2025-09-06":47,"2025-09-07":68,"2025-09-08":64,"2025-09-09":70,"2025-09-10":58,"2025-09-11":0,"2025-09-12":72,"2025-09-13":56,"2025-09-14":67,"2025-09-15":75,"2025-09-16":84,"2025-09-17":82,"2025-09-18":75,"2025-09-19":72,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:79":{name:"REFUGE DU PELVOUX (FFCAM)",structure:"BK_STRUCTURE:79",availability:{"2025-08-01":38,"2025-08-02":24,"2025-08-03":41,"2025-08-04":9,"2025-08-05":16,"2025-08-06":25,"2025-08-07":18,"2025-08-08":33,"2025-08-09":39,"2025-08-10":26,"2025-08-11":38,"2025-08-12":39,"2025-08-13":40,"2025-08-14":39,"2025-08-15":34,"2025-08-16":38,"2025-08-17":48,"2025-08-18":34,"2025-08-19":46,"2025-08-20":43,"2025-08-21":45,"2025-08-22":45,"2025-08-23":46,"2025-08-24":54,"2025-08-25":52,"2025-08-26":52,"2025-08-27":54,"2025-08-28":51,"2025-08-29":49,"2025-08-30":54,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:69":{name:"REFUGE DU PIGEONNIER (FFCAM)",structure:"BK_STRUCTURE:69",availability:{"2025-08-01":2,"2025-08-02":1,"2025-08-03":13,"2025-08-04":-1,"2025-08-05":3,"2025-08-06":4,"2025-08-07":-1,"2025-08-08":2,"2025-08-09":0,"2025-08-10":2,"2025-08-11":0,"2025-08-12":15,"2025-08-13":0,"2025-08-14":15,"2025-08-15":0,"2025-08-16":0,"2025-08-17":27,"2025-08-18":8,"2025-08-19":0,"2025-08-20":2,"2025-08-21":13,"2025-08-22":38,"2025-08-23":2,"2025-08-24":35,"2025-08-25":44,"2025-08-26":45,"2025-08-27":0,"2025-08-28":42,"2025-08-29":49,"2025-08-30":28,"2025-08-31":50,"2025-09-01":52,"2025-09-02":38,"2025-09-03":44,"2025-09-04":50,"2025-09-05":50,"2025-09-06":45,"2025-09-07":51,"2025-09-08":44,"2025-09-09":48,"2025-09-10":50,"2025-09-11":52,"2025-09-12":39,"2025-09-13":46,"2025-09-14":52,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":23,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":50,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:4":{name:"CHALET DU PLAIN DU CANON (FFCAM)",structure:"BK_STRUCTURE:4",availability:{"2025-08-01":6,"2025-08-02":6,"2025-08-03":10,"2025-08-04":10,"2025-08-05":10,"2025-08-06":10,"2025-08-07":10,"2025-08-08":10,"2025-08-09":0,"2025-08-10":10,"2025-08-11":10,"2025-08-12":10,"2025-08-13":10,"2025-08-14":0,"2025-08-15":10,"2025-08-16":10,"2025-08-17":3,"2025-08-18":3,"2025-08-19":3,"2025-08-20":3,"2025-08-21":3,"2025-08-22":3,"2025-08-23":10,"2025-08-24":10,"2025-08-25":10,"2025-08-26":10,"2025-08-27":10,"2025-08-28":6,"2025-08-29":10,"2025-08-30":10,"2025-08-31":10,"2025-09-01":10,"2025-09-02":10,"2025-09-03":10,"2025-09-04":10,"2025-09-05":10,"2025-09-06":10,"2025-09-07":10,"2025-09-08":10,"2025-09-09":10,"2025-09-10":10,"2025-09-11":10,"2025-09-12":10,"2025-09-13":10,"2025-09-14":10,"2025-09-15":10,"2025-09-16":10,"2025-09-17":10,"2025-09-18":10,"2025-09-19":10,"2025-09-20":10,"2025-09-21":10,"2025-09-22":10,"2025-09-23":10,"2025-09-24":10,"2025-09-25":10,"2025-09-26":10,"2025-09-27":10,"2025-09-28":10,"2025-09-29":10,"2025-09-30":10}},"BK_STRUCTURE:40":{name:"REFUGE DU PLAN DES GOUILLES (FFCAM)",structure:"BK_STRUCTURE:40",availability:{"2025-08-01":25,"2025-08-02":24,"2025-08-03":24,"2025-08-04":2,"2025-08-05":0,"2025-08-06":0,"2025-08-07":3,"2025-08-08":0,"2025-08-09":0,"2025-08-10":20,"2025-08-11":18,"2025-08-12":21,"2025-08-13":18,"2025-08-14":16,"2025-08-15":20,"2025-08-16":16,"2025-08-17":22,"2025-08-18":23,"2025-08-19":19,"2025-08-20":0,"2025-08-21":19,"2025-08-22":23,"2025-08-23":25,"2025-08-24":25,"2025-08-25":25,"2025-08-26":25,"2025-08-27":24,"2025-08-28":22,"2025-08-29":23,"2025-08-30":25,"2025-08-31":25,"2025-09-01":25,"2025-09-02":25,"2025-09-03":25,"2025-09-04":25,"2025-09-05":21,"2025-09-06":17,"2025-09-07":25,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:20":{name:"REFUGE DE PLATÉ (FFCAM)",structure:"BK_STRUCTURE:20",availability:{"2025-08-01":15,"2025-08-02":1,"2025-08-03":14,"2025-08-04":0,"2025-08-05":0,"2025-08-06":6,"2025-08-07":1,"2025-08-08":4,"2025-08-09":6,"2025-08-10":4,"2025-08-11":0,"2025-08-12":1,"2025-08-13":0,"2025-08-14":5,"2025-08-15":0,"2025-08-16":0,"2025-08-17":6,"2025-08-18":1,"2025-08-19":2,"2025-08-20":21,"2025-08-21":18,"2025-08-22":16,"2025-08-23":0,"2025-08-24":22,"2025-08-25":18,"2025-08-26":2,"2025-08-27":23,"2025-08-28":6,"2025-08-29":20,"2025-08-30":17,"2025-08-31":31,"2025-09-01":34,"2025-09-02":22,"2025-09-03":31,"2025-09-04":30,"2025-09-05":26,"2025-09-06":1,"2025-09-07":20,"2025-09-08":21,"2025-09-09":22,"2025-09-10":3,"2025-09-11":14,"2025-09-12":13,"2025-09-13":1,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:18":{name:"REFUGE DE LA POINTE PERCÉE - GRAMUSSET (FFCAM)",structure:"BK_STRUCTURE:18",availability:{"2025-08-01":9,"2025-08-02":6,"2025-08-03":0,"2025-08-04":1,"2025-08-05":0,"2025-08-06":2,"2025-08-07":25,"2025-08-08":0,"2025-08-09":-2,"2025-08-10":0,"2025-08-11":2,"2025-08-12":0,"2025-08-13":0,"2025-08-14":2,"2025-08-15":0,"2025-08-16":0,"2025-08-17":20,"2025-08-18":19,"2025-08-19":0,"2025-08-20":2,"2025-08-21":0,"2025-08-22":37,"2025-08-23":1,"2025-08-24":31,"2025-08-25":43,"2025-08-26":37,"2025-08-27":40,"2025-08-28":29,"2025-08-29":40,"2025-08-30":1,"2025-08-31":45,"2025-09-01":45,"2025-09-02":49,"2025-09-03":49,"2025-09-04":49,"2025-09-05":42,"2025-09-06":1,"2025-09-07":40,"2025-09-08":47,"2025-09-09":47,"2025-09-10":49,"2025-09-11":49,"2025-09-12":28,"2025-09-13":0,"2025-09-14":49,"2025-09-15":49,"2025-09-16":47,"2025-09-17":47,"2025-09-18":47,"2025-09-19":29,"2025-09-20":0,"2025-09-21":38,"2025-09-22":29,"2025-09-23":49,"2025-09-24":49,"2025-09-25":49,"2025-09-26":45,"2025-09-27":0,"2025-09-28":47,"2025-09-29":43,"2025-09-30":49}},"BK_STRUCTURE:106":{name:"REFUGE DE POMBIE (FFCAM)",structure:"BK_STRUCTURE:106",availability:{"2025-08-01":1,"2025-08-02":2,"2025-08-03":0,"2025-08-04":3,"2025-08-05":1,"2025-08-06":1,"2025-08-07":7,"2025-08-08":4,"2025-08-09":3,"2025-08-10":0,"2025-08-11":0,"2025-08-12":2,"2025-08-13":3,"2025-08-14":0,"2025-08-15":1,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":1,"2025-08-21":0,"2025-08-22":0,"2025-08-23":1,"2025-08-24":21,"2025-08-25":1,"2025-08-26":2,"2025-08-27":0,"2025-08-28":0,"2025-08-29":4,"2025-08-30":0,"2025-08-31":28,"2025-09-01":38,"2025-09-02":12,"2025-09-03":9,"2025-09-04":28,"2025-09-05":31,"2025-09-06":0,"2025-09-07":45,"2025-09-08":43,"2025-09-09":24,"2025-09-10":8,"2025-09-11":15,"2025-09-12":1,"2025-09-13":5,"2025-09-14":23,"2025-09-15":35,"2025-09-16":30,"2025-09-17":0,"2025-09-18":36,"2025-09-19":24,"2025-09-20":0,"2025-09-21":19,"2025-09-22":42,"2025-09-23":45,"2025-09-24":33,"2025-09-25":45,"2025-09-26":39,"2025-09-27":11,"2025-09-28":45,"2025-09-29":43,"2025-09-30":45}},"BK_STRUCTURE:109":{name:"REFUGE DU PORTILLON (FFCAM)",structure:"BK_STRUCTURE:109",availability:{"2025-08-01":39,"2025-08-02":2,"2025-08-03":34,"2025-08-04":0,"2025-08-05":7,"2025-08-06":8,"2025-08-07":32,"2025-08-08":26,"2025-08-09":1,"2025-08-10":26,"2025-08-11":9,"2025-08-12":2,"2025-08-13":22,"2025-08-14":17,"2025-08-15":0,"2025-08-16":2,"2025-08-17":53,"2025-08-18":43,"2025-08-19":51,"2025-08-20":57,"2025-08-21":53,"2025-08-22":58,"2025-08-23":59,"2025-08-24":78,"2025-08-25":62,"2025-08-26":76,"2025-08-27":72,"2025-08-28":72,"2025-08-29":63,"2025-08-30":32,"2025-08-31":70,"2025-09-01":49,"2025-09-02":64,"2025-09-03":80,"2025-09-04":80,"2025-09-05":80,"2025-09-06":68,"2025-09-07":77,"2025-09-08":76,"2025-09-09":69,"2025-09-10":67,"2025-09-11":78,"2025-09-12":42,"2025-09-13":62,"2025-09-14":74,"2025-09-15":73,"2025-09-16":73,"2025-09-17":76,"2025-09-18":80,"2025-09-19":77,"2025-09-20":75,"2025-09-21":76,"2025-09-22":80,"2025-09-23":78,"2025-09-24":78,"2025-09-25":80,"2025-09-26":74,"2025-09-27":69,"2025-09-28":80,"2025-09-29":80,"2025-09-30":76}},"BK_STRUCTURE:61":{name:"REFUGE DU PRÉ LA CHAUMETTE (FFCAM)",structure:"BK_STRUCTURE:61",availability:{"2025-08-01":12,"2025-08-02":2,"2025-08-03":0,"2025-08-04":3,"2025-08-05":3,"2025-08-06":2,"2025-08-07":12,"2025-08-08":8,"2025-08-09":6,"2025-08-10":3,"2025-08-11":2,"2025-08-12":4,"2025-08-13":6,"2025-08-14":9,"2025-08-15":1,"2025-08-16":3,"2025-08-17":4,"2025-08-18":9,"2025-08-19":4,"2025-08-20":0,"2025-08-21":0,"2025-08-22":7,"2025-08-23":6,"2025-08-24":9,"2025-08-25":16,"2025-08-26":1,"2025-08-27":0,"2025-08-28":6,"2025-08-29":11,"2025-08-30":9,"2025-08-31":24,"2025-09-01":0,"2025-09-02":21,"2025-09-03":15,"2025-09-04":11,"2025-09-05":12,"2025-09-06":15,"2025-09-07":16,"2025-09-08":22,"2025-09-09":13,"2025-09-10":18,"2025-09-11":2,"2025-09-12":27,"2025-09-13":27,"2025-09-14":28,"2025-09-15":18,"2025-09-16":29,"2025-09-17":30,"2025-09-18":8,"2025-09-19":30,"2025-09-20":23,"2025-09-21":30,"2025-09-22":30,"2025-09-23":30,"2025-09-24":30,"2025-09-25":30,"2025-09-26":30,"2025-09-27":30,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:37":{name:"REFUGE DE PRESSET (FFCAM)",structure:"BK_STRUCTURE:37",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":1,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":1,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":1,"2025-08-30":0,"2025-08-31":4,"2025-09-01":4,"2025-09-02":1,"2025-09-03":0,"2025-09-04":10,"2025-09-05":0,"2025-09-06":0,"2025-09-07":9,"2025-09-08":10,"2025-09-09":0,"2025-09-10":14,"2025-09-11":9,"2025-09-12":9,"2025-09-13":0,"2025-09-14":4,"2025-09-15":9,"2025-09-16":19,"2025-09-17":10,"2025-09-18":18,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:75":{name:"REFUGE DU PROMONTOIRE (FFCAM)",structure:"BK_STRUCTURE:75",availability:{"2025-08-01":7,"2025-08-02":9,"2025-08-03":14,"2025-08-04":8,"2025-08-05":8,"2025-08-06":9,"2025-08-07":18,"2025-08-08":18,"2025-08-09":9,"2025-08-10":18,"2025-08-11":20,"2025-08-12":20,"2025-08-13":20,"2025-08-14":20,"2025-08-15":9,"2025-08-16":18,"2025-08-17":16,"2025-08-18":20,"2025-08-19":16,"2025-08-20":20,"2025-08-21":20,"2025-08-22":20,"2025-08-23":20,"2025-08-24":20,"2025-08-25":20,"2025-08-26":20,"2025-08-27":20,"2025-08-28":20,"2025-08-29":20,"2025-08-30":20,"2025-08-31":20,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:93":{name:"REFUGE DE RABUONS (FFCAM)",structure:"BK_STRUCTURE:93",availability:{"2025-08-01":3,"2025-08-02":5,"2025-08-03":14,"2025-08-04":2,"2025-08-05":6,"2025-08-06":0,"2025-08-07":9,"2025-08-08":23,"2025-08-09":2,"2025-08-10":23,"2025-08-11":1,"2025-08-12":10,"2025-08-13":16,"2025-08-14":19,"2025-08-15":0,"2025-08-16":0,"2025-08-17":16,"2025-08-18":3,"2025-08-19":20,"2025-08-20":12,"2025-08-21":16,"2025-08-22":30,"2025-08-23":0,"2025-08-24":23,"2025-08-25":26,"2025-08-26":22,"2025-08-27":32,"2025-08-28":33,"2025-08-29":32,"2025-08-30":16,"2025-08-31":36,"2025-09-01":21,"2025-09-02":26,"2025-09-03":33,"2025-09-04":30,"2025-09-05":20,"2025-09-06":17,"2025-09-07":36,"2025-09-08":29,"2025-09-09":36,"2025-09-10":36,"2025-09-11":36,"2025-09-12":15,"2025-09-13":36,"2025-09-14":36,"2025-09-15":34,"2025-09-16":36,"2025-09-17":36,"2025-09-18":29,"2025-09-19":34,"2025-09-20":31,"2025-09-21":30,"2025-09-22":36,"2025-09-23":36,"2025-09-24":36,"2025-09-25":26,"2025-09-26":26,"2025-09-27":36,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:103":{name:"CHALET DE SAINT-GUILHEM-LE-DÉSERT (FFCAM)",structure:"BK_STRUCTURE:103",availability:{"2025-08-01":8,"2025-08-02":8,"2025-08-03":8,"2025-08-04":8,"2025-08-05":8,"2025-08-06":6,"2025-08-07":8,"2025-08-08":8,"2025-08-09":8,"2025-08-10":8,"2025-08-11":8,"2025-08-12":8,"2025-08-13":8,"2025-08-14":8,"2025-08-15":6,"2025-08-16":6,"2025-08-17":8,"2025-08-18":8,"2025-08-19":8,"2025-08-20":8,"2025-08-21":8,"2025-08-22":8,"2025-08-23":8,"2025-08-24":8,"2025-08-25":8,"2025-08-26":8,"2025-08-27":8,"2025-08-28":8,"2025-08-29":8,"2025-08-30":8,"2025-08-31":8,"2025-09-01":8,"2025-09-02":8,"2025-09-03":8,"2025-09-04":8,"2025-09-05":8,"2025-09-06":8,"2025-09-07":8,"2025-09-08":8,"2025-09-09":8,"2025-09-10":8,"2025-09-11":8,"2025-09-12":8,"2025-09-13":8,"2025-09-14":8,"2025-09-15":8,"2025-09-16":8,"2025-09-17":8,"2025-09-18":4,"2025-09-19":8,"2025-09-20":8,"2025-09-21":8,"2025-09-22":8,"2025-09-23":8,"2025-09-24":8,"2025-09-25":8,"2025-09-26":8,"2025-09-27":8,"2025-09-28":8,"2025-09-29":8,"2025-09-30":8}},"BK_STRUCTURE:101":{name:"CHALET DU SANCY (FFCAM)",structure:"BK_STRUCTURE:101",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":0,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":0,"2025-09-01":0,"2025-09-02":0,"2025-09-03":0,"2025-09-04":0,"2025-09-05":0,"2025-09-06":0,"2025-09-07":0,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:78":{name:"REFUGE DU SÉLÉ (FFCAM)",structure:"BK_STRUCTURE:78",availability:{"2025-08-01":46,"2025-08-02":44,"2025-08-03":25,"2025-08-04":34,"2025-08-05":22,"2025-08-06":15,"2025-08-07":43,"2025-08-08":43,"2025-08-09":42,"2025-08-10":45,"2025-08-11":41,"2025-08-12":39,"2025-08-13":45,"2025-08-14":45,"2025-08-15":33,"2025-08-16":41,"2025-08-17":44,"2025-08-18":46,"2025-08-19":48,"2025-08-20":46,"2025-08-21":44,"2025-08-22":35,"2025-08-23":50,"2025-08-24":42,"2025-08-25":50,"2025-08-26":50,"2025-08-27":38,"2025-08-28":38,"2025-08-29":45,"2025-08-30":50,"2025-08-31":50,"2025-09-01":50,"2025-09-02":50,"2025-09-03":50,"2025-09-04":50,"2025-09-05":50,"2025-09-06":49,"2025-09-07":49,"2025-09-08":0,"2025-09-09":0,"2025-09-10":0,"2025-09-11":0,"2025-09-12":0,"2025-09-13":0,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:9":{name:"CHALET DES TUFFES (FFCAM)",structure:"BK_STRUCTURE:9",availability:{"2025-08-01":15,"2025-08-02":18,"2025-08-03":20,"2025-08-04":20,"2025-08-05":16,"2025-08-06":16,"2025-08-07":20,"2025-08-08":20,"2025-08-09":16,"2025-08-10":16,"2025-08-11":13,"2025-08-12":13,"2025-08-13":13,"2025-08-14":18,"2025-08-15":13,"2025-08-16":11,"2025-08-17":20,"2025-08-18":20,"2025-08-19":14,"2025-08-20":20,"2025-08-21":20,"2025-08-22":20,"2025-08-23":20,"2025-08-24":20,"2025-08-25":20,"2025-08-26":20,"2025-08-27":20,"2025-08-28":18,"2025-08-29":0,"2025-08-30":0,"2025-08-31":20,"2025-09-01":20,"2025-09-02":20,"2025-09-03":20,"2025-09-04":20,"2025-09-05":17,"2025-09-06":20,"2025-09-07":20,"2025-09-08":20,"2025-09-09":20,"2025-09-10":20,"2025-09-11":20,"2025-09-12":20,"2025-09-13":20,"2025-09-14":18,"2025-09-15":20,"2025-09-16":20,"2025-09-17":20,"2025-09-18":20,"2025-09-19":20,"2025-09-20":20,"2025-09-21":20,"2025-09-22":20,"2025-09-23":20,"2025-09-24":20,"2025-09-25":20,"2025-09-26":20,"2025-09-27":20,"2025-09-28":20,"2025-09-29":20,"2025-09-30":20}},"BK_STRUCTURE:62":{name:"REFUGE DE VALLONPIERRE (FFCAM)",structure:"BK_STRUCTURE:62",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":-2,"2025-08-05":-2,"2025-08-06":0,"2025-08-07":0,"2025-08-08":-2,"2025-08-09":-1,"2025-08-10":-1,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":0,"2025-08-18":0,"2025-08-19":0,"2025-08-20":1,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":0,"2025-08-26":0,"2025-08-27":1,"2025-08-28":0,"2025-08-29":5,"2025-08-30":0,"2025-08-31":31,"2025-09-01":31,"2025-09-02":35,"2025-09-03":25,"2025-09-04":17,"2025-09-05":30,"2025-09-06":7,"2025-09-07":26,"2025-09-08":26,"2025-09-09":33,"2025-09-10":26,"2025-09-11":24,"2025-09-12":27,"2025-09-13":17,"2025-09-14":36,"2025-09-15":23,"2025-09-16":16,"2025-09-17":0,"2025-09-18":23,"2025-09-19":25,"2025-09-20":24,"2025-09-21":37,"2025-09-22":35,"2025-09-23":35,"2025-09-24":37,"2025-09-25":39,"2025-09-26":39,"2025-09-27":26,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:89":{name:"REFUGE DE LA VALMASQUE (FFCAM)",structure:"BK_STRUCTURE:89",availability:{"2025-08-01":5,"2025-08-02":5,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":1,"2025-08-07":10,"2025-08-08":2,"2025-08-09":3,"2025-08-10":1,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":2,"2025-08-18":0,"2025-08-19":0,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":0,"2025-08-25":10,"2025-08-26":0,"2025-08-27":13,"2025-08-28":0,"2025-08-29":0,"2025-08-30":0,"2025-08-31":20,"2025-09-01":17,"2025-09-02":19,"2025-09-03":23,"2025-09-04":35,"2025-09-05":36,"2025-09-06":22,"2025-09-07":20,"2025-09-08":17,"2025-09-09":40,"2025-09-10":3,"2025-09-11":25,"2025-09-12":42,"2025-09-13":5,"2025-09-14":20,"2025-09-15":35,"2025-09-16":30,"2025-09-17":30,"2025-09-18":39,"2025-09-19":39,"2025-09-20":30,"2025-09-21":18,"2025-09-22":40,"2025-09-23":43,"2025-09-24":39,"2025-09-25":43,"2025-09-26":33,"2025-09-27":19,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}},"BK_STRUCTURE:104":{name:"CHALET DE VAUCHIGNON (FFCAM)",structure:"BK_STRUCTURE:104",availability:{"2025-08-01":24,"2025-08-02":24,"2025-08-03":24,"2025-08-04":24,"2025-08-05":24,"2025-08-06":24,"2025-08-07":24,"2025-08-08":24,"2025-08-09":14,"2025-08-10":24,"2025-08-11":24,"2025-08-12":24,"2025-08-13":24,"2025-08-14":24,"2025-08-15":14,"2025-08-16":9,"2025-08-17":24,"2025-08-18":24,"2025-08-19":24,"2025-08-20":24,"2025-08-21":24,"2025-08-22":24,"2025-08-23":24,"2025-08-24":24,"2025-08-25":24,"2025-08-26":24,"2025-08-27":24,"2025-08-28":24,"2025-08-29":24,"2025-08-30":24,"2025-08-31":24,"2025-09-01":24,"2025-09-02":24,"2025-09-03":24,"2025-09-04":24,"2025-09-05":24,"2025-09-06":24,"2025-09-07":24,"2025-09-08":24,"2025-09-09":24,"2025-09-10":24,"2025-09-11":0,"2025-09-12":24,"2025-09-13":4,"2025-09-14":24,"2025-09-15":24,"2025-09-16":24,"2025-09-17":24,"2025-09-18":24,"2025-09-19":24,"2025-09-20":24,"2025-09-21":24,"2025-09-22":24,"2025-09-23":24,"2025-09-24":24,"2025-09-25":24,"2025-09-26":24,"2025-09-27":24,"2025-09-28":24,"2025-09-29":24,"2025-09-30":24}},"BK_STRUCTURE:108":{name:"REFUGE DE VÉNASQUE (FFCAM)",structure:"BK_STRUCTURE:108",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":0,"2025-08-04":0,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":0,"2025-08-09":0,"2025-08-10":0,"2025-08-11":3,"2025-08-12":0,"2025-08-13":0,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":1,"2025-08-18":0,"2025-08-19":2,"2025-08-20":0,"2025-08-21":0,"2025-08-22":0,"2025-08-23":0,"2025-08-24":21,"2025-08-25":17,"2025-08-26":19,"2025-08-27":5,"2025-08-28":23,"2025-08-29":17,"2025-08-30":1,"2025-08-31":24,"2025-09-01":24,"2025-09-02":24,"2025-09-03":26,"2025-09-04":22,"2025-09-05":22,"2025-09-06":8,"2025-09-07":23,"2025-09-08":16,"2025-09-09":26,"2025-09-10":26,"2025-09-11":19,"2025-09-12":12,"2025-09-13":15,"2025-09-14":26,"2025-09-15":26,"2025-09-16":26,"2025-09-17":26,"2025-09-18":18,"2025-09-19":24,"2025-09-20":0,"2025-09-21":26,"2025-09-22":26,"2025-09-23":26,"2025-09-24":26,"2025-09-25":26,"2025-09-26":26,"2025-09-27":0,"2025-09-28":21,"2025-09-29":26,"2025-09-30":26}},"BK_STRUCTURE:95":{name:"REFUGE DES LACS DE VENS (FFCAM)",structure:"BK_STRUCTURE:95",availability:{"2025-08-01":33,"2025-08-02":31,"2025-08-03":36,"2025-08-04":34,"2025-08-05":34,"2025-08-06":10,"2025-08-07":29,"2025-08-08":36,"2025-08-09":34,"2025-08-10":12,"2025-08-11":1,"2025-08-12":5,"2025-08-13":1,"2025-08-14":0,"2025-08-15":0,"2025-08-16":0,"2025-08-17":6,"2025-08-18":2,"2025-08-19":1,"2025-08-20":16,"2025-08-21":19,"2025-08-22":34,"2025-08-23":0,"2025-08-24":30,"2025-08-25":15,"2025-08-26":32,"2025-08-27":34,"2025-08-28":32,"2025-08-29":17,"2025-08-30":0,"2025-08-31":25,"2025-09-01":25,"2025-09-02":25,"2025-09-03":23,"2025-09-04":30,"2025-09-05":26,"2025-09-06":20,"2025-09-07":36,"2025-09-08":36,"2025-09-09":27,"2025-09-10":19,"2025-09-11":25,"2025-09-12":36,"2025-09-13":3,"2025-09-14":34,"2025-09-15":36,"2025-09-16":0,"2025-09-17":29,"2025-09-18":36,"2025-09-19":36,"2025-09-20":28,"2025-09-21":36,"2025-09-22":36,"2025-09-23":36,"2025-09-24":36,"2025-09-25":36,"2025-09-26":36,"2025-09-27":32,"2025-09-28":36,"2025-09-29":36,"2025-09-30":36}},"BK_STRUCTURE:96":{name:"REFUGE DU VISO (FFCAM)",structure:"BK_STRUCTURE:96",availability:{"2025-08-01":0,"2025-08-02":0,"2025-08-03":5,"2025-08-04":-1,"2025-08-05":0,"2025-08-06":0,"2025-08-07":0,"2025-08-08":-4,"2025-08-09":0,"2025-08-10":1,"2025-08-11":0,"2025-08-12":0,"2025-08-13":0,"2025-08-14":2,"2025-08-15":0,"2025-08-16":-3,"2025-08-17":23,"2025-08-18":0,"2025-08-19":14,"2025-08-20":41,"2025-08-21":6,"2025-08-22":51,"2025-08-23":6,"2025-08-24":37,"2025-08-25":41,"2025-08-26":32,"2025-08-27":33,"2025-08-28":46,"2025-08-29":47,"2025-08-30":3,"2025-08-31":49,"2025-09-01":15,"2025-09-02":36,"2025-09-03":56,"2025-09-04":61,"2025-09-05":50,"2025-09-06":35,"2025-09-07":53,"2025-09-08":47,"2025-09-09":42,"2025-09-10":65,"2025-09-11":22,"2025-09-12":54,"2025-09-13":35,"2025-09-14":0,"2025-09-15":0,"2025-09-16":0,"2025-09-17":0,"2025-09-18":0,"2025-09-19":0,"2025-09-20":0,"2025-09-21":0,"2025-09-22":0,"2025-09-23":0,"2025-09-24":0,"2025-09-25":0,"2025-09-26":0,"2025-09-27":0,"2025-09-28":0,"2025-09-29":0,"2025-09-30":0}}},Rs={"BK_STRUCTURE:85":{name:"REFUGE DE L'AIGLE (FFCAM)",lat:45.011304,lng:6.324587,altitude_m:3440,places:30,gardien:"FLORENT BARBIER,BEATRICE LEITNER",description:"Perché à 3450 m au-dessus de la vallée de la Romanche, le refuge de l'Aigle est accroché au rocher de l'Aigle, dans un des sites les plus extraordinaires de l'Oisans, tout près du versant nord de la Meije.",urls:["http://refugedelaigle.ffcam.fr","http://refugedelaigle.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:85",name:"Refuge de l'Aigle (FFCAM)",shortName:"Aigle",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:4,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est en mode non gardé. Couettes et couvertures disponibles. Pas d'eau et pas de gaz.",completeInfo:"Le refuge est complet. Appeler le gardien pour plus d'informations",fullWebInfo:"Le refuge est complet. Appeler le gardien pour plus d'informations",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedelaigle<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>76<sp></sp>79<sp></sp>94<sp></sp>74",maxDate:"2026-08-07",oid:"BK_STRUCTURE:85",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"},{oid:"BK_PRODUCTCATEGORY:RESTAURATION",title:"Restauration"}]}},"BK_STRUCTURE:58":{name:"REFUGE DES AIGUILLES D'ARVES (FFCAM)",lat:45.118201,lng:6.375205,altitude_m:2260,places:39,gardien:"ROMAIN PETIT,FLORIAN MAIRY,CANELLE REINHARD",description:"Surplombé par les Aiguilles d'Arves, l'Aiguille de l'Epaisseur et l'Aiguille d'Argentière, le refuge est situé au milieu des prairies d'altitude à 2260m",urls:["http://refugedesaiguillesdarves.ffcam.fr","http://refugedesaiguillesdarves.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:58",name:"Refuge des Aiguilles d'Arves  (FFCAM)",shortName:"Aiguilles d'Arves",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:39,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge est actuellement accessible mais non gardé. Vous avez à disposition : lits en dortoir avec couverture, gaz, vaisselle et bois. Le refuge est hors d'eau, le WC est à l'extérieur du refuge en contrebas. Il n'est pas nécessaire de traverser.\r
Pour le règlement, vous trouverez un tronc dans la salle commune.\r
Merci d'avance.\r
Bon séjour !\r
Les gardiens Romain, Canelle et Florian`,completeInfo:"Le refuge est complet pour cette date mais n'hésitez pas à vous inscrire sur la liste d'attente.",fullWebInfo:"S'il n'y a plus de places pour la réservation en ligne, vous pouvez joindre les gardiens par téléphone au 06 70 87 46 52",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesaiguillesdarves<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>70<sp></sp>87<sp></sp>46<sp></sp>5<p2></p2>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:58",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:22":{name:"REFUGE ALBERT 1ER (FFCAM)",lat:45.996758,lng:6.986655,altitude_m:2707,places:140,gardien:"PAUL LABORDE",description:"Au coeur du massif du Mont Blanc, situé au-dessus de glacier du Tour, le refuge Albert 1er est un refuge d'alpinistes, mais pas que! Accessible sans matériel glaciaire il peut être le but d'une randonnée familiale depuis la station du village du Tour.",urls:["http://refugealbert1er.ffcam.fr","http://refugealbert1er.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:22",name:"Refuge Albert 1er  (FFCAM)",shortName:"Albert 1er",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:30,showAvailable:"1",waitingList:"1",unguardedInfo:`Bonjour,\r
Le refuge est actuellement non gardé. Vous pouvez consulter les dates de\r
gardiennage du refuge sur le site internet.\r
Le refuge d'hiver (cabane en bois) est désormais ouvert et accessible à tous.\r
Veuillez respecter les lieux, remportez vos déchets dans la vallée, et\r
participer à hauteur de 10 € par personne et par nuitée (quelque soit le statut\r
de chacun), à verser dans le tronc commun prévu à cet effet. Cette\r
participation permet au club gestionnaire d'entretenir le bâtiment pour\r
mettre à votre disposition chaque hiver un refuge confortable et chaleureux.\r
N'oubliez pas de mentionner votre passage sur le livre d'or pour des raisons de\r
sécurité.\r
IMPORTANT : Avant de partir nous vous invitons à bien fermer les portes et\r
fenêtres pour éviter que la neige, la pluie, et les quelques rongeurs et autres\r
animaux sauvages avoisinant s'y introduisent.\r
Merci et bonnes courses.\r
Paul, le Gardien`,completeInfo:`Bonjour, nous sommes complet à cette date. \r
Inscrivez vous en liste d'attente en cliquant sur "Attente" sur la case qui est orange ou rouge de la date souhaitée.\r
Si des places se libèrent vous recevez un email vous le spécifiant, et il vous faut revenir les réserver en ligne le plus vite possible sur le site de réservation www.ffcam.fr. Toute le monde est prévenu en même temps lorsque des places se libèrent donc soyez réactifs en revenant sur le site de réservation le plus vite possible. Si c'est pour le lendemain appelez nous directement au refuge : +33(0)450540620.\r
Merci et à bientôt\r
Paul, le Gardien`,fullWebInfo:`Bonjour, nous sommes complet à cette date. \r
Inscrivez vous en liste d'attente en cliquant sur "Attente" sur la case qui est orange ou rouge de la date souhaitée.\r
Si des places se libèrent vous recevez un email vous le spécifiant, et il vous faut revenir les réserver en ligne le plus vite possible sur le site de réservation www.ffcam.fr. Toute le monde est prévenu en même temps lorsque des places se libèrent donc soyez réactifs en revenant sur le site de réservation le plus vite possible. Si c'est pour le lendemain appelez nous directement au refuge : +33(0)450540620.\r
Merci et à bientôt\r
Paul, le Gardien`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugealbert1er<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>4<sp></sp>50<sp></sp>54<sp></sp><p6></p6><sp></sp><p2></p2>0",maxDate:"2026-08-07",oid:"BK_STRUCTURE:22",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:74":{name:"REFUGE DE L'ALPE DE VILLAR D'ARÈNE (FFCAM)",lat:44.996183,lng:6.384563,altitude_m:2071,places:94,gardien:"MELANIE MARTINOT",description:`Situé en plein alpage, à proximité du village de la Grave, le refuge de l'Alpe vous accueille, petits et grands, pour une randonnée à la journée, vivre l'expérience refuge, ou encore faire étape sur le GR54. 
C'est un hébergement incontournable pour l'alpinisme et ski de randonnée dans le massif des Ecrins.`,urls:["http://refugealpedevillardarene.ffcam.fr","http://refugealpedevillardarene.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:74",name:"Refuge de l'Alpe de Villar d'Arène (FFCAM)",shortName:"Alpe de Villar d Arène",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:20,showAvailable:"1",waitingList:"2",unguardedInfo:`Seul le refuge d'hiver est accessible, pas de chauffage ni d'eau. N'oubliez pas de le\r
laisser propre et de redescendre les poubelles. Merci`,completeInfo:`N'hésitez pas à nous joindre par téléphone au refuge, nous avons peut être une\r
solution à votre demande .`,fullWebInfo:`N'hésitez pas à nous joindre par téléphone au refuge, nous avons peut être une\r
solution à votre demande .`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeava<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp><p1></p1>9<sp></sp><p1></p1>9<sp></sp>97",maxDate:"2026-08-07",oid:"BK_STRUCTURE:74",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:54":{name:"REFUGE D'AMBIN (FFCAM)",lat:45.163474,lng:6.865038,altitude_m:2270,places:30,gardien:"FLORENCE NICOD",description:"Sur les hauteurs de la vallée de la Maurienne, au fond du vallon sauvage d'Ambin, sur son verrou rocheux, le refuge d'aspect solide commande un haut bassin aux multiples ressources (randonnée familiale aux lacs, traversée sur l'Italie, escalade aux Dents d'Ambin...).",urls:["http://refugedambin.ffcam.fr","http://refugedambin.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:54",name:"Refuge d'Ambin  (FFCAM)",shortName:"Ambin",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:30,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge n'est plus gardé mais reste accessible. A disposition vous trouverez 2 dortoirs, une salle à manger avec un coin cuisine équipé du gaz, un poêle. Pas d'eau.",completeInfo:"Vous pouvez vous inscrire sur la liste d'attente.",fullWebInfo:"Vous pouvez contacter le gardien par mail ou par téléphone",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedambin<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>79<sp></sp><p2></p2>0<sp></sp>35<sp></sp>00",maxDate:"2026-08-07",oid:"BK_STRUCTURE:54",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:124":{name:"REFUGE D'ARRÉMOULIT (FFCAM)",lat:42.846065,lng:-.329145,altitude_m:2265,places:28,gardien:null,description:"Le refuge est situé au pied de la face ouest du Palas, au bord du beau lac de montagne d'Arrémoulit, au coeur du Parc national des Pyrénées",urls:["http://refugedarremoulit.ffcam.fr","http://refugedarremoulit.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:124",name:"Refuge d'Arrémoulit  (FFCAM)",shortName:"Arrémoulit",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:8,showAvailable:"2",waitingList:"2",unguardedInfo:"Le refuge n'est pas gardé sur cette période.",completeInfo:"Les places disponibles en ligne sont épuisées, merci de nous contacter directement par téléphone",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedarremoulit<a></a><ff></ff><d></d><fr></fr>",phone:"<p5></p5><sp></sp>59<sp></sp><p5></p5><sp></sp>3<p1></p1><sp></sp>79%%<p9></p9><sp></sp>88<sp></sp>77<sp></sp>3<p2></p2><sp></sp>85",maxDate:"2026-08-07",oid:"BK_STRUCTURE:124",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:53":{name:"REFUGE D'AVEROLE (FFCAM)",lat:45.297155,lng:7.084291,altitude_m:2210,places:85,gardien:"VIRGINIE STONA,NORI BENSAID",description:"Entre le Parc National de la Vanoise et l'Italie, le refuge est implanté dans un vallon sauvage et préservé de la Haute Maurienne. Il est un but de balade facile d'accès en famille, et est également prisé des randonneurs sur le Tour de la Bessanèse.",urls:["http://refugedaverole.ffcam.fr","http://refugedaverole.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:53",name:"Refuge d'Averole  (FFCAM)",shortName:"Averole",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"300",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:50,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge n'est pas gardé sur cette période.",completeInfo:"Le refuge est complet ce jour, vous pouvez vous inscrire sur la liste d'attente. Vous serez informé par mail si des places se libèrent. Merci",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedaverole<a></a><ff></ff><d></d><fr></fr>",phone:"<p7></p7><sp></sp>8<p1></p1><sp></sp><p9></p9><sp></sp>9<p1></p1><sp></sp>4<p1></p1><sp></sp>ne<sp></sp>pas<sp></sp>laisser<sp></sp>de<sp></sp>message<sp></sp>ni<sp></sp>SMS,<sp></sp>ceci<sp></sp>n'est<sp></sp>pas<sp></sp>un<sp></sp>portable",maxDate:"2026-06-03",oid:"BK_STRUCTURE:53",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:68":{name:"REFUGE DES BANS (FFCAM)",lat:44.834424,lng:6.361139,altitude_m:2106,places:22,gardien:"GEOFFREY HENSENS",description:"Ce petit refuge du massif des Ecrins est implanté dans un site haute montagne. Il est entouré de hauts sommets alpins de plus de 3000m comme le Jocelme, le pic des Aupillous et les Bans.",urls:["http://refugedesbans.ffcam.fr","http://refugedesbans.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:68",name:"Refuge des Bans  (FFCAM)",shortName:"Bans",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"0",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:22,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge est non gardé. Vous pouvez vous rendre au refuge d'hiver, en autonomie. \r
Sur place, accès au dortoir avec couvertures, à la salle à manger. \r
Pas de moyen de chauffage, ni d'accès à l'eau à l'intérieur du bâtiment.`,completeInfo:"Merci de contacter les gardiens au 09 70 02 85 99 pour connaître les éventuelles places disponibles.",fullWebInfo:"Merci de contacter les gardiens au 09 70 02 85 99  pour connaître les éventuelles places disponibles.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesbans<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>70<sp></sp>0<p2></p2><sp></sp>85<sp></sp>99",maxDate:"2026-08-07",oid:"BK_STRUCTURE:68",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:107":{name:"REFUGE DE BAYSSELLANCE (FFCAM)",lat:42.779401,lng:-.124165,altitude_m:2651,places:58,gardien:"PIERRE LAFONT",description:"Situé sur le massif du Vignemale, avec une vue imprenable sur le cirque de Gavarnie, le refuge de Bayssellance est le plus haut gardé des Pyrénées.",urls:["http://refugebayssellance.ffcam.fr","http://refugebayssellance.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:107",name:"Refuge de Bayssellance  (FFCAM)",shortName:"Bayssellance",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:8,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge n'est pas gardé sur cette période.",completeInfo:`Le refuge est complet à cette date-là : vous pouvez vous inscrire sur la liste d'attente ou bien décaler votre venue.\r
Vous pouvez également bivouaquer autour du refuge, n'oubliez pas de réserver vos repas auprès du gardien (09 74 77 66 52).`,fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugebayssellance<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>74<sp></sp>77<sp></sp>66<sp></sp>5<p2></p2><sp></sp>(période<sp></sp>gardée)%%<p6></p6><sp></sp>88<sp></sp><p2></p2>9<sp></sp>89<sp></sp>60<sp></sp>(hors<sp></sp>gardiennage)",maxDate:"2026-08-07",oid:"BK_STRUCTURE:107",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:125":{name:"REFUGE DES BÉSINES (FFCAM)",lat:42.603908,lng:1.868557,altitude_m:2101,places:56,gardien:"PIERRE DROUILHET,MATHILDE DELAS",description:"Au pied du pic d'Auriol, vous êtes au coeur d'un site à la fois minéral et boisé, à la frontière entre l'Ariège et les Pyrénées-Orientales. Le refuge des Bésines jouit d'une position particulièrement favorable pour la découverte des hautes terres catalanes, en randonnée pédestre ou à ski.",urls:["http://refugedesbesines.ffcam.fr","http://refugedesbesines.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:125",name:"Refuge des Bésines  (FFCAM)",shortName:"Bésines",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:12,showAvailable:"1",waitingList:"1",unguardedInfo:"",completeInfo:"La réservation en ligne est complète, veuillez appeler directement le refuge au 09 88 77 35 28",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesbesines<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp>77<sp></sp>35<sp></sp><p2></p2>8",maxDate:"2026-08-07",oid:"BK_STRUCTURE:125",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:46":{name:"CHALET DE BONNEVAL SUR ARC (FFCAM)",lat:45.374562,lng:7.053587,altitude_m:1830,places:15,gardien:null,description:`Dans le site sauvegardé du village de Bonneval, classé "Plus beaux villages de France", au fond de la haute vallée de l'Arc une construction traditionnelle de 1985 offre à nos visiteurs un chalet confortable et plaisant.`,urls:["http://chaletbonnevalsurarc.ffcam.fr","http://chaletbonnevalsurarc.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:46",name:"Chalet de Bonneval sur Arc  (FFCAM)",shortName:"Bonneval sur Arc",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"O",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:7,maxPax:15,showAvailable:"1",waitingList:"1",unguardedInfo:"",completeInfo:"Le Refuge est complet. Vous pouvez vous inscrire sur la liste d'attente. Si une place se libère, vous serez alors prévenus par mail et vous pourrez effectuer vos réservations.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"refuges<a></a>clubalpinlyon<d></d><fr></fr>",phone:"",maxDate:"2026-08-07",oid:"BK_STRUCTURE:46",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:112":{name:"REFUGE DE LA BRÈCHE DE ROLAND - LES SARRADETS (FFCAM)",lat:42.695937,lng:-.033303,altitude_m:2587,places:38,gardien:"VIVIEN HORCHOLLE",description:"Culminant à 2565 m d'altitude, le refuge de la Brèche de Roland - Les Sarradets fait face à la légendaire brèche que Roland de Ronceveaux aurait ouverte grâce à sa célèbre épée Durandal.",urls:["http://refugebrechederoland.ffcam.fr","http://refugebrechederoland.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:112",name:"Refuge de la Brèche de Roland - Les Sarradets (FFCAM)",shortName:"Brèche de Roland - Les Sarradets",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:8,showAvailable:"1",waitingList:"1",unguardedInfo:"Une partie non gardée est à votre disposition. Pensez à payer votre nuitée (8 euros) au refuge ou sur le site internet du refuge.",completeInfo:"Le refuge est très souvent complet pendant la saison. Vous pouvez alors dormir en tente à côté du refuge, et réserver les repas, petits-déjeuners et/ou pique-niques UNIQUEMENT par téléphone au +33 (0)683381324.",fullWebInfo:`Plus de place au refuge disponible sur Internet (date en orange). Appelez nous, il nous reste peut-être des places...\r
Le refuge est très souvent complet pendant la saison. Vous pouvez alors dormir en tente à côté du refuge, et réserver les repas, petits-déjeuners et/ou pique-niques UNIQUEMENT par téléphone au +33 (0)683381324`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugebrechederoland<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>83<sp></sp>38<sp></sp><p1></p1>3<sp></sp><p2></p2>4",maxDate:"2026-08-07",oid:"BK_STRUCTURE:112",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:113":{name:"REFUGE DE CAMPANA DE CLOUTOU (FFCAM)",lat:42.881632,lng:.205323,altitude_m:2225,places:36,gardien:"BERNADETTE PENHARD,PHILIPPE BRAUD",description:"Le refuge de Campana est une destination un peu secrète au bord d'un lac où l'effort demandé pour y parvenir sera récompensé par une agréable soirée et nuit dans ce nouveau refuge vêtu de bois et pierre locale.",urls:["http://refugecampanadecloutou.ffcam.fr","http://refugecampanadecloutou.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:113",name:"Refuge de Campana de Cloutou  (FFCAM)",shortName:"Campana de Cloutou",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||NEOUVIELLE||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:12,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est actuellement non gardé.",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugecampanadecloutou<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp><p2></p2>8<sp></sp>53<sp></sp><p2></p2>3",maxDate:"2026-08-07",oid:"BK_STRUCTURE:113",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:48":{name:"REFUGE DU CARRO (FFCAM)",lat:45.419862,lng:7.123043,altitude_m:2764,places:61,gardien:"NICOLAS LEMOINE,CHLOE LAISNE",description:"Aux confins de la vallée de la Maurienne, bordé par deux lacs de montagne, le refuge est surplombé par la longue arête frontière des Levannas. Dans ce décor de haute montagne, les glaciers ne sont jamais loin !",urls:["http://refugeducarro.ffcam.fr","http://refugeducarro.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:48",name:"Refuge du Carro  (FFCAM)",shortName:"Carro",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:40,showAvailable:"1",waitingList:"1",unguardedInfo:"À cette date, le refuge n'est pas gardé mais le local hivernal reste ouvert. Une participation forfaitaire de 8€ par personne vous est demandée pour l'utilisation du gaz, du bois de chauffage et des autres équipements à votre disposition. Le tronc se trouve dans le réfectoire. Merci de laisser les lieux propres à votre départ !",completeInfo:"Désolé ! Nous sommes complets à cette date. Vous pouvez cependant vous inscrire sur liste d'attente pour être prévenu par e-mail en cas de désistement.",fullWebInfo:"La réservation en ligne est complète. Vous pouvez cependant nous appeler au 04 79 05 95 79 et réserver directement par téléphone.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeducarro<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>3<p1></p1><sp></sp>87<sp></sp>76<sp></sp>57<sp></sp>(ce<sp></sp>n'est<sp></sp>pas<sp></sp>un<sp></sp>numéro<sp></sp>de<sp></sp>mobile,<sp></sp>merci<sp></sp>de<sp></sp>ne<sp></sp>pas<sp></sp>envoyer<sp></sp>de<sp></sp>SMS%%de<sp></sp>messages<sp></sp>voca",maxDate:"2026-08-07",oid:"BK_STRUCTURE:48",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:63":{name:"REFUGE DE CHABOURNÉOU (FFCAM)",lat:44.809982,lng:6.314972,altitude_m:1998,places:40,gardien:"MATTHIEU LYAUTEY",description:"Le refuge de Chabournéou est un refuge rustique, à l'ancienne, disons-le : authentique. Il est situé sous le Sirac, dans la vallée du Valgaudemar.",urls:["http://refugechabourneou.ffcam.fr","http://refugechabourneou.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:63",name:"Refuge de Chabourneou  (FFCAM)",shortName:"Chabournéou",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"0",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:4,maxPax:12,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge d'hiver est ouvert mais non gardé. \r
Attention ni gaz ni chauffage ni eau.`,completeInfo:"Refuge complet merci de vous inscrire sur la liste d'attente",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugechabourneou<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>(0)9<sp></sp>88<sp></sp><p2></p2>8<sp></sp><p1></p1><p2></p2><sp></sp><p1></p1><p1></p1>%%+33<sp></sp>(0)6<sp></sp>75<sp></sp>94<sp></sp>98<sp></sp>38",maxDate:"2026-08-07",oid:"BK_STRUCTURE:63",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:97":{name:"REFUGE DE CHAMBEYRON (FFCAM)",lat:44.530117,lng:6.83607,altitude_m:2626,places:69,gardien:"MARIE LY",description:"Dans la vallée de la Haute Ubaye, le refuge de Chambeyron est situé sur les rives du Lac Premier, au pied du Brec de Chambeyron qui culmine à 3 389 mètres.",urls:["http://refugeduchambeyron.ffcam.fr","http://refugeduchambeyron.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:97",name:"Refuge de Chambeyron  (FFCAM)",shortName:"Chambeyron",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:20,showAvailable:"2",waitingList:"2",unguardedInfo:"Une quinzaine de lits sont disponibles avec des couvertures, un poële dans la salle principale avec du bois et du charbon, des toilettes sèches. Il faut être automne pour le gaz, le matériel de cuisine (quelques casseroles et couverts, assiettes, verres mais rudimentaire) et l'eau (torrent qui alimente le lac premier accessible pour se ravitailler la plupart du temps).Les nuitées sont à 8 euros par personnes et la taxe de chauffage est à 2 euros par personnes. Merci de laisser le lieu propre et de descendre vos ordures !",completeInfo:"Le refuge est complet mais appelez toujours les gardiens s'il y a eu une annulation de dernière minute… !! 04 92 84 33 83.",fullWebInfo:"Les réservations se font par téléphone au 04 92 84 33 83. Merci de contacter les gardiens.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeduchambeyron<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>84<sp></sp>33<sp></sp>83",maxDate:"2026-08-07",oid:"BK_STRUCTURE:97",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:83":{name:"REFUGE DU CHATELLERET (FFCAM)",lat:44.975819,lng:6.299482,altitude_m:2225,places:68,gardien:"NON GARDE",description:"Le refuge du Chatelleret est situé au creux du vallon des Etançons, au pied de la face sud de la Meije, immergé dans les paysages sauvages du Parc National des Ecrins.",urls:["http://refugechatelleret.ffcam.fr","http://refugechatelleret.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:83",name:"Refuge du Chatelleret  (FFCAM)",shortName:"Chatelleret",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:10,showAvailable:"1",waitingList:"2",unguardedInfo:"Le refuge est non gardé.",completeInfo:`Le refuge est complet aux dates sélectionnées.\r
N'hésitez pas à regarder d'autres dates, je vous accueillerai avec plaisir !`,fullWebInfo:`Le refuge est complet aux dates sélectionnées.\r
N'hésitez pas à regarder d'autres dates, je vous accueillerai avec plaisir !`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugechatelleret<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>76<sp></sp>79<sp></sp><p8></p8><sp></sp><p2></p2>7",maxDate:"2026-08-07",oid:"BK_STRUCTURE:83",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:67":{name:"REFUGE DU CLOT - XAVIER BLANC (FFCAM)",lat:44.829269,lng:6.275533,altitude_m:1397,places:40,gardien:"INGRID BENOIT",description:"Dans le massif des Ecrins, au bout de la vallée du Valgaudemar, le chalet du Clot est à la croisée des tours de l'Oisans (GR 54), du Vieux Chaillol, et du Valgaudemar.",urls:["http://chaletduclot.ffcam.fr","http://chaletduclot.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:67",name:"Refuge du Clot - Xavier Blanc  (FFCAM)",shortName:"Clot-Xavier Blanc",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:40,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est fermé mais vous pouvez séjourner dans le refuge d'hiver",completeInfo:"Le refuge est complet, je vous invite à vous inscrire sur la liste d'attente. Un mail vous parviendra si des places se libèrent.",fullWebInfo:"La réservation en ligne est complète, mais vous pouvez essayer de réserver par téléphone (n° du refuge et le mien 06.67.41.24.21)",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"chaletduclot<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>67<sp></sp>4<p1></p1><sp></sp><p2></p2>4<sp></sp><p2></p2><p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:67",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:45":{name:"REFUGE DU COL DE LA VANOISE",lat:45.391869,lng:6.790818,altitude_m:2518,places:129,gardien:"GERARD GIROD",description:"Le refuge a été entièrement rénové en 2014. Il est situé dans un des sites les plus fréquentés de la Vanoise. Le panorama est grandiose : vue unique sur la Grande Casse et son glacier, l'Arête de la Réchasse, la Grande et la Petite Glière...",urls:["http://refugecoldelavanoise.ffcam.fr","http://refugecoldelavanoise.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:45",name:"Refuge du Col de la Vanoise",shortName:"Col de la Vanoise",allowedOrigins:"||MSFFCAM||FFCAM||VANOISE||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:90,showAvailable:"2",waitingList:"1",unguardedInfo:"Refuge non gardé, un refuge d'hiver est à votre disposition.",completeInfo:"Refuge déjà complet, vous pouvez vous inscrire sur la liste d'attente.",fullWebInfo:"Refuge déjà complet, vous pouvez vous inscrire sur la liste d'attente.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugecoldelavanoise<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>79<sp></sp><p8></p8><sp></sp><p2></p2>5<sp></sp><p2></p2>3",maxDate:"2026-08-07",oid:"BK_STRUCTURE:45",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:34":{name:"REFUGE DES CONSCRITS (FFCAM)",lat:45.786943,lng:6.766018,altitude_m:2614,places:90,gardien:"CHRISTINE MATTEL",description:"Avec le nouveau sentier d'accès, le Refuge des Conscrits devient accessible aux randonneurs avertis, qui peuvent, en suivant un bel itinéraire en balcon, accéder à la haute montagne et à la Réserve Naturelle des Contamines-Montjoie.",urls:["http://refugedesconscrits.ffcam.fr","http://refugedesconscrits.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:34",name:"Refuge des Conscrits  (FFCAM)",shortName:"Conscrits",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:4,maxPax:12,showAvailable:"2",waitingList:"2",unguardedInfo:"Le refuge n'est pas gardé sur cette période.  Le refuge d'hiver comporte 12 places, des couvertures et de la vaisselle. Se renseigner auprès de la gardienne au 0479890903",completeInfo:"Le refuge est complet à cette date-là. Vous pouvez contacter directement la gardienne au 0479890903",fullWebInfo:"Le refuge est complet à cette date-là. Vous pouvez contacter directement la gardienne au 0479890903",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesconscrits<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>79<sp></sp>89<sp></sp><p9></p9><sp></sp><p3></p3>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:34",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:4m2wkebwwg2f":{name:"CHALET DES CONTAMINES (FFCAM)",lat:45.816893,lng:6.724909,altitude_m:1164,places:20,gardien:"JOACHIM ROMAN,ANAIS MATTEL",description:'Ce chalet typique haut savoyard et confortable a su garder son "âme" montagnarde. Il est situé sur le versant Mont Joly du village des Contamines, face aux Dômes de Miage. Vous y passerez un séjour au calme dans un environnement soigné.',urls:["http://chaletdescontamines.ffcam.fr","http://chaletdescontamines.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:4m2wkebwwg2f",name:"Chalet des Contamines  (FFCAM)",shortName:"Contamines",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:12,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est actuellement non gardé. Référez-vous au calendrier d'ouverture afin de planifier votre séjour sur une autre période !",completeInfo:"Vous réservez trop tard ! Notre établissement est actuellement complet. Vous pouvez vous inscrire sur liste d'attente et nous vous appellerons en cas d'un désistement.",fullWebInfo:"Vous réservez trop tard ! Notre établissement est actuellement complet. Vous pouvez vous inscrire sur liste d'attente et nous vous appellerons en cas d'un désistement.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"chaletdescontamines<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>50<sp></sp>47<sp></sp>00<sp></sp>88",maxDate:"2026-08-07",oid:"BK_STRUCTURE:4m2wkebwwg2f",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:129":{name:"REFUGE DES CORTALETS (FFCAM)",lat:42.534383,lng:2.465062,altitude_m:2150,places:105,gardien:"THOMAS DULAC",description:"Le refuge des Cortalets est un des premiers construit dans les Pyrénées (1899). Il est situé à 2150 m et donne accès au sommet du Canigou à 2784 m d'altitude. Il est une des étapes de la traversée des Pyrénées (GR 10 et HRP).",urls:["http://refugedescortalets.ffcam.fr","http://refugedescortalets.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:129",name:"Refuge des Cortalets  (FFCAM)",shortName:"Cortalets",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"5",minDate:"2025-08-12",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:10,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge n'est pas gardé à cette date.",completeInfo:`Le jour que vous demandez se réserve par téléphone uniquement: 04 68 96 36 19\r
\r
Vous pouvez vous inscrire sur la  liste d'attente parce que le refuge ce jour-là est complet.\r
Pour pouvoir m'organiser, il faut me dire le nombre exact de personne le régime souhaité (demi-pension, pension complète, etc.) vos coordonnées : e-mail et téléphone portable.\r
\r
Le refuge est complet : Pensez au bivouac !\r
\r
Le Canigó grand site autorise le bivouac avec tente de 19 heures à 9 heures :\r
\r
Autour du refuge il y a une quarantaine d'emplacements, ainsi qu'une douzaine de places à feu\r
\r
Le Refuge des Cortalets ne gère pas le bivouac (pas de réservation, pas de frais) mais vous pourrez profiter du service de restauration du refuge : repas du soir, petit-déjeuner, pique-nique. Pour ces services pensez néanmoins à réserver afin que nous puissions vous proposer un service correct.\r
\r
Et n'oubliez pas : après votre départ… pas de traces ! Descendez vos déchets dans la vallée, le refuge n'est pas autorisé à les accueillir !\r
\r
Dans l'attente d'une place qui se libère…`,fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedescortalets<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>68<sp></sp>96<sp></sp>36<sp></sp><p1></p1>9",maxDate:"2026-08-07",oid:"BK_STRUCTURE:129",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:24":{name:"REFUGE DU COUVERCLE (FFCAM)",lat:45.910225,lng:6.965341,altitude_m:2683,places:64,gardien:"CHRISTOPHE LELIEVRE",description:"Avant poste de l'alpinisme situé en plein coeur du massif du Mont Blanc, le refuge du Couvercle fait face aux Grandes Jorasses. Il doit son nom à la grosse pierre qui, tombée du Moine, est restée posée comme un couvercle sur de gros blocs.",urls:["http://refugeducouvercle.ffcam.fr","http://refugeducouvercle.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:24",name:"Refuge du Couvercle  (FFCAM)",shortName:"Couvercle",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:8,showAvailable:"2",waitingList:"2",unguardedInfo:"Refuge fermé appeler au + 33 6 87 99 01 66 ou + 33 7 71 57 77 85",completeInfo:"Refuge complet à la réservation en ligne, appeler au + 33 6 87 99 01 66 ou + 33 7 71 57 77 85",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeducouvercle<a></a><ff></ff><d></d><fr></fr>",phone:"+<sp></sp>33<sp></sp>9<sp></sp>8<p2></p2><sp></sp><p1></p1><p2></p2><sp></sp>45<sp></sp><p3></p3>%%+<sp></sp>33<sp></sp>7<sp></sp>7<p1></p1><sp></sp>57<sp></sp>77<sp></sp>85<sp></sp><sp></sp>urgence<sp></sp>+<sp></sp>33<sp></sp>6<sp></sp>87<sp></sp>99<sp></sp>0<p1></p1><sp></sp>66",maxDate:"2026-08-07",oid:"BK_STRUCTURE:24",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:35":{name:"REFUGE DE LA CROIX DU BONHOMME (FFCAM)",lat:45.722058,lng:6.717266,altitude_m:2443,places:99,gardien:"NOE PENNETIER,GUENOLE LOTERIE",description:"Le col de la Croix du bonhomme est un passage historique, au carrefour du Beaufortain, du Val-Montjoie et de la vallée des glaciers. Le refuge du même nom offre aux randonneurs un confort très appréciable, et un panorama magnifique.",urls:["http://refugecroixdubonhomme.ffcam.fr","http://refugecroixdubonhomme.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:35",name:"Refuge de la Croix du Bonhomme  (FFCAM)",shortName:"Croix du Bonhomme",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"4",minDate:"2025-08-11",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:22,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge est non gardé pendant cette période",completeInfo:"Le refuge est complet pendant cette période. N'hésitez pas à téléphoner au gardien.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugecroixdubonhomme<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>9<sp></sp>70<sp></sp>0<p2></p2><sp></sp>8<p1></p1><sp></sp>47",maxDate:"2026-08-07",oid:"BK_STRUCTURE:35",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:13":{name:"REFUGE DE LA DENT D'OCHE (FFCAM)",lat:46.352617,lng:6.728366,altitude_m:2114,places:45,gardien:"THIERRY PERISSE",description:"Sur son promontoire rocheux, le refuge veille sur les terres septentrionales du Chablais. Sur une arête 100 m sous la Dent d'Oche il offre une vue panoramique grand angle.",urls:["http://refugeladentdoche.ffcam.fr","http://refugeladentdoche.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:13",name:"Refuge de la Dent d'Oche  (FFCAM)",shortName:"Dent d'Oche",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:12,showAvailable:"2",waitingList:"1",unguardedInfo:"Accès fermé et non accessible en période non gardée",completeInfo:"Une liste d'attente est disponible. Vous pouvez vous y  inscrire. En cas de désistement un mail vous sera envoyé, pour vous inscrire à ce moment.",fullWebInfo:"Contacter le refuge",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeladentdoche<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>48<sp></sp>90<sp></sp>57<sp></sp>4<p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:13",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:52":{name:"REFUGE DE LA DENT PARRACHÉE",lat:45.269734,lng:6.719063,altitude_m:2520,places:42,gardien:"FRANCK BUISSON",description:"Ce refuge renové en bois par les mains de son gardien-menuisier offre un espace chaleureux d'où l'on ne repart sans une histoire contée. Situé dans le Parc national de la Vanoise, il surplombe les retenues de Plan d'Amont et Plan d'Aval.",urls:["http://refugeladentparrachee.ffcam.fr","http://refugeladentparrachee.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:52",name:"Refuge de la Dent Parrachée",shortName:"Dent Parrachée",allowedOrigins:"||MSFFCAM||FFCAM||VANOISE||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:43,showAvailable:"2",waitingList:"1",unguardedInfo:"",completeInfo:"",fullWebInfo:"Complet à la réservation en ligne 04 79 20 32 87",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeladentparrachee<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>79<sp></sp><p2></p2>0<sp></sp>3<p2></p2><sp></sp>87",maxDate:"2026-08-07",oid:"BK_STRUCTURE:52",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:59":{name:"REFUGE DES DRAYÈRES (FFCAM)",lat:45.081088,lng:6.508033,altitude_m:2180,places:64,gardien:"ANNE DEBEAUNE",description:"Le refuge des Drayères est situé au fond de la vallée de la Clarée, sur le Tour du Mont Thabor par le GR57. Un lieu incontournable si vous aimez les lacs !",urls:["http://refugedesdrayeres.ffcam.fr","http://refugedesdrayeres.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:59",name:"Refuge des Drayères  (FFCAM)",shortName:"Drayères",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:40,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge d'hiver est accessible (32 places). L'eau potable à l'extérieur, couvertures, matelas, coussin et toilette sèche à l'extérieur restent à disposition. Règlement de la nuit (8€) dans le tronc svp à l'intérieur du refuge. Il n'y a pas de clé à récupérer. Attention pas de poêle ni bois.",completeInfo:"Merci de vous inscrire sur la liste d'attente. Vous recevrez un email dès que de la place se libère. N'hésitez pas également à nous appeler.",fullWebInfo:"Merci de vous inscrire sur la liste d'attente. Vous recevrez un email dès que de la place se libère. N'hésitez pas également à nous appeler.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesdrayeres<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>8<p2></p2><sp></sp><p1></p1><p2></p2><sp></sp>53<sp></sp><p8></p8>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:59",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:82":{name:"REFUGE DES ECRINS (FFCAM)",lat:44.947334,lng:6.383095,altitude_m:3161,places:116,gardien:"DAMIEN HAXAIRE,MAELLE DUVILLARD",description:"Situé à 3170 m, sur un promontoire rocheux de la rive gauche du Glacier Blanc, le refuge des Écrins est situé face au plus haut sommet du massif, la Barre des Écrins (4102 m). L'accès au refuge passe sur le Glacier Blanc, il est nécessaire d'avoir du matériel de progression sur glacier (crampons, baudrier et corde)",urls:["http://refugedesecrins.ffcam.fr","http://refugedesecrins.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:82",name:"Refuge des Ecrins (FFCAM)",shortName:"Ecrins",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:null,unguarded:"2",maxDays:3,maxPax:40,showAvailable:"1",waitingList:"2",unguardedInfo:"Le refuge est actuellement non gardé. Merci de nous contacter par mail.",completeInfo:"Le refuge est à priori complet, mais vous pouvez joindre le gardien par téléphone au 04 92 23 46 66 pour profiter d'éventuels désistements.",fullWebInfo:"Le refuge est à priori complet, mais vous pouvez joindre le gardien par téléphone au 04 92 23 46 66 pour profiter d'éventuels désistements.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesecrins<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>8<p2></p2><sp></sp><p1></p1><p2></p2><sp></sp>70<sp></sp>85%%<p6></p6><sp></sp><p7></p7><sp></sp>79<sp></sp>89<sp></sp>96",maxDate:"2026-08-07",oid:"BK_STRUCTURE:82",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:26":{name:"REFUGE DE L'ENVERS DES AIGUILLES (FFCAM)",lat:45.899998,lng:6.927605,altitude_m:2493,places:50,gardien:"EMMA BONTAZ",description:"Pour les inconditionnels du granite chamoniard et les explorateurs du massif du Mont Blanc, le refuge est situé au pieds des aiguilles granitiques de Chamonix.",urls:["http://refugelenversdesaiguilles.ffcam.fr","http://refugelenversdesaiguilles.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:26",name:"Refuge de l'Envers des Aiguilles  (FFCAM)",shortName:"Envers des Aiguilles",allowedOrigins:"||MSFFCAM||FFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:10,maxPax:15,showAvailable:"2",waitingList:"2",unguardedInfo:"Le refuge est actuellement en mode non gardé. La salle à manger ainsi qu'un dortoir de 12 places sont en accès libre. Attention, il n'y a donc pas d'eau, pas de gaz et pas d'électricité. Merci de laisser l'endroit propre et rangé, et de nous signaler tout problème. Bon séjour là-haut !",completeInfo:`Le refuge affiche complet mais vous pouvez toujours tenter votre chance en nous appelant car il peut y avoir eu des désistements de dernière minute !\r
06 70 74 19 43`,fullWebInfo:"La réservation en ligne est terminée mais n'hésitez pas à appeler au refuge, il reste peut-être des places disponibles : 06 70 74 19 43",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugelenversdesaiguilles<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>9<sp></sp>70<sp></sp>0<p2></p2><sp></sp>0<p1></p1><sp></sp>54%%+33<sp></sp>6<sp></sp>70<sp></sp>74<sp></sp><p1></p1>9<sp></sp>43",maxDate:"2026-08-07",oid:"BK_STRUCTURE:26",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:111":{name:"REFUGE D'ESPINGO (FFCAM)",lat:42.730544,lng:.499549,altitude_m:1967,places:60,gardien:"LIONEL MARQUIS,VALENTINE PELIZZARI",description:"Le refuge d'Espingo est de par sa situation, un refuge idéal pour la découverte du milieu montagnard. Bordé par les lacs d'Espingo et de Saoussat, il est le théâtre de beaucoup d'acteurs alpinistes, pêcheurs, randonneurs et amis de la nature.",urls:["http://refugedespingo.ffcam.fr","http://refugedespingo.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:111",name:"Refuge d'Espingo  (FFCAM)",shortName:"Espingo",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:6,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge est non-gardé pour la date qui vous intéresse, une partie de 15 places reste à votre disposition. \r
Merci de fermer correctement portes, fenêtres et volets quand vous quittez les lieux. N'oubliez pas de ramener vos déchets en vallée.\r
Une contribution de 8 euros est demandée en période non gardée.`,completeInfo:"Le stock de places réservables en ligne est épuisé. Vous pouvez vous inscrire sur liste d'attente.",fullWebInfo:"Le stock de places réservables en ligne est épuisé. Vous pouvez vous inscrire sur liste d'attente.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedespingo<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp>66<sp></sp>99<sp></sp>69",maxDate:"2026-08-07",oid:"BK_STRUCTURE:111",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:57":{name:"REFUGE DE L'ETENDARD (FFCAM)",lat:45.203832,lng:6.175331,altitude_m:2430,places:70,gardien:"FABIENNE GONIN-CHEVARIN,COLINE GONIN",description:"Le refuge de l'Etendard est un point de départ particulièrement apprécié pour les promenades familiales l'été, pour l'ascension du pic de l'Étendard ou de ses satellites. Il est situé dans le Massif des Grandes Rousses, au bord de l'agréable Grand Lac (ou lac Bramans).",urls:["http://refugedeletendard.ffcam.fr","http://refugedeletendard.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:57",name:"Refuge de l'Etendard  (FFCAM)",shortName:"Etendard",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:64,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge est non gardé. Pas de réservation possible.",completeInfo:"Le refuge est complet. Merci de vous inscrire sur la liste d'attente ou de téléphoner au refuge.",fullWebInfo:"Merci de bien vouloir téléphoner directement au refuge pour réserver.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedeletendard<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>70<sp></sp>0<p2></p2><sp></sp><p1></p1><p1></p1><sp></sp>75%%<p6></p6><sp></sp>8<p2></p2><sp></sp><p7></p7><sp></sp>69<sp></sp>56%%<p4></p4><sp></sp>79<sp></sp>59<sp></sp>74<sp></sp>96",maxDate:"2026-08-07",oid:"BK_STRUCTURE:57",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:47":{name:"REFUGE DES EVETTES (FFCAM)",lat:45.368502,lng:7.107342,altitude_m:2594,places:48,gardien:"AURELIEN MONPERRUS",description:"Dans la haute vallée de la Maurienne, le site classé du cirque des Evettes est exceptionnel. Glacier des Evettes, lacs d'altitude, paysage minéral aux puissantes formations géologiques, offrent aux visiteurs des lieux un tableau unique",urls:["http://refugedesevettes.ffcam.fr","http://refugedesevettes.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:47",name:"Refuge des Evettes  (FFCAM)",shortName:"Evettes",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:36,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est en mode non gardé pour cette période.",completeInfo:"Le refuge est complet pour la période ou vous souhaitez réserver, n'hésitez pas a vous inscrire sur la liste d'attente pour être prévenu en cas de nouvelles disponibilités.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesevettes<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>5<p2></p2><sp></sp>86<sp></sp>48<sp></sp>53<sp></sp>Merci<sp></sp>de<sp></sp>ne<sp></sp>pas<sp></sp>laisser<sp></sp>de<sp></sp>message<sp></sp>ni<sp></sp>de<sp></sp>SMS,<sp></sp>ceci<sp></sp>n'est<sp></sp>pas<sp></sp>un<sp></sp>portable!",maxDate:"2026-08-07",oid:"BK_STRUCTURE:47",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:47ntr9jg1dif":{name:"CHALET ALPIN L'EYCHAUDA (FFCAM)",lat:44.860545,lng:6.491927,altitude_m:1267,places:76,gardien:"MATTHIEU PIEDNOIR,LUCILE MOULIN",description:"En montagne, au coeur des Ecrins, un grand gîte pour accueillir, en séjour, en week-end ou en étape à la montagne, groupe  et familles.",urls:["http://chaletleychauda.ffcam.fr","http://chaletleychauda.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:47ntr9jg1dif",name:"Chalet alpin l'Eychauda  (FFCAM)",shortName:"Eychauda",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:15,showAvailable:"1",waitingList:"1",unguardedInfo:"Pour toute réservation hors période, vous pouvez nous contacter au 0695418547.",completeInfo:"Nous vous invitons à vous inscrire sur liste d'attente. Si des places se libèrent, vous serez informés par mail.",fullWebInfo:"Pour toute information sur les réservations, nous sommes joignables au 0695418547.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CENTRE",groupement:"BK_GROUP:CAF",email:"chaletleychauda<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>95<sp></sp>4<p1></p1><sp></sp>85<sp></sp>47",maxDate:"2026-08-07",oid:"BK_STRUCTURE:47ntr9jg1dif",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:51":{name:"REFUGE DU FOND D'AUSSOIS",lat:45.276768,lng:6.702449,altitude_m:2346,places:52,gardien:"THIERRY MARGUERON",description:"Au coeur du Parc National de la Vanoise, sous le massif de l'Echelle apprécié des bouquetins, le refuge du Fond d'Aussois est entouré d'un envrionnement d'Alpage.",urls:["http://refugefonddaussois.ffcam.fr","http://refugefonddaussois.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:51",name:"Refuge du Fond d'Aussois",shortName:"Fond d Aussois",allowedOrigins:"||MSFFCAM||FFCAM||VANOISE||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:52,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge est hors gardiennage à cette date",completeInfo:"Merci d'appeler directement au refuge ou de vous inscrire sur la liste d'attente",fullWebInfo:"Merci d'appeler directement au refuge ou de vous inscrire sur la liste d'attente",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugefonddaussois<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>79<sp></sp><p2></p2>0<sp></sp>39<sp></sp>83",maxDate:"2026-08-07",oid:"BK_STRUCTURE:51",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:94":{name:"REFUGE DE GIALORGUES (FFCAM)",lat:44.236532,lng:6.819769,altitude_m:2275,places:12,gardien:null,description:"Dans un cadre d'alpages typique du Mercantour, au-dessus du Plan de la Sagne, et sous l'étrange Fort Carra tout proche, un refuge « à l'ancienne » dont les amoureux du calme apprécieront  la chaleur et l'équipement mis à disposition avec soin.",urls:["http://refugedegialorgues.ffcam.fr","http://refugedegialorgues.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:94",name:"Refuge de Gialorgues  (FFCAM)",shortName:"Gialorgues",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"0",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:3,maxPax:12,showAvailable:"1",waitingList:"2",unguardedInfo:"Le refuge est non gardé.",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"refugedegialorgues<a></a><ff></ff><d></d><fr></fr>",phone:"",maxDate:"2026-08-07",oid:"BK_STRUCTURE:94",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:72":{name:"REFUGE DU GLACIER BLANC (FFCAM)",lat:44.937545,lng:6.41164,altitude_m:2542,places:131,gardien:"NICOLAS CHAUD",description:"Le refuge du Glacier Blanc, facilement accessible à tous, familles, randonneurs ou alpinistes, est situé face au glacier blanc. Il est dominé par les faces nord du Pelvoux, du pic Sans Nom et des Ailefroides.",urls:["http://refugeduglacierblanc.ffcam.fr","http://refugeduglacierblanc.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:72",name:"Refuge du Glacier Blanc  (FFCAM)",shortName:"Glacier Blanc",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:99,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge est non gardé à cette date",completeInfo:"La réservation en ligne est complète à cette date. Merci de réserver directement par téléphone auprès du gardien au 04 92 23 50 24",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeduglacierblanc<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp><p2></p2>3<sp></sp>50<sp></sp><p2></p2>4%%<p9></p9><sp></sp>8<p2></p2><sp></sp><p1></p1><p2></p2><sp></sp>73<sp></sp>9<p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:72",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:123":{name:"CHALET DE GOURETTE (FFCAM)",lat:42.95951,lng:-.334196,altitude_m:1350,places:32,gardien:"EMILIE MOURA,MILLAN IBANEZ",description:"Au pied des pistes de la station de ski de Gourette, ce confortable chalet accueille familles, groupes et individuels. En été, en parcourant  le GR10, on y fait étape pour un moment de tranquillité garantie.",urls:["http://chaletdegourette.ffcam.fr","http://chaletdegourette.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:123",name:"Chalet de Gourette  (FFCAM)",shortName:"Gourette",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:6,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge n'est pas gardé sur cette période et ne dispose pas non plus de salle hors-sac",completeInfo:`Le refuge est complet à cette date-là.\r
Vous pouvez vous inscrire sur la liste d'attente ou bien décaler votre venue.`,fullWebInfo:`Le refuge est complet à cette date-là.\r
Vous pouvez vous inscrire sur la liste d'attente ou bien décaler votre venue.`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"chaletdegourette<a></a><ff></ff><d></d><fr></fr>",phone:"<p5></p5><sp></sp>59<sp></sp><p5></p5><sp></sp><p1></p1>0<sp></sp>56%%<p6></p6><sp></sp>40<sp></sp><p8></p8><sp></sp>6<p2></p2><sp></sp>93%%+34<sp></sp>699<sp></sp><p1></p1>3<sp></sp>4<p1></p1><sp></sp>63",maxDate:"2026-08-07",oid:"BK_STRUCTURE:123",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:44":{name:"REFUGE DU GRAND BEC (FFCAM)",lat:45.416516,lng:6.732832,altitude_m:2403,places:36,gardien:"AGNES DELMAS",description:"Dans le massif de la Vanoise, sur les hauteurs de Pralognan, ce petit refuge chaleureux niché au pied de la pointe de la Vuzelle, a une vue imprenable sur la face sud du Grand Bec, la pointe du Vallonet et  la vallée de Chavière.",urls:["http://refugedugrandbec.ffcam.fr","http://refugedugrandbec.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:44",name:"Refuge du Grand Bec  (FFCAM)",shortName:"Grand Bec",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:36,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge n'est pas gardé sur cette période.",completeInfo:"Les places disponibles en ligne sont épuisées, merci de nous contacter directement par téléphone, pour l'attribution des dernières places.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedugrandbec<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp><p9></p9><sp></sp>37<sp></sp>6<p1></p1><sp></sp>65",maxDate:"2026-08-07",oid:"BK_STRUCTURE:44",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:28":{name:"REFUGE DES GRANDS MULETS (FFCAM)",lat:45.866598,lng:6.861193,altitude_m:3057,places:68,gardien:"BENOIT DURAND",description:"Le refuge des Grands Mulets est situé sur une des voies d'accès du Mont Blanc, très prisée par les skieurs, dans un univers glacière de haute montagne.",urls:["http://refugedesgrandsmulets.ffcam.fr","http://refugedesgrandsmulets.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:28",name:"Refuge des Grands Mulets",shortName:"Grands Mulets",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:9,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge n'est pas gardé sur cette période.",completeInfo:`Toutes les places sont actuellement réservées sur cette période.\r
Vous pouvez toujours tenter de combler les désistements de dernières minutes, en consultant l'agenda de réservation à 48h avant la date désirée.`,fullWebInfo:`Nos réservations en ligne sont actuellement complètes.\r
Des places seront libérées courant du mois de janvier, de février et de mars.\r
En attendant vous pouvez toujours essayer de réserver en ligne sur des créneaux actuellement libres.`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesgrandsmulets<a></a><ff></ff><d></d><fr></fr>",phone:"<p7></p7><sp></sp>50<sp></sp>70<sp></sp>45<sp></sp>99",maxDate:"2026-08-07",oid:"BK_STRUCTURE:28",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:116":{name:"CHALET LA GRANGE DE HOLLE (FFCAM)",lat:42.739375,lng:-.022763,altitude_m:1495,places:62,gardien:"PHILIPPE CORDIER",description:"Notre confortable et chaleureux chalet de montagne, ouvert à tous, est situé au-dessus du village de Gavarnie. En pleine nature et loin de l'agitation touristique, c'est un camp de base idéal. Eté comme hiver, vous pouvez pratiquer vos activités de montagne préférées: randonnée, ski, raquette.",urls:["http://chaletlagrangedeholle.ffcam.fr","http://chaletlagrangedeholle.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:116",name:"Chalet la Grange de Holle  (FFCAM)",shortName:"Grange de Holle",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"450",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:10,maxPax:10,showAvailable:"1",waitingList:"1",unguardedInfo:"",completeInfo:"Le centre est complet. N'hésiter à nous contacter pour connaitre les désistements.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CENTRE",groupement:"BK_GROUP:CAF",email:"chaletlagrangedeholle<a></a><ff></ff><d></d><fr></fr>",phone:"<p5></p5><sp></sp>6<p2></p2><sp></sp>9<p2></p2><sp></sp>48<sp></sp>77",maxDate:"2026-10-31",oid:"BK_STRUCTURE:116",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:15":{name:"CHALET DU GRAYDON (FFCAM)",lat:46.202928,lng:6.635873,altitude_m:1335,places:18,gardien:null,description:"Au coeur du Chablais, le refuge est niché dans un hameau d'alpage au pied du Roc d'Enfer. Il permet de profiter de l'ambiance calme d'un paysage haut savoyard au dessus de la Vallée de Morzine.",urls:["http://chaletdegraydon.ffcam.fr","http://chaletdegraydon.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:15",name:"Chalet du Graydon  (FFCAM)",shortName:"Graydon",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"0",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:99,maxPax:99,showAvailable:"1",waitingList:"1",unguardedInfo:"",completeInfo:"Refuge complet",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"chaletdegraydon<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>85<sp></sp>99<sp></sp>74<sp></sp>83",maxDate:"2026-08-07",oid:"BK_STRUCTURE:15",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:139":{name:"REFUGE DE LA GLÈRE (FFCAM)",lat:42.860901,lng:.090529,altitude_m:2153,places:60,gardien:"BEATRICE CAUCAT",description:"Situé en fond de vallée et rénové en 2006, le refuge de la Glère est un magnifique belvédère sur le massif granitique de Néouvielle. Il permet un accès vers ses nombreux lacs cristallins, qui sont autant d'appels pour une journée de pêche à la mouche ou pour la simple contemplation des lieux.",urls:["http://refugedelaglere.ffcam.fr","http://refugedelaglere.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:139",name:"Refuge de la Glère  (FFCAM)",shortName:"La Glère",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||NEOUVIELLE||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:12,showAvailable:"1",waitingList:"2",unguardedInfo:`Le refuge est non gardé actuellement, donc inutile de réserver.\r
Cependant le refuge reste accessible en gestion libre.\r
Vous y trouverez 20 places en dortoir, matelas et couverture.\r
Il y a également du bois de chauffage.\r
Par contre il faut être autonome pour le gaz et la vaisselle, il n'y a rien pour cuisiner.\r
Il n'y a pas d'eau non plus, vous avez le lac juste en dessous ou la neige.\r
Pour tout séjour au refuge de la Glère, une participation de 8 € est demandée pour l'entretien du refuge.\r
Merci.\r
Bon séjour à vous et à bientôt.`,completeInfo:`La réservation en ligne n'est plus possible.\r
Vous pouvez nous joindre par téléphone au 09 82 12 55 32.`,fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedelaglere<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>8<p2></p2><sp></sp><p1></p1><p2></p2><sp></sp>55<sp></sp>3<p2></p2>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:139",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:76":{name:"REFUGE DE LA LAVEY (FFCAM)",lat:44.898639,lng:6.206164,altitude_m:1797,places:44,gardien:"CAMILLE CAPARROS,WALID AISSAOUI,LUDMILLA LEBRUN",description:"Le refuge est situé dans un alpage du haut vallon de la Lavey, dans la région alpine montagneuse de l'Oisans. Après une montée champêtre dans une nature préservée, le refuge apparaît comme un témoin d'une vie pastorale abandonnée.",urls:["http://refugelalavey.ffcam.fr","http://refugelalavey.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:76",name:"Refuge de la Lavey  (FFCAM)",shortName:"La Lavey",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:18,showAvailable:"1",waitingList:"2",unguardedInfo:`Bonjour,\r
\r
Le refuge est pour le moment complet à cette date.\r
\r
- Nous vous invitons à imaginer une autre date de venue au Refuge de la Lavey si  cela vous est possible.\r
\r
- Néamoins, vous pouvez vous inscrire sur la liste d'attente. Vous recevrez alors un mail si des places venaient à se libérer.\r
\r
- Il est aussi possible de venir avec votre bivouac et nous pourrons assurer votre repas du soir ainsi que votre petit-déjeuner et éventuellement votre panier pique-nique. Voici notre solution pour vous permettre de venir quand même à la Lavey en randonnant léger ! Pour cette dernière option, il est indispensable de nous appeler au  09 74 04 11 99.\r
\r
Bien à vous et au plaisir de vous accueillir !\r
\r
Camille&Ludmilla`,completeInfo:"Merci de nous contacter directement par téléphone au 07 89 05 66 71",fullWebInfo:"Merci de nous contacter directement par téléphone au 07 89 05 66 71",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugelalavey<a></a><ff></ff><d></d><fr></fr>",phone:"<p7></p7><sp></sp>89<sp></sp><p5></p5><sp></sp>66<sp></sp>7<p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:76",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:100":{name:"CHALET DE LA MALINE - VERDON (FFCAM)",lat:43.746281,lng:6.344916,altitude_m:893,places:44,gardien:"CEDRIC DEFONTAINE",description:`Surplombant les mythiques Gorges du Verdon, le chalet de la Maline vous accueille, en famille, ou entre amis. Face au cocktail d'activités sportives unique du site, le chalet est une invitation à faire une pause, s'accorder un moment de détente, et à reprendre des forces. 
Depuis la terrasse du chalet, paysages à couper le souffle et ambiance vous attendent !`,urls:["http://https%3Achaletlamaline.ffcam.fr","http://https%3Achaletlamaline.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:100",name:"Chalet de la Maline - Verdon  (FFCAM)",shortName:"La Maline",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:44,showAvailable:"2",waitingList:"2",unguardedInfo:"",completeInfo:"Le chalet est complet à cette date. Surveillez s'il n'y a pas de désistements dans l'avenir.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CENTRE",groupement:"BK_GROUP:CAF",email:"chaletlamaline<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>77<sp></sp>38<sp></sp><p5></p5>%%<p4></p4><sp></sp>86<sp></sp>90<sp></sp>58<sp></sp>66",maxDate:"2026-08-07",oid:"BK_STRUCTURE:100",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:56":{name:"REFUGE DE LA PRA (FFCAM)",lat:45.161296,lng:5.944236,altitude_m:2105,places:76,gardien:"QUENTIN CALVIERE,STEPHANIE LEPKI",description:"Nid douillet entouré d'alpages et de lacs de montagne, le refuge de la Pra est situé au pied du prestigieux Grand Pic de Belledonne.",urls:["http://refugedelapra.ffcam.fr","http://refugedelapra.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:56",name:"Refuge de la Pra  (FFCAM)",shortName:"La Pra",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:4,maxPax:23,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge est non gardé pendant cette période",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedelapra<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp><p2></p2>8<sp></sp><p1></p1>6<sp></sp>69",maxDate:"2026-08-07",oid:"BK_STRUCTURE:56",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:5":{name:"CHALET DU LANGENBERG (FFCAM)",lat:47.80667,lng:6.86167,altitude_m:1050,places:28,gardien:null,description:"Le chalet du langenberg est situé sur le versant S.E. du Ballon d'Alsace. C'est un hébergement lumineux avec une vue exceptionnelle sur la plaine d'Alsace, la Forêt Noire, et les Alpes suisses (Oberland).",urls:["http://chaletlangenberg.ffcam.fr","http://chaletlangenberg.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:5",name:"Chalet du Langenberg  (FFCAM)",shortName:"Langenberg",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:10,maxPax:26,showAvailable:"1",waitingList:"1",unguardedInfo:"",completeInfo:"Le refuge est complet ; nous vous incitons à vous inscrire sur la liste d'attente",fullWebInfo:"Merci de contacter le gardien par mail pour évaluer les possibilités de réservation.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"chaletlangenberg<a></a><ff></ff><d></d><fr></fr>",phone:"",maxDate:"2026-08-07",oid:"BK_STRUCTURE:5",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:121":{name:"REFUGE DE LARRIBET (FFCAM)",lat:42.858184,lng:-.288841,altitude_m:2072,places:60,gardien:"LAETITIA HELUIN",description:"Familles intrépides, randonneurs bucoliques, grimpeurs chevronnés, alpinistes motivés, tout le monde trouvera sa place au refuge de Larribet au coeur du Parc national des Pyrénées.",urls:["http://https%3Arefugedelarribet.ffcam.fr","http://https%3Arefugedelarribet.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:121",name:"Refuge de Larribet  (FFCAM)",shortName:"Larribet",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:15,showAvailable:"1",waitingList:"1",unguardedInfo:"Refuge non gardé à cette date donc inutile de réserver. Cependant, il reste ouvert et disponible pour vos projets de randonnées (32 places dans le dortoir avec couverture, salle hors-sac, réfectoire, bois, poêle) et 7 € par personne et par nuit seront à déposer sur place au refuge dans la tronc.",completeInfo:"Plus de places disponibles à la réservation en ligne. Appelez nous, il reste sûrement des places au refuge !",fullWebInfo:"Oups ! Le refuge est complet à cette date... Si vous le pouvez, choisissez en une autre ! Ou bien n'hésitez pas à vous inscrire en liste d'attente (souvent ça marche!!!). Merci",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedelarribet<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp>66<sp></sp>6<p1></p1><sp></sp><p2></p2><p2></p2>%%HS:<sp></sp><p6></p6><sp></sp>67<sp></sp>3<p2></p2><sp></sp><p1></p1>4<sp></sp>95",maxDate:"2026-08-07",oid:"BK_STRUCTURE:121",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:47ntqvy8e2a1":{name:"CHALET ALPIN DU TOUR (FFCAM)",lat:46.001606,lng:6.947366,altitude_m:1466,places:87,gardien:"DELPHINE LANTIGNAC",description:"A l'orée du massif du Mont Blanc, le chalet alpin du Tour est un petit havre de paix loin du tumulte et de la foule de la capitale de l'alpinisme.",urls:["http://chaletdutour.ffcam.fr","http://chaletdutour.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:47ntqvy8e2a1",name:"Chalet Alpin du Tour  (FFCAM)",shortName:"Le Tour",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"4",minDate:"2025-08-11",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:20,showAvailable:"2",waitingList:"2",unguardedInfo:"",completeInfo:"Le chalet est complet à la réservation en ligne mais n'hésitez pas à nous appeler au 04 50 54 04 16.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CENTRE",groupement:"BK_GROUP:CAF",email:"chaletdutour<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>4<sp></sp>50<sp></sp>54<sp></sp><p4></p4><sp></sp><p1></p1>6%%Avant<sp></sp>ouverture:<sp></sp><p6></p6><sp></sp><p1></p1>6<sp></sp><p2></p2>4<sp></sp>50<sp></sp>7<p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:47ntqvy8e2a1",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:65":{name:"REFUGE DES SOUFFLES (FFCAM)",lat:44.844652,lng:6.146549,altitude_m:1969,places:30,gardien:"JEAN-CLAUDE ARMAND",description:"Le refuge des Souffles est un beau chalet en bois, niché au milieu des derniers mélèzes de la forêt de Lautier. Ce point de passage incontournable des randonneurs et adeptes de la contemplation est située au-dessus de Villard-Loubière, au coeur des Ecrins",urls:["http://refugedessouffles.ffcam.fr","http://refugedessouffles.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:65",name:"Refuge des Souffles  (FFCAM)",shortName:"Les Souffles",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"260",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:15,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge n'est pas gardé.\r
Seul le refuge d'hiver est accessible.`,completeInfo:`La réservation en ligne est complète sur cette date.\r
Vous pouvez vous inscrire sur la liste d'attente ou appeler le gardien directement au  04 92 55 22 91.`,fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedessouffles<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>55<sp></sp><p2></p2><p2></p2><sp></sp>9<p1></p1>",maxDate:"2026-04-24",oid:"BK_STRUCTURE:65",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:25":{name:"REFUGE DE LESCHAUX (FFCAM)",lat:45.894922,lng:6.980888,altitude_m:2447,places:20,gardien:"CHLOE LAGET",description:"Au coeur du massif du Mont Blanc, au-dessus de la moraine du glacier de Leschaux, le refuge est le lieu de départ idéal vers la mythique face nord des Grandes Jorasses.",urls:["http://refugeleschaux.ffcam.fr","http://refugeleschaux.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:25",name:"Refuge de Leschaux  (FFCAM)",shortName:"Leschaux",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"5",minDate:"2025-08-12",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:12,showAvailable:"2",waitingList:"2",unguardedInfo:"PAS DE GAZ, il y a couvertures, Merci de laisser le refuge propre et de descendre vos poubelles !",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeleschaux<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>6<sp></sp>36<sp></sp>95<sp></sp>3<p2></p2><sp></sp>64",maxDate:"2026-08-07",oid:"BK_STRUCTURE:25",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:87":{name:"CHALET DE LA MADONE DE FENESTRE (FFCAM)",lat:44.095773,lng:7.356322,altitude_m:1903,places:62,gardien:"PATRICK MIRAILLET",description:"Dans le Parc National du Mercantour, le chalet de la Madone de Fenestre est au coeur d'un majestueux amphithéâtre alpin dominé par le géant local, le Gélas, plus haut sommet des Alpes-Maritimes (3 143 m)",urls:["http://chaletmadonedefenestre.ffcam.fr","http://chaletmadonedefenestre.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:87",name:"Chalet de la Madone de Fenestre  (FFCAM)",shortName:"Madone de Fenestre",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||BOREON||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:56,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est gardé uniquement sur réservation à cette période. Vous pouvez nous contacter à notre domicile au 04 93 03 91 02.",completeInfo:"Le refuge est complet pendant cette période. N'hésitez pas à vous inscrire sur la liste d'attente ou contacter le gardien par téléphone au 04 93 02 83 19.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"chaletmadonedefenestre<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp><p9></p9><sp></sp><p1></p1>7<sp></sp>89<sp></sp>58",maxDate:"2026-08-07",oid:"BK_STRUCTURE:87",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:98":{name:"CHALET DE MALJASSET (FFCAM)",lat:44.592865,lng:6.842516,altitude_m:1905,places:39,gardien:"FEDERICA PERINO FONTANA",description:"Au fond de la haute vallée de l'Ubaye,  au coeur du hameau de Maljasset, le chalet du même nom est une très ancienne ferme, aux salles voûtées, au toit de lauzes. Le bâtiment a été transformé intérieurement en un gîte chaleureux et confortable.",urls:["http://chaletmaljasset.ffcam.fr","http://chaletmaljasset.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:98",name:"Chalet de Maljasset  (FFCAM)",shortName:"Maljasset",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:4,maxPax:8,showAvailable:"1",waitingList:"1",unguardedInfo:"Hors période de gardiennage, le refuge n'est pas accessible.",completeInfo:"Le refuge est complet à cette date, pour vous mettre en liste d'attente ou vous pouvez appeler directement le refuge au 04 92 31 55 42",fullWebInfo:"La réservation est complète à la vente en ligne, n'hésitez pas à nous contacter au refuge au 04 92 31 55 42",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"chaletmaljasset<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>3<p1></p1><sp></sp>55<sp></sp>4<p2></p2>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:98",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:110":{name:"REFUGE DU MAUPAS (FFCAM)",lat:42.714778,lng:.549079,altitude_m:2430,places:30,gardien:"NATHALIE LAGUNA",description:"Petit nid d'aigle chaleureux et convivial, le refuge du Maupas vous invitera à déconnecter de l'agitation estivale en prenant un peu de hauteur au coeur des Pyrénées!",urls:["http://refugedumaupas.ffcam.fr","http://refugedumaupas.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:110",name:"Refuge du Maupas (FFCAM)",shortName:"Maupas",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:5,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge n'est pas gardé à cette date. \r
Le refuge d'hiver est accessible. Vous trouverez un dortoir de 30 places et la salle de restauration, le tout avec un peu de chauffage. \r
Merci de respecter les lieux et de les laisser propre. Une contribution de 8€ par nuitée vous est demandée pour votre séjour. Vous trouverez une boîte au refuge ou une adresse où envoyer votre règlement. \r
Passez un bon séjour!`,completeInfo:`Le refuge est complet ce soir. \r
Vous pouvez me contacter au 07 87 32 37 62, au cas où il y aurait des désistements.`,fullWebInfo:`Il ne reste plus de places ouvertes à la réservation en ligne. \r
Vous pouvez me contacter au 07 87 32 37 62, au cas où il resterait des places ouvertes à la réservation par téléphone.`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedumaupas<a></a><ff></ff><d></d><fr></fr>",phone:"<p7></p7><sp></sp>87<sp></sp>3<p2></p2><sp></sp>37<sp></sp>6<p2></p2>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:110",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:88":{name:"REFUGE DES MERVEILLES (FFCAM)",lat:44.057442,lng:7.451824,altitude_m:2130,places:79,gardien:"AUDE PASQUIER,YANN BONNEVILLE",description:"Le refuge est situé sur les bords du lac Long Supérieur, au coeur de la vallée des Merveilles. Entre Mont Bego et Cime du Diable, vous serez témoin de l'histoire en vous rendant sur le lieux. Là, des dizaines de milliers de gravures rupestres sont visible à plus de 2000m d'altitude.",urls:["http://refugedesmerveilles.ffcam.fr","http://refugedesmerveilles.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:88",name:"Refuge des Merveilles  (FFCAM)",shortName:"Merveilles",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||BOREON||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:30,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est non gardé pendant cette période.",completeInfo:"Le refuge est complet pendant cette période. N'hésitez pas à vous inscrire sur la liste d'attente.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedesmerveilles<a></a><ff></ff><d></d><fr></fr>",phone:"Eté:<sp></sp><p9></p9><sp></sp>70<sp></sp><p3></p3><sp></sp>59<sp></sp><p2></p2>0",maxDate:"2026-08-07",oid:"BK_STRUCTURE:88",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:38":{name:"REFUGE DU MONT POURRI (FFCAM)",lat:45.528058,lng:6.826874,altitude_m:2370,places:39,gardien:"LAURENT JULIEN",description:"A la frontière Nord du Parc National de la Vanoise, le refuge est dominé par les 3779 m du Mont Pourri, troisième plus haut sommet de Savoie.",urls:["http://refugedumontpourri.ffcam.fr","http://refugedumontpourri.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:38",name:"Refuge du Mont Pourri  (FFCAM)",shortName:"Mont Pourri",allowedOrigins:"||MSFFCAM||FFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:8,showAvailable:"1",waitingList:"1",unguardedInfo:"Refuge non gardé : vous y trouverez matelas, couvertures, oreillers,  vaisselles, casseroles, gazinière, poele à bois et bois. La fontaine extérieure fournit de l'eau  potable .Les nuitées, et les participations au gaz et au bois sons sont a payer dans le tronc ou par envoi postal.au gardien.",completeInfo:"Aucunes places disponibles à la réservation en ligne, mais il peut en rester auprès du gardien (04 790 790 43) suite à des annulations. Sinon, vous pouvez vous inscrire sur la liste d'attente.",fullWebInfo:"Aucunes places disponibles à la réservation en ligne, mais il peut en rester auprès du gardien (04 790 790 43) suite à des annulations. Sinon, vous pouvez vous inscrire sur la liste d'attente",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedumontpourri<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>79<sp></sp><p7></p7><sp></sp>90<sp></sp>43",maxDate:"2026-08-07",oid:"BK_STRUCTURE:38",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:60":{name:"REFUGE DU MONT THABOR (FFCAM)",lat:45.123452,lng:6.599808,altitude_m:2490,places:46,gardien:"LUDOVIC SAINTENOY,CHARLINE PERSIA",description:"Au carrefour de la Maurienne, de la Vallée Etroite, de Nevache, un site néanmoins isolé dans une combe «haute montagne» adoucie par la présence des lacs Ste Marguerite.",urls:["http://refugedumontthabor.ffcam.fr","http://refugedumontthabor.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:60",name:"Refuge du Mont Thabor  (FFCAM)",shortName:"Mont Thabor",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:4,maxPax:40,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge est en mode Hors Gardiennage, aucune réservation est prise à l'avance.\r
Pour plus d'information, merci d'appeler le numéro du refuge ou de nous envoyer un mail.`,completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedumontthabor<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>77<sp></sp>49<sp></sp>9<p2></p2><sp></sp><p7></p7>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:60",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:90":{name:"REFUGE DE NICE (FFCAM)",lat:44.1044,lng:7.400381,altitude_m:2232,places:54,gardien:"CHRISTOPHE FOURNIER",description:"Entouré par les plus hauts sommets et leurs neiges éternelles du parc national du Mercantour, ce refuge vous offrira une halte agréable sur sa terrasse panoramique dominant le lac de la Fous.",urls:["http://refugedenice.ffcam.fr","http://refugedenice.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:90",name:"Refuge de Nice  (FFCAM)",shortName:"Nice",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||BOREON||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:54,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est gardé uniquement sur réservation à cette période. Renseignements au 06 61 97 59 38.",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedenice<a></a><ff></ff><d></d><fr></fr>",phone:"",maxDate:"2026-08-07",oid:"BK_STRUCTURE:90",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:70":{name:"REFUGE DE L'OLAN (FFCAM)",lat:44.841515,lng:6.204423,altitude_m:2332,places:54,gardien:"EMILIE CREUSOT",description:"Au pied de la face sud-est de l'Olan (3558 m), de la cime du Vallon (3409 m) et de la Rouye (3085 m), le belvédère du refuge plaira aussi bien au randonneur venu découvrir le massif qu'à l'alpiniste faisant étape.",urls:["http://refugedelolan.ffcam.fr","http://refugedelolan.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:70",name:"Refuge de l'Olan  (FFCAM)",shortName:"Olan",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:15,showAvailable:"2",waitingList:"2",unguardedInfo:`En dehors des périodes de gardiennage, vous pourrez profiter du refuge d'hiver (10 places). Vous y trouverez des matelas et des couvertures. \r
Un tronc pour payer votre nuitée (8 euros).\r
Pour information il n'y a ni gaz ni chauffage au refuge d'hiver. \r
Merci de respecter les lieux.\r
Et, bonne montagne à vous !`,completeInfo:"Merci de contacter le refuge de l'Olan  par téléphone au 06 07 66 43 25.",fullWebInfo:"Merci de contacter le refuge de l'Olan  par téléphone au 06 07 66 43 25.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedelolan<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp><p7></p7><sp></sp>66<sp></sp>43<sp></sp><p2></p2>5",maxDate:"2026-08-07",oid:"BK_STRUCTURE:70",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:117":{name:"REFUGE DES OULETTES DE GAUBE (FFCAM)",lat:42.792918,lng:-.141429,altitude_m:2151,places:95,gardien:"CLAIRE BODIN,AURORE MEYER",description:"De son promontoire granitique entièrement rénové le refuge offre une des plus belles vues sur le massif de Vignemale. On peut admirer sa face nord, Piton Carré, l'aiguille des Glaciers, Chausenque. On y accède par la vallée de Gaube depuis le pont d'Espagne.",urls:["http://refugeoulettesdegaube.ffcam.fr","http://refugeoulettesdegaube.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:117",name:"Refuge des Oulettes de Gaube  (FFCAM)",shortName:"Oulettes de Gaube",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:20,showAvailable:"1",waitingList:"1",unguardedInfo:"Une partie hiver reste ouverte lorsque le refuge est non gardé. Vous y trouverez un dortoir, et un poêle avec du bois disponible pour se chauffer.",completeInfo:"Aie Aie Aie le refuge est complet ! Essayez à d'autres dates !",fullWebInfo:"Plus de place au refuge sur notre « stock Internet ». Appelez nous, il reste peut-être des places sur notre « stock Gardien» !",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeoulettesdegaube<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>(0)9<sp></sp>88<sp></sp><p1></p1>8<sp></sp>4<p1></p1><sp></sp>46<sp></sp>(Pas<sp></sp>de<sp></sp>réservation<sp></sp>par<sp></sp>mail,<sp></sp>merci)",maxDate:"2026-08-07",oid:"BK_STRUCTURE:117",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:17":{name:"REFUGE DU PARMELAN (FFCAM)",lat:45.946228,lng:6.240074,altitude_m:1825,places:45,gardien:"PHILIPPE GRAHAM",description:"En bordure de falaise au-dessus du hameau de la Blonnière le panorama est admirable sur le bassin annecien, sur les Aravis, sur la chaîne du Mont Blanc. Aux pieds du visiteur la flore est exceptionnelle, ainsi que les lapiaz.",urls:["http://refugeduparmelan.ffcam.fr","http://refugeduparmelan.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:17",name:"Refuge du Parmelan  (FFCAM)",shortName:"Parmelan",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:12,showAvailable:"1",waitingList:"2",unguardedInfo:"Désolé, le refuge n'est pas gardé à cette date (vous pouvez consulter notre période d'ouverture sur la page d'accueil).",completeInfo:"Veuillez nous appelez directement au refuge (06 16 59 83 00) pour une réservation à cette date (il nous reste peut-être encore des places).",fullWebInfo:"Veuillez nous appelez directement au refuge (06 16 59 83 00) pour une réservation à cette date (il nous reste peut-être encore des places).",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeduparmelan<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp><p1></p1>6<sp></sp>59<sp></sp>83<sp></sp>00",maxDate:"2026-08-07",oid:"BK_STRUCTURE:17",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:84":{name:"REFUGE DU PAVÉ (FFCAM)",lat:44.985904,lng:6.32858,altitude_m:2858,places:30,gardien:"PAULINE MULLER",description:"Au coeur d'un cirque de haute montagne entre le Pavé, Roche Méane et le Pic Gaspard, sur les rives d'un lac glaciaire, ce petit refuge propose un voyage aux airs himalayens dans une des vallées les plus secrètes et sauvages du massif des Ecrins.",urls:["http://refugedupave.ffcam.fr","http://refugedupave.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:84",name:"Refuge du Pavé  (FFCAM)",shortName:"Pavé",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:99,showAvailable:"1",waitingList:"2",unguardedInfo:"",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedupave<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>(0)9<sp></sp>88<sp></sp><p1></p1>8<sp></sp><p2></p2>0<sp></sp>96",maxDate:"2026-08-07",oid:"BK_STRUCTURE:84",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:50":{name:"REFUGE DE PÉCLET-POLSET",lat:45.289372,lng:6.659219,altitude_m:2479,places:84,gardien:"GERARD-ANDRE VILLIOD",description:"Au coeur du Parc National de la Vanoise, le refuge de Peclet Polset est situé dans un site reposant, à proximité du lac Blanc. Il est dominé par la masse imposante des aiguilles de Peclet et de Polset et des glaciers de la Vanoise. Le refuge est neuf, clair et confortable.",urls:["http://refugepecletpolset.ffcam.fr","http://refugepecletpolset.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:50",name:"Refuge de Péclet-Polset",shortName:"Péclet-Polset",allowedOrigins:"||MSFFCAM||FFCAM||VANOISE||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:84,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge n'est plus gardé à cette date, le refuge d'hiver est ouvert et accessible, il se trouve au rez de chaussé, sous la terrasse. Il comporte 16 place équipées de couvertures, un poêle à bois et du bois !  du gaz, de la vaisselle et des casseroles. Le prix est de 8.00 euros/pers à payer sur place dans le tronc.\r
Bonne randonnée`,completeInfo:"Le refuge est complet à cette date, nous vous conseillons de si possible de modifier votre circuit, en cas d'impossibilité, vous pouvez vous inscrire sur la « liste d'attente » (en cas de libération de places vous serez avertis directement par mail. Attention, dans ce cas tous les inscrits seront avertis ,les places iront aux premiers à valider leur réservations en ligne.",fullWebInfo:"Le refuge est complet à cette date, nous vous conseillons de si possible de modifier votre circuit, en cas d'impossibilité, vous pouvez vous inscrire sur la « liste d'attente » (en cas de libération de places vous serez avertis directement par mail. Attention, dans ce cas tous les inscrits seront avertis ,les places iront aux premiers à valider leur réservations en ligne.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugepecletpolset<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>63<sp></sp>68<sp></sp>46<sp></sp>9<p2></p2>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:50",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:79":{name:"REFUGE DU PELVOUX (FFCAM)",lat:44.882652,lng:6.405662,altitude_m:2694,places:54,gardien:"MATHIEU JAUDON",description:"Haut lieu de l'histoire de l'alpinisme dans le massif des Ecrins, le refuge du Pelvoux vous accueille au coeur des paysages de haute montagne. Randonneurs, grimpeurs alpinistes s'y retrouvent le temps d'une nuit en refuge.",urls:["http://refugedupelvoux.ffcam.fr","http://refugedupelvoux.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:79",name:"Refuge du Pelvoux  (FFCAM)",shortName:"Pelvoux",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:4,maxPax:99,showAvailable:"2",waitingList:"2",unguardedInfo:"Le refuge est non gardé, pas de réservation possible. 10 places disponibles dans le dortoir d'hiver. Pas d'eau ni de gaz, quelques ustensiles de cuisine seulement.",completeInfo:"Complet à la réservation en ligne, n'hésitez pas à appeler au +33 (0)9 70 02 05 74  pour vérifier les disponibilités.",fullWebInfo:"Complet à la réservation en ligne, n'hésitez pas à appeler au +33 (0)9 70 02 05 74  pour vérifier les disponibilités.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedupelvoux<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>70<sp></sp>0<p2></p2><sp></sp><p5></p5><sp></sp>74",maxDate:"2026-08-07",oid:"BK_STRUCTURE:79",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:69":{name:"REFUGE DU PIGEONNIER (FFCAM)",lat:44.854884,lng:6.284918,altitude_m:2423,places:52,gardien:"OLIVIER PARENT",description:"Le refuge du Pigeonnier, perché à l'extrémité de la Crête de l'Orient, est situé aux confins de la vallée du Valgaudemar, dans le massif des Ecrins.",urls:["http://refugedupigeonnier.ffcam.fr","http://refugedupigeonnier.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:69",name:"Refuge du Pigeonnier  (FFCAM)",shortName:"Pigeonnier",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"270",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:11,showAvailable:"2",waitingList:"1",unguardedInfo:"20 places disponibles sans réservation",completeInfo:"Complet pour la réservation en ligne, mais n'hésitez pas à joindre le 04.92.55.27.82, pour les dernières places disponibles.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedupigeonnier<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>55<sp></sp><p2></p2>7<sp></sp>8<p2></p2>",maxDate:"2026-05-04",oid:"BK_STRUCTURE:69",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:4":{name:"CHALET DU PLAIN DU CANON (FFCAM)",lat:47.8365,lng:6.8253,altitude_m:819,places:12,gardien:null,description:"Le chalet du Plain du Canon est un hébergement insolite. Ce petit bâtiment en bois, construit en 1938, est implanté en bord de clairière d'une forêt domaniale, sur les pentes NW du Ballon d'Alsace.",urls:["http://chaletplainducanon.ffcam.fr","http://chaletplainducanon.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:4",name:"Chalet du Plain du Canon  (FFCAM)",shortName:"Plain du Canon",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"0",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:99,maxPax:12,showAvailable:"1",waitingList:"1",unguardedInfo:"Pour effectuer une réservation vous pouvez appeler le 06 70 35 63 17 ou envoyer une demande par mail à: chaletplainducanon@ffcam.fr.",completeInfo:"Liste d'attente à disposition",fullWebInfo:"Le refuge n'est pas encore adapté aux conformité liées à la crise sanitaire",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"chaletplainducanon<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>70<sp></sp>35<sp></sp>63<sp></sp><p1></p1>7",maxDate:"2026-08-07",oid:"BK_STRUCTURE:4",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:40":{name:"REFUGE DU PLAN DES GOUILLES (FFCAM)",lat:45.444161,lng:6.743178,altitude_m:2346,places:40,gardien:"SABRINA ANDRE",description:"Dans le massif de la Vanoise, le refuge du Plan des Gouilles est un hébergement isolé, calme et chaleureux sur une belle terrasse dominant la vallée de Champagny, au pied du versant glaciaire du Grand Bec.",urls:["http://refugeplandesgouilles.ffcam.fr","http://refugeplandesgouilles.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:40",name:"Refuge du Plan des Gouilles  (FFCAM)",shortName:"Plan des Gouilles",allowedOrigins:"||MSFFCAM||FFCAM||",resaLimit:"4",minDate:"2025-08-11",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:40,showAvailable:"2",waitingList:"2",unguardedInfo:`Le refuge contient 28 places, du bois, du gaz et de la vaisselle propre est mis à votre disposition. Le prix de la nuitée est de 8 € par personne et par nuit à mettre dans le tronc prévu à cet effet.\r
Merci de laisser le refuge propre, de redescendre vos déchets et de bien pensez à fermer à clefs volets et fenêtres et de sortir par le dortoir qui se trouve à l'étage.`,completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeplandesgouilles<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp><p8></p8><sp></sp>98<sp></sp><p1></p1>9<sp></sp>0<p2></p2>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:40",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:20":{name:"REFUGE DE PLATÉ (FFCAM)",lat:45.965618,lng:6.717278,altitude_m:2032,places:34,gardien:"ROMAIN BONNET",description:"Le refuge est implanté dans un domaine géologique unique en Europe, paysage d'aspect quasi lunaire avant tout minéral: le fascinant désert de Platé. Au milieu des Lapiaz il accueille randonneurs et amoureux de la nature.",urls:["http://refugedeplate.ffcam.fr","http://refugedeplate.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:20",name:"Refuge de Platé  (FFCAM)",shortName:"Platé",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:10,showAvailable:"1",waitingList:"2",unguardedInfo:"Hors période de gardiennage, le refuge d'hiver est ouvert.",completeInfo:"Le refuge est complet à cette date, vous pouvez tout de même appeler le refuge en cas de désistement au 06 63 62 42 90.",fullWebInfo:"Le refuge est complet à cette date, vous pouvez tout de même appeler le refuge en cas de désistement au 06 63 62 42 90.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedeplate<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>63<sp></sp>6<p2></p2><sp></sp>4<p2></p2><sp></sp>90",maxDate:"2026-08-07",oid:"BK_STRUCTURE:20",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:18":{name:"REFUGE DE LA POINTE PERCÉE - GRAMUSSET (FFCAM)",lat:45.9556,lng:6.5442,altitude_m:2164,places:49,gardien:"CLARISSE BINETRUY",description:"Situé à 2164 mètres d'altitude, sur la commune du Grand-Bornand en Haute-Savoie, au milieu d'un environnement très minéral formé de nombreux lapiaz, le refuge est le point de départ des diverses voies d'accès au sommet de la Pointe Percée 2752 m",urls:["http://refugelapointepercee.ffcam.fr","http://refugelapointepercee.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:18",name:"Refuge de La Pointe Percée - Gramusset (FFCAM)",shortName:"Pointe Percée - Gramusset",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:14,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est non gardé, veuillez consulter les informations concernant cette période dans la rubrique accueil.",completeInfo:`Bonjour, \r
Le refuge est complet! N'hésitez pas à vous inscrire en liste d'attente afin de pouvoir être informé de désistements et ainsi disposer d'une place. \r
À très bientôt à la Pointe Percée!`,fullWebInfo:`Bonjour, \r
Le refuge est complet! N'hésitez pas à vous inscrire en liste d'attente afin de pouvoir être informé de désistements et ainsi disposer d'une place. \r
À très bientôt à la Pointe Percée!`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugelapointepercee<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>58<sp></sp><p1></p1>7<sp></sp><p5></p5><sp></sp>98",maxDate:"2026-08-07",oid:"BK_STRUCTURE:18",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:106":{name:"REFUGE DE POMBIE (FFCAM)",lat:42.835504,lng:-.42694,altitude_m:2032,places:45,gardien:"KARINE DEPEYRE,JEAN-MARC FERRI",description:"Le refuge est situé en plein coeur du Parc National des Pyrénées, en haute vallée d'Ossau, au pied de la face sud-est du pic du Midi d'Ossau, entre milieu pastoral et haute montagne.",urls:["http://refugedepombie.ffcam.fr","http://refugedepombie.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:106",name:"Refuge de Pombie  (FFCAM)",shortName:"Pombie",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:15,showAvailable:"2",waitingList:"2",unguardedInfo:"Voir les conditions sur http://refugedepombie.ffcam.fr",completeInfo:`Appeler le refuge +33(0)972192380 de juin a septembre\r
Par mail refugedepombie@ffcam.fr de octobre a Mai`,fullWebInfo:`Appeler le refuge +33(0)972192380 de juin a septembre\r
Par mail refugedepombie@ffcam.fr de octobre a Mai`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedepombie<a></a><ff></ff><d></d><fr></fr>",phone:"+33<sp></sp>9<sp></sp>7<p2></p2><sp></sp><p1></p1>9<sp></sp><p2></p2>3<sp></sp>80<sp></sp>avant<sp></sp><p1></p1>8h30",maxDate:"2026-08-07",oid:"BK_STRUCTURE:106",productsCategories:[{oid:"BK_PRODUCTCATEGORY:AUTRES",title:"Autres"},{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:109":{name:"REFUGE DU PORTILLON (FFCAM)",lat:42.704253,lng:.508185,altitude_m:2570,places:80,gardien:"REGIS GATTI",description:"Dans les Pyrénées, le refuge du Portillon, situé près du lac du même nom, est le lieu idéal des amateurs de haute montagne, du débutant au confirmé.",urls:["http://refugeduportillon.ffcam.fr","http://refugeduportillon.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:109",name:"Refuge du Portillon  (FFCAM)",shortName:"Portillon",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:12,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est actuellement non gardé. La partie hiver est disponible hors réservation. (30 places, couvertures, oreillers, salle commune avec électricité et chauffage)",completeInfo:"Toutes les places disponibles à la réservation en ligne sont attribuées. Merci de vous inscrire sur liste d'attente en remplissant le formulaire ci-dessous.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeduportillon<a></a><ff></ff><d></d><fr></fr>",phone:"<p9></p9><sp></sp>88<sp></sp>66<sp></sp>99<sp></sp>67",maxDate:"2026-08-07",oid:"BK_STRUCTURE:109",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:61":{name:"REFUGE DU PRÉ LA CHAUMETTE (FFCAM)",lat:44.765328,lng:6.327563,altitude_m:1803,places:60,gardien:"THOMAS BRIERRE",description:"Construit en 1979, le refuge du Pré de la Chaumette se situe au fond de la vallée de Champoléon, au sein du Parc national des Écrins à une altitude de 1 810 mètres.",urls:["http://refugepredelachaumette.ffcam.fr","http://refugepredelachaumette.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:61",name:"Refuge du Pré la Chaumette  (FFCAM)",shortName:"Pré la Chaumette",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:9,showAvailable:"2",waitingList:"2",unguardedInfo:"",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugepredelachaumette<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>55<sp></sp>95<sp></sp>34",maxDate:"2026-08-07",oid:"BK_STRUCTURE:61",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:37":{name:"REFUGE DE PRESSET (FFCAM)",lat:45.648308,lng:6.663901,altitude_m:2514,places:30,gardien:"CHARLOTTE BELLEDENT,JEAN PHILIPPE GAULT",description:"Au coeur du Beaufortain, le nouveau refuge de Presset vous accueille avec son dortoir confortable et atypique, et ses grandes baies vitrées. Il permet de profiter du lac de Presset et d'admirer la Pierra Menta.",urls:["http://refugedepresset.ffcam.fr","http://refugedepresset.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:37",name:"Refuge de Presset  (FFCAM)",shortName:"Presset",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:30,showAvailable:"1",waitingList:"1",unguardedInfo:`Le refuge est non gardé à cette date, il n'y a pas de réservation officielle.\r
Toutefois il est conseillé de contacter la gardienne pour les samedis, veilles de jour férié\r
et période de vacances scolaires afin d'éviter la surfréquentation.`,completeInfo:`Le refuge est complet à cette date, il est possible de s'inscrire sur liste d'attente. Vous\r
serez alors automatiquement prévenu par mail si des places se libèrent ; les plus réactifs\r
seront servis.`,fullWebInfo:`Le refuge est complet à cette date, il est possible de s'inscrire sur liste d'attente. Vous\r
serez alors automatiquement prévenu par mail si des places se libèrent ; les plus réactifs\r
seront servis.`,typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedepresset<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>87<sp></sp>54<sp></sp><p9></p9><sp></sp><p1></p1>8",maxDate:"2026-08-07",oid:"BK_STRUCTURE:37",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:75":{name:"REFUGE DU PROMONTOIRE (FFCAM)",lat:44.99841,lng:6.303536,altitude_m:3092,places:30,gardien:"SANDRINE DELORME",description:`Difficile de faire plus "refuge" que le Promontoire ! Accroché aux rochers, sur l'arête qui monte à la Meije, il est comme une proue de navire dominant l'à-pic. C'est un refuge d'alpinistes mais aussi une merveilleuse excursion pour randonneurs aguerris`,urls:["http://refugedupromontoire.ffcam.fr","http://refugedupromontoire.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:75",name:"Refuge du Promontoire  (FFCAM)",shortName:"Promontoire",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"4",minDate:"2025-08-11",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:6,showAvailable:"2",waitingList:"2",unguardedInfo:"Le refuge n'est plus gardé. Il reste à votre disposition le refuge d'hiver (24 places). Prévoir un réchaud et du gaz. Sur place vous aurez matelas et couettes. Il n'y a pas de chauffage. Informations auprès des gardiens 04 76 51 90 31 et sur le site www.refugedupromontoire.com",completeInfo:"Les places allouées à la réservation en ligne sont toutes occupées. Mais la réservation est ENCORE POSSIBLE au 04 76 80 51 67 (refuge).",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedupromontoire<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>76<sp></sp>80<sp></sp>5<p1></p1><sp></sp>67%%Hors<sp></sp>saison<sp></sp><p6></p6><sp></sp><p1></p1>9<sp></sp>70<sp></sp><p1></p1>3<sp></sp>35<sp></sp>(contact<sp></sp>WhatsApp<sp></sp>possible<sp></sp>en<sp></sp>saison)",maxDate:"2026-08-07",oid:"BK_STRUCTURE:75",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:93":{name:"REFUGE DE RABUONS (FFCAM)",lat:44.26846,lng:6.978122,altitude_m:2523,places:36,gardien:"CHARLY BARCELO",description:"Le refuge est situé dans le site le plus alpin, mais méconnu, des Alpes Maritimes. Au centre d'un cadre minéral et au bord d'un grand et profond lac de montagne (100 m), ce petit refuge aux murs de pierre, est une étape vers des traversées passionnantes en raison des panoramas qu'elles offrent.",urls:["http://refugederabuons.ffcam.fr","http://refugederabuons.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:93",name:"Refuge de Rabuons  (FFCAM)",shortName:"Rabuons",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:25,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est non gardé pendant cette période.",completeInfo:"Le refuge est complet pendant cette période. N'hésitez pas à vous inscrire sur la liste d'attente.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugederabuons<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>93<sp></sp><p2></p2>3<sp></sp><p4></p4><sp></sp><p1></p1><p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:93",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:103":{name:"CHALET DE SAINT-GUILHEM-LE-DÉSERT (FFCAM)",lat:43.734141,lng:3.549232,altitude_m:89,places:18,gardien:"CATHERINE LACROIX",description:"Situé sur le GR 74 et le chemin de Saint jacques de Compostelle, à deux pas de l'abbaye de Gellone, notre hébergement est un point de départ pour de nombreuses aventures, en randonnée, en escalade ou en spéléologie.",urls:["http://refugestguilhemledesert.ffcam.fr","http://refugestguilhemledesert.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:103",name:"Chalet de Saint Guilhem le Désert  (FFCAM)",shortName:"Saint-Guilhem-le-Désert",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:15,maxPax:18,showAvailable:"1",waitingList:"1",unguardedInfo:"",completeInfo:"Le gîte est complet, inscrivez-vous sur la liste d'attente ou contactez la gardienne",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"refugestguilhemledesert<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>67<sp></sp><p2></p2>9<sp></sp>39<sp></sp>98",maxDate:"2026-08-07",oid:"BK_STRUCTURE:103",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:101":{name:"CHALET DU SANCY (FFCAM)",lat:45.5471,lng:2.815605,altitude_m:1275,places:39,gardien:null,description:"Situé au coeur des monts d'Auvergne, au pied des cîmes du Sancy et à proximité des sources de la Dordogne, ce centre séduira les passionnés de montagne autant que les amateurs de nature et de calme .",urls:["http://chaletdusancy.ffcam.fr","http://chaletdusancy.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:101",name:"Chalet du Sancy  (FFCAM)",shortName:"Sancy",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"0",minDate:"2025-08-07",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:8,showAvailable:"2",waitingList:"1",unguardedInfo:"",completeInfo:"",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CENTRE",groupement:"BK_GROUP:CAF",email:"chaletdusancy<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>73<sp></sp><p2></p2><p2></p2><sp></sp>34<sp></sp>8<p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:101",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:78":{name:"REFUGE DU SÉLÉ (FFCAM)",lat:44.87336,lng:6.390517,altitude_m:2504,places:76,gardien:"SOPHIE LOOS",description:"Perché sur une barre rocheuse impressionnante, fermant le vallon de Celse-Nière, le refuge du Selé (2511 m) fut construit en 1983 dans le site de rochers et de glace du glacier du Sélé, sans doute un des plus sauvages du massif des Ecrins.",urls:["http://refugedusele.ffcam.fr","http://refugedusele.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:78",name:"Refuge du Sélé  (FFCAM)",shortName:"Sélé",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:6,maxPax:18,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est non gardé. Vous pouvez vous rendre au refuge d'hiver du Sélé, en gestion autonome. Merci de prendre soin de ce lieu.",completeInfo:"Toutes les places sont déjà réservées pour le jour demandé. Vous pouvez soit décaler votre séjour, à une date disponible, soit vous inscrire sur liste d'attente qui vous tiendra informé dès qu'une place sera libérée.",fullWebInfo:"Toutes les places disponibles à la réservation en ligne sont réservées. Appelez nous au refuge, il reste peut-être des places!",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedusele<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp><p2></p2>3<sp></sp>39<sp></sp>49",maxDate:"2026-08-07",oid:"BK_STRUCTURE:78",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"},{oid:"BK_PRODUCTCATEGORY:RESTAURATION",title:"Restauration"}]}},"BK_STRUCTURE:9":{name:"CHALET DES TUFFES (FFCAM)",lat:46.450366,lng:6.07568,altitude_m:1250,places:43,gardien:"VALENTIN LARDERET",description:"Au coeur du Parc naturel du Haut Jura, sur la frontière franco-suisse, Le chalet des Tuffes est un agréable batisse totalement rénovée. Entre la montagne des Tuffes et la Dole (1680 m) vous accèderez à l'un des plus beaux domaines nordique français.... Sur les traces de la célèbre Transjurassienne, ou pour randonner en toute liberté à ski, en raquette, à pied ou à vélo ! Le paradis en or blanc ou les alpages jurassien, choisissez votre saison!",urls:["http://chaletlestuffes.ffcam.fr","http://chaletlestuffes.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:9",name:"Chalet des Tuffes  (FFCAM)",shortName:"Tuffes",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"4",minDate:"2025-08-11",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:7,maxPax:6,showAvailable:"1",waitingList:"2",unguardedInfo:`Le chalet est fermé. \r
Merci de nous laisser un courriel, nous vous contacterons dès notre retour.`,completeInfo:`Le Centre est complet pendant cette période.\r
Un désistement est toujours possible, donc appelez moi au 06.14.79.93.51`,fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CENTRE",groupement:"BK_GROUP:CAF",email:"chaletlestuffes<a></a><ff></ff><d></d><fr></fr>",phone:"<p3></p3><sp></sp>84<sp></sp>60<sp></sp>0<p2></p2><sp></sp>95%%<p6></p6><sp></sp>30<sp></sp>46<sp></sp>88<sp></sp>46",maxDate:"2026-08-07",oid:"BK_STRUCTURE:9",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:62":{name:"REFUGE DE VALLONPIERRE (FFCAM)",lat:44.798485,lng:6.289191,altitude_m:2262,places:39,gardien:"GUILLAUME BAILLY",description:"Au coeur du Massif des Ecrins, dans le valgaudemar, le refuge de Vallonpierre se situe au bord d'un agréable lac de montagne. Il fait face au sommet du Sirac qui culmine à plus de 3400m.",urls:["http://refugevallonpierre.ffcam.fr","http://refugevallonpierre.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:62",name:"Refuge de Vallonpierre  (FFCAM)",shortName:"Vallonpierre",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"3",minDate:"2025-08-10",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:99,maxPax:15,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge n'est actuellement pas gardé mais il est accessible. A  votre disposition : 19 places de couchages, du gaz, du matériel de cuisine et un poêle à bois. La redevance due pour une nuitée est de 8 euros par personne (tronc dans le refuge). En hiver, l'accès est très difficile et peut être soumis à un risque fort d'avalanche. Pour tous renseignements, n'hésitez pas à nos appeler au 04 92 55 27 81",completeInfo:"Appelez nous au 04 92 55 27 81, nous pouvons vous proposez des solutions pour venir dans notre belle région.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugevallonpierre<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>55<sp></sp><p2></p2>7<sp></sp>8<p1></p1>",maxDate:"2026-08-07",oid:"BK_STRUCTURE:62",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:89":{name:"REFUGE DE LA VALMASQUE (FFCAM)",lat:44.10815,lng:7.446678,altitude_m:2233,places:52,gardien:"CATHERINE DEBRAY",description:"Le refuge de Valmasque est situé au coeur du Parc National du Mercantour, sur les bords du Lac Vert, au-dessus du haut du vallon de la Valmasque. Dans un univers de roches et de pelouse alpine, ce refuge réconfortant rénové en 1984, est ouvert sur une grande et belle terrasse.",urls:["http://refugedevalmasque.ffcam.fr","http://refugedevalmasque.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:89",name:"Refuge de la Valmasque  (FFCAM)",shortName:"Valmasque",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||BOREON||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:3,maxPax:20,showAvailable:"1",waitingList:"1",unguardedInfo:"Le refuge est non gardé pendant cette période.",completeInfo:"Merci de vous inscrire sur la liste d'attente",fullWebInfo:"Merci de contacter la gardienne par mail",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedevalmasque<a></a><ff></ff><d></d><fr></fr>",phone:"",maxDate:"2026-08-07",oid:"BK_STRUCTURE:89",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:104":{name:"CHALET DE VAUCHIGNON (FFCAM)",lat:46.97639,lng:4.64361,altitude_m:350,places:24,gardien:null,description:"Le seul sîte FFCAM de Bourgogne, situé à proximité des falaises d'escalade de Cormot, du chemin de randonnée Jean-Marc Boivin et GR7.",urls:["http://chaletvauchignon.ffcam.fr","http://chaletvauchignon.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:104",name:"Chalet de Vauchignon  (FFCAM)",shortName:"Vauchignon",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"1",maxDays:7,maxPax:24,showAvailable:"1",waitingList:"2",unguardedInfo:"Le site de VAUCHIGNON n est pas gardé .",completeInfo:"Complet",fullWebInfo:"Complet",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:CHALET",groupement:"BK_GROUP:CAF",email:"chaletvauchignon<a></a><ff></ff><d></d><fr></fr>",phone:"",maxDate:"2026-08-07",oid:"BK_STRUCTURE:104",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:108":{name:"REFUGE DE VÉNASQUE (FFCAM)",lat:42.699625,lng:.642222,altitude_m:2249,places:36,gardien:"CLARA CROAIN",description:"Installé au milieu d'un parterre de lacs, le refuge de Vénasque est une étape idéale sur la classique promenade au port de Venasque d'où l'on découvre une vue magnifique sur la Madaletta et l'Aneto, point culminant des Pyrénées.",urls:["http://refugedevenasque.ffcam.fr","http://refugedevenasque.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:108",name:"Refuge de Vénasque  (FFCAM)",shortName:"Vénasque",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||ENTREPYRPYRENEES||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:8,showAvailable:"2",waitingList:"1",unguardedInfo:"Le refuge est non gardé à la date souhaitée. Une partie du refuge reste donc ouverte pour vous abriter, mais personne n'est sur place pour vous accueillir : vous devez être en totale autonomie (matériel, équipement, nourriture).",completeInfo:"Le refuge est complet à la date souhaitée. Nous vous invitons à rechercher une autre date, où à vous inscrire sur liste d'attente (attention, pas de garantie d'avoir une place dans ce cas).",fullWebInfo:"Le refuge est presque complet : nous vous invitons à appeler au refuge pour voir si des places sont disponibles.",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedevenasque<a></a><ff></ff><d></d><fr></fr>",phone:"En<sp></sp>gardiennage<sp></sp>:<sp></sp><p9></p9><sp></sp>87<sp></sp>88<sp></sp><p1></p1>4<sp></sp>69%%hors<sp></sp>gardiennage<sp></sp>:<sp></sp><p6></p6><sp></sp>89<sp></sp>49<sp></sp>8<p2></p2><sp></sp><p2></p2>7",maxDate:"2026-08-07",oid:"BK_STRUCTURE:108",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:95":{name:"REFUGE DES LACS DE VENS (FFCAM)",lat:44.316702,lng:6.941953,altitude_m:2380,places:45,gardien:"CLAIRE LESENS,ANTOINE ARNAUD",description:"Le refuge de Vens est situé dans un des sites le plus prestigieux du Parc du Mercantour. Un environnement de lacs naturels, de cascades dans un ancien cirque glaciaire, une pelouse alpine riche, une faune nombreuse et variée (mouflons, chamois, aigle...).",urls:["http://refugedevens.ffcam.fr","http://refugedevens.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:95",name:"Refuge des Lacs de Vens  (FFCAM)",shortName:"Vens",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"2",minDate:"2025-08-09",bookingDelay:"365",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:5,maxPax:35,showAvailable:"1",waitingList:"1",unguardedInfo:"Nous contacter par mail",completeInfo:"Possibilité de s'inscrire sur la liste d'attente",fullWebInfo:"Nous contacter par mail ou par téléphone",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugedevens<a></a><ff></ff><d></d><fr></fr>",phone:"<p6></p6><sp></sp>37<sp></sp>67<sp></sp>9<p1></p1><sp></sp>74",maxDate:"2026-08-07",oid:"BK_STRUCTURE:95",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}},"BK_STRUCTURE:96":{name:"REFUGE DU VISO (FFCAM)",lat:44.70043,lng:7.051468,altitude_m:2460,places:65,gardien:"ANSELME ROUX",description:"En plein coeur du massif du Queyras, tout près de la frontière italienne, le Refuge du Viso est dominé par l'impressionant Mont Viso, qui culmine à 3841m.",urls:["http://refugeduviso.ffcam.fr","http://refugeduviso.ffcam.fr/tarifs.html"],backend:{structure:"BK_STRUCTURE:96",name:"Refuge du Viso  (FFCAM)",shortName:"Viso",allowedOrigins:"||MSFFCAM||FFCAM||ITFFCAM||",resaLimit:"1",minDate:"2025-08-08",bookingDelay:"300",salesChannel:["BK_SALESCHANNEL:DIRECT","BK_SALESCHANNEL:WEB"],openingHour:"00:00:00",unguarded:"2",maxDays:2,maxPax:40,showAvailable:"2",waitingList:"2",unguardedInfo:"Le refuge est actuellement non gardé.",completeInfo:"Désolé, le refuge est complet pour la date souhaitée.",fullWebInfo:"",typeMontBlanc:"2",structureType:"BK_STRUCTURECATEGORY:REFUGE",groupement:"BK_GROUP:CAF",email:"refugeduviso<a></a><ff></ff><d></d><fr></fr>",phone:"<p4></p4><sp></sp>9<p2></p2><sp></sp>46<sp></sp>8<p1></p1><sp></sp>8<p1></p1>",maxDate:"2026-06-03",oid:"BK_STRUCTURE:96",productsCategories:[{oid:"BK_PRODUCTCATEGORY:NUITEE",title:"Dortoirs"}]}}};delete Ze.Icon.Default.prototype._getIconUrl;let Ts=[],Ct=_h(),xe,et,As=[];const Eh=document.getElementById("info-panel").outerHTML,gr=document.getElementById("info-panel"),wh=document.getElementById("date-picker");function be(c){return String(c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function _h(){let c=new Date,e=new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"Europe/Paris"}),[t,s,n]=e.format(c).split("/");return`${n}-${s}-${t}`}const Rh=Ze.icon({iconUrl:bh,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:mr}),yh=Ze.icon({iconUrl:vh,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:mr});function Th(c){return c==null?'<span class="unknown">?</span>':c>0?`<span class="available">${be(c)}</span>`:'<span class="unavailable">0</span>'}function br(c){var n;const e=(n=c.availability)==null?void 0:n[Ct],t=e??"?";let s="";Array.isArray(c.urls)&&(s=c.urls.map(a=>`<a href="${be(a)}" target="_blank" rel="noopener noreferrer">${be(a)}</a>`).join("<br>")),gr.innerHTML=`
    <h3>${be(c.name)}</h3>
    <p><strong>Altitude:</strong> ${be(c.altitude_m||"?")} m</p>
    <p><strong>Capacity:</strong> ${be(c.places||"?")} places</p>
    <p><strong>Gardien(s):</strong> ${be(c.gardien||"Non renseigné")}</p>
    <p><strong>Available on ${be(Ct)}:</strong> ${be(t)}</p>
    ${c.description?`<p>${be(c.description)}</p>`:""}
    ${s}
  `}function Vn(){xe.clearFilter(),pi(),gr.innerHTML=Eh}function pi(){const c=et.getBounds(),e=Ts.map(t=>{var n;const s=(n=t.availability)==null?void 0:n[Ct];return{...t,available_places:s===void 0?null:s}}).filter(t=>t.lat&&t.lng&&c.contains([t.lat,t.lng]));xe.setData(e),As.forEach(({marker:t,refuge:s})=>{var h;const n=(h=s.availability)==null?void 0:h[Ct];t.setIcon(n>0?Rh:yh);const a=be(s.name),l=be(n??"?");t.setPopupContent(`<strong>${a}</strong><br>Available on ${be(Ct)}: ${l}`)})}function Ah(){const c=Ze.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors, © OpenStreetMap contributors",maxZoom:17}),e=Ze.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"});et=Ze.map("map",{center:[45.5,6.5],zoom:8,layers:[c]}),Ze.control.layers({OpenStreetMap:e,Topographic:c}).addTo(et),et.on("popupclose",Vn),et.on("click",Vn),et.on("moveend",pi)}function Lh(){xe=new gh("#refuge-table",{layout:"fitColumns",pagination:"local",paginationSize:10,columns:[{title:"Refuge",field:"name",headerFilter:"input",widthGrow:2},{title:"Altitude",field:"altitude_m",hozAlign:"center",width:90},{title:"Places",field:"places",hozAlign:"center",width:80},{title:"Available",field:"available_places",hozAlign:"center",width:110,formatter:c=>Th(c.getValue())}]}),xe.on("tableBuilt",function(){xe.on("rowClick",(c,e)=>{const t=e.getData();if(t.lat&&t.lng){br(t),xe.clearFilter(),xe.setFilter("structure","=",t.structure);const s=As.find(n=>n.refuge.lat===t.lat&&n.refuge.lng===t.lng);s&&s.marker.openPopup()}})})}function Sh(){As=Ts.map(c=>{if(!c.lat||!c.lng)return null;const e=Ze.marker([c.lat,c.lng]).addTo(et).bindPopup("");return e.on("click",()=>{br(c),xe.clearFilter(),xe.setFilter("structure","=",c.structure)}),{marker:e,refuge:c}}).filter(Boolean)}Object.keys(Rs).forEach(c=>Rs[c].availability=Ch[c].availability);Ts=Object.values(Rs);Ah();Lh();Sh();xe.on("tableBuilt",()=>{pi()});wh.addEventListener("change",c=>{Ct=c.target.value,pi()});document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("toggle-sidebar"),e=document.getElementById("sidebar");c&&c.addEventListener("click",()=>{e.classList.toggle("minimized")})});
